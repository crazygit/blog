<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>《利用Python进行数据分析第二版》读书笔记一 - Soul Mate</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="crazygit" /><meta name="description" content="本文是利用Python进行数据分析的读书笔记一，主要记录了Numpy, Pandas的一些基础操作和数据读取和保存方法
" />

  <meta name="keywords" content="Hugo, crazygit, blog" />


<meta name="baidu-site-verification" content="mEI3NT6pyx" />
<meta name="google-site-verification" content="AbF6G10N67H-FaerplTnvfAXJrTtXBGHdr4xsSot7z8" />


<meta name="generator" content="Hugo 0.48" />


<link rel="canonical" href="https://crazygit.wiseturtles.com/2017/12/26/python-for-data-analysis-2nd-edition-note-one/" />



<link rel="icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">







<link href="/dist/jane.min.css?v=2.7.0" rel="stylesheet">



<link rel="stylesheet" href="/css/douban.css">

<link rel="stylesheet" href="/css/monokai-syntax.css">


<meta property="og:title" content="《利用Python进行数据分析第二版》读书笔记一" />
<meta property="og:description" content="本文是利用Python进行数据分析的读书笔记一，主要记录了Numpy, Pandas的一些基础操作和数据读取和保存方法
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://crazygit.wiseturtles.com/2017/12/26/python-for-data-analysis-2nd-edition-note-one/" /><meta property="article:published_time" content="2017-12-26T18:21:46&#43;08:00"/>
<meta property="article:modified_time" content="2017-12-26T18:21:46&#43;08:00"/>
<meta itemprop="name" content="《利用Python进行数据分析第二版》读书笔记一">
<meta itemprop="description" content="本文是利用Python进行数据分析的读书笔记一，主要记录了Numpy, Pandas的一些基础操作和数据读取和保存方法
">


<meta itemprop="datePublished" content="2017-12-26T18:21:46&#43;08:00" />
<meta itemprop="dateModified" content="2017-12-26T18:21:46&#43;08:00" />
<meta itemprop="wordCount" content="5072">



<meta itemprop="keywords" content="numpy,pandas,matplotlib," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="《利用Python进行数据分析第二版》读书笔记一"/>
<meta name="twitter:description" content="本文是利用Python进行数据分析的读书笔记一，主要记录了Numpy, Pandas的一些基础操作和数据读取和保存方法
"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-112251188-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Soul Mate</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/categories/">分类</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/books/">读书</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/about/">关于</a>
          
        
      </li>
    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Soul Mate
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/">主页</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/categories/">分类</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/post/">归档</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/tags/">标签</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/books/">读书</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/about/">关于</a>
          

        

      </li>
    
    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">《利用Python进行数据分析第二版》读书笔记一</h1>
      
      <div class="post-meta">
        <span class="post-time"> 2017-12-26 </span>
        <div class="post-category">
            <a href="https://crazygit.wiseturtles.com/categories/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"> python数据分析 </a>
            
          </div>
        <span class="more-meta"> 约 5072 字 </span>
          <span class="more-meta"> 预计阅读 11 分钟 </span>

        
        
          <span id="busuanzi_container_page_pv">
            | 阅读 <span id="busuanzi_value_page_pv"></span>
          </span>
        

        
        
          <span id="/2017/12/26/python-for-data-analysis-2nd-edition-note-one/" class="leancloud_visitors" data-flag-title="《利用Python进行数据分析第二版》读书笔记一">
            <span class="post-meta-item-text"> | 阅读 </span>
            <span class="leancloud-visitors-count"></span>
          </span>
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#numpy基础">Numpy基础</a>
<ul>
<li><a href="#numpy数据类型">Numpy数据类型</a></li>
<li><a href="#np-where">np.where</a></li>
<li><a href="#布尔数组">布尔数组</a></li>
<li><a href="#数组排序">数组排序</a></li>
<li><a href="#唯一性和in操作">唯一性和in操作</a></li>
<li><a href="#文件输入输出">文件输入输出</a></li>
<li><a href="#矩阵乘法的另一种表示方法">矩阵乘法的另一种表示方法</a></li>
<li><a href="#线性代数-linear-algebra">线性代数(Linear Algebra)</a></li>
</ul></li>
<li><a href="#pandas基础">Pandas基础</a>
<ul>
<li><a href="#series-对象和它的-index-都有一个-name-属性"><code>Series</code>对象和它的<code>index</code>都有一个<code>name</code>属性</a></li>
<li><a href="#列操作">列操作</a></li>
<li><a href="#dataframe的index和column也可以设置name属性">DataFrame的index和column也可以设置name属性</a></li>
<li><a href="#reindexing">Reindexing</a></li>
<li><a href="#drop行或列">Drop行或列</a></li>
<li><a href="#函数应用和映射">函数应用和映射</a></li>
<li><a href="#排序-sort">排序(Sort)</a></li>
<li><a href="#排名-rank">排名(rank)</a></li>
<li><a href="#重复的索引">重复的索引</a></li>
</ul></li>
<li><a href="#pandas数据加载-存储">Pandas数据加载，存储</a>
<ul>
<li><a href="#读取csv文件">读取CSV文件</a></li>
<li><a href="#保存数据">保存数据</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <h2 id="numpy基础">Numpy基础</h2>

<p>更多关于NumPy的使用, 可以参考<a href="https://crazygit.wiseturtles.com/2017/12/19/numpy-qucikstart/">NumPy快速入门指南</a></p>

<h3 id="numpy数据类型">Numpy数据类型</h3>

<p><img src="http://images.wiseturtles.com/2017-12-26-Numpy_data_types.png" alt="Numpy DataTypes" /></p>

<h3 id="np-where">np.where</h3>

<p><code>np.where</code>是一个向量版本的三元表达式<code>x if c else y</code>。假如我们有三个数组<code>xarr</code>, <code>yarr</code>, <code>cond</code>。
当<code>cond</code>为真时，取<code>xarr</code>的值，否则取<code>yarr</code>的值。我们可以这样做:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">xarr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mf">1.4</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">yarr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">2.1</span><span class="p">,</span> <span class="mf">2.2</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">,</span> <span class="mf">2.4</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">cond</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span> <span class="k">if</span> <span class="n">c</span> <span class="k">else</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">xarr</span><span class="p">,</span> <span class="n">yarr</span><span class="p">,</span> <span class="n">cond</span><span class="p">)]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span>
<span class="p">[</span><span class="mf">1.1000000000000001</span><span class="p">,</span> <span class="mf">2.2000000000000002</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mf">1.3999999999999999</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">]</span></code></pre></td></tr></table>
</div>
</div>
<p></p>

<p>但是上面这种做法是纯python的做法，效率很慢，而且无法用于多维数组。用<code>np.where</code>就很简单了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">cond</span><span class="p">,</span> <span class="n">xarr</span><span class="p">,</span> <span class="n">yarr</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span>
<span class="n">array</span><span class="p">([</span> <span class="mf">1.1</span><span class="p">,</span>  <span class="mf">2.2</span><span class="p">,</span>  <span class="mf">1.3</span><span class="p">,</span>  <span class="mf">1.4</span><span class="p">,</span>  <span class="mf">2.5</span><span class="p">])</span></code></pre></td></tr></table>
</div>
</div>
<p><code>np.where</code>的第二个和第三个参数，除了数组类型之外，也可以是标量</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span>
<span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">0.16323877</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.65162139</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.53392306</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.84839303</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.67860968</span><span class="p">,</span>  <span class="mf">1.02998872</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.66306679</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.23551981</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.66004673</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.13882878</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.90901002</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.11414436</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.24704485</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.87881313</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.06539659</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.82992508</span><span class="p">]])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="n">array</span><span class="p">([[</span><span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
       <span class="p">[</span> <span class="bp">True</span><span class="p">,</span>  <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
       <span class="p">[</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
       <span class="p">[</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>

<span class="c1"># 将数组中&gt;0的全部替换为2，小于0的全部用-2替换</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">arr</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">2</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">]])</span>

<span class="c1"># 将数组中&gt;0的全部替换为2，小于0的不变</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">arr</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">arr</span><span class="p">)</span>
<span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">0.16323877</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.65162139</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.53392306</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.84839303</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">2.</span>        <span class="p">,</span>  <span class="mf">2.</span>        <span class="p">,</span> <span class="o">-</span><span class="mf">1.66306679</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.23551981</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">2.</span>        <span class="p">,</span> <span class="o">-</span><span class="mf">1.13882878</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.90901002</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.11414436</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">2.</span>        <span class="p">,</span> <span class="o">-</span><span class="mf">0.87881313</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.06539659</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.82992508</span><span class="p">]])</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="布尔数组">布尔数组</h3>

<p>当为<code>True</code>时，赋值为1，为<code>False</code>时，赋值为0。利用这个特性，很容易计算出一个数组里满足特定条件的元素个数。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># 统计大于0的元素个数</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">arr</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span>
<span class="mi">48</span>

<span class="c1"># 统计小于0的元素个数</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">arr</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span>
<span class="mi">52</span></code></pre></td></tr></table>
</div>
</div>
<p><code>any</code>函数用于检查数组中有一个元素或多个元素的值为<code>True</code>。<code>all</code>函数用于检查数组中所有的元素是否为<code>True</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">bools</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">bools</span><span class="o">.</span><span class="nb">any</span><span class="p">()</span>
<span class="bp">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">bools</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span>
<span class="bp">False</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="数组排序">数组排序</h3>

<p>就跟python内置的<code>sort</code>函数一样，Numpy提供了排序功能</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span>
<span class="n">array</span><span class="p">([</span> <span class="mf">0.45462395</span><span class="p">,</span>  <span class="mf">1.89881592</span><span class="p">,</span>  <span class="mf">0.23095329</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.15011573</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.50788654</span><span class="p">,</span>
       <span class="o">-</span><span class="mf">0.19426878</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span>
<span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.50788654</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.19426878</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.15011573</span><span class="p">,</span>  <span class="mf">0.23095329</span><span class="p">,</span>  <span class="mf">0.45462395</span><span class="p">,</span>
        <span class="mf">1.89881592</span><span class="p">])</span></code></pre></td></tr></table>
</div>
</div>
<p>也可以在指定轴排序</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span>
<span class="n">array</span><span class="p">([[</span> <span class="mf">0.85243833</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.20601835</span><span class="p">,</span>  <span class="mf">0.42260075</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.0022698</span> <span class="p">,</span>  <span class="mf">0.69309103</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.6865517</span> <span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.17471696</span><span class="p">,</span>  <span class="mf">0.77361444</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.25720617</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.83807922</span><span class="p">,</span>  <span class="mf">0.43469269</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.18505689</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">0.19003894</span><span class="p">,</span>  <span class="mf">0.29031477</span><span class="p">,</span>  <span class="mf">1.68124349</span><span class="p">]])</span>

<span class="c1"># 在列方向排序</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span>
<span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">0.19003894</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.20601835</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.6865517</span> <span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.0022698</span> <span class="p">,</span>  <span class="mf">0.29031477</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.25720617</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.17471696</span><span class="p">,</span>  <span class="mf">0.43469269</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.18505689</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.83807922</span><span class="p">,</span>  <span class="mf">0.69309103</span><span class="p">,</span>  <span class="mf">0.42260075</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.85243833</span><span class="p">,</span>  <span class="mf">0.77361444</span><span class="p">,</span>  <span class="mf">1.68124349</span><span class="p">]])</span>

<span class="c1"># 在行方向排序</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span>
<span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">0.6865517</span> <span class="p">,</span> <span class="o">-</span><span class="mf">0.20601835</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.19003894</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">0.25720617</span><span class="p">,</span>  <span class="mf">0.0022698</span> <span class="p">,</span>  <span class="mf">0.29031477</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">0.18505689</span><span class="p">,</span>  <span class="mf">0.17471696</span><span class="p">,</span>  <span class="mf">0.43469269</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.42260075</span><span class="p">,</span>  <span class="mf">0.69309103</span><span class="p">,</span>  <span class="mf">0.83807922</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.77361444</span><span class="p">,</span>  <span class="mf">0.85243833</span><span class="p">,</span>  <span class="mf">1.68124349</span><span class="p">]])</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="唯一性和in操作">唯一性和in操作</h3>

<p>Numpy专门为一维数组提供了一些函数</p>

<p><strong>唯一性（unique)</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="s1">&#39;Joe&#39;</span><span class="p">,</span> <span class="s1">&#39;Will&#39;</span><span class="p">,</span> <span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="s1">&#39;Will&#39;</span><span class="p">,</span> <span class="s1">&#39;Joe&#39;</span><span class="p">,</span> <span class="s1">&#39;Joe&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
<span class="n">array</span><span class="p">([</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="s1">&#39;Joe&#39;</span><span class="p">,</span> <span class="s1">&#39;Will&#39;</span><span class="p">],</span>
      <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;&lt;U4&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">ints</span><span class="p">)</span>
<span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span></code></pre></td></tr></table>
</div>
</div>
<p><strong>np.in1d</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>

<span class="c1"># 检查一个数组的值是否在另一个数组里，返回一个布尔数组</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">in1d</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">array</span><span class="p">([</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span>  <span class="bp">True</span><span class="p">,</span>  <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span>  <span class="bp">True</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="文件输入输出">文件输入输出</h3>

<p>numpy可以使用<code>save</code>和<code>load</code>方法来输出和加载。默认情况下，是以未压缩的二进制格式保存，并会自动加上后缀扩展<code>.npy</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span>
<span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;some_array&#39;</span><span class="p">,</span> <span class="n">arr</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;some_array.npy&#39;</span><span class="p">)</span>
<span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span></code></pre></td></tr></table>
</div>
</div>
<p>使用<code>savez</code>可以一次以未压缩的二进制格式保存多个数组</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">xarr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">barr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># 使用a,b参数分别保存xarr和barr</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">savez</span><span class="p">(</span><span class="s1">&#39;array_archive.npz&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">xarr</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">barr</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">arch</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;array_archive.npz&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">arch</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">arch</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span></code></pre></td></tr></table>
</div>
</div>
<p>以压缩的格式保存数组</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">savez_compressed</span><span class="p">(</span><span class="s1">&#39;arrays_compressed.npz&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">arr</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">arr</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="矩阵乘法的另一种表示方法">矩阵乘法的另一种表示方法</h3>

<p>在python3.5中, 可以使用<code>@</code>来表示矩阵乘法, 跟<code>dot</code>函数效果一样</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">],</span> <span class="p">[</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">5.</span><span class="p">,</span> <span class="mf">6.</span><span class="p">]])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="n">array</span><span class="p">([</span>  <span class="mf">6.</span><span class="p">,</span>  <span class="mf">15.</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="err">@</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">array</span><span class="p">([</span>  <span class="mf">6.</span><span class="p">,</span>  <span class="mf">15.</span><span class="p">])</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="线性代数-linear-algebra">线性代数(Linear Algebra)</h3>

<p><code>numpy.linalg</code> 模块包含类线性代数常用的操作</p>

<h2 id="pandas基础">Pandas基础</h2>

<p>更多关于Pandas的使用, 可以参考<a href="https://crazygit.wiseturtles.com/2017/12/20/10-minutes-to-pandas/">10分钟入门Pandas</a></p>

<h3 id="series-对象和它的-index-都有一个-name-属性"><code>Series</code>对象和它的<code>index</code>都有一个<code>name</code>属性</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="mi">0</span>    <span class="mi">0</span>
<span class="mi">1</span>    <span class="mi">1</span>
<span class="mi">2</span>    <span class="mi">2</span>
<span class="mi">3</span>    <span class="mi">3</span>
<span class="mi">4</span>    <span class="mi">4</span>
<span class="mi">5</span>    <span class="mi">5</span>
<span class="mi">6</span>    <span class="mi">6</span>
<span class="mi">7</span>    <span class="mi">7</span>
<span class="mi">8</span>    <span class="mi">8</span>
<span class="mi">9</span>    <span class="mi">9</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;IntSeries&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;IntSeriesIndex&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="n">IntSeriesIndex</span>
<span class="mi">0</span>    <span class="mi">0</span>
<span class="mi">1</span>    <span class="mi">1</span>
<span class="mi">2</span>    <span class="mi">2</span>
<span class="mi">3</span>    <span class="mi">3</span>
<span class="mi">4</span>    <span class="mi">4</span>
<span class="mi">5</span>    <span class="mi">5</span>
<span class="mi">6</span>    <span class="mi">6</span>
<span class="mi">7</span>    <span class="mi">7</span>
<span class="mi">8</span>    <span class="mi">8</span>
<span class="mi">9</span>    <span class="mi">9</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">IntSeries</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="列操作">列操作</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span>
   <span class="n">a</span>  <span class="n">b</span>   <span class="n">c</span>   <span class="n">d</span>
<span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>
<span class="mi">1</span>  <span class="mi">4</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="mi">7</span>
<span class="mi">2</span>  <span class="mi">8</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mi">11</span>

<span class="c1"># 添加列</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span><span class="o">=</span> <span class="mi">5</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span>
   <span class="n">a</span>  <span class="n">b</span>   <span class="n">c</span>   <span class="n">d</span>  <span class="n">e</span>
<span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>  <span class="mi">5</span>
<span class="mi">1</span>  <span class="mi">4</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="mi">7</span>  <span class="mi">5</span>
<span class="mi">2</span>  <span class="mi">8</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mi">11</span>  <span class="mi">5</span>

<span class="c1"># 删除列</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span>
   <span class="n">b</span>   <span class="n">c</span>   <span class="n">d</span>  <span class="n">e</span>
<span class="mi">0</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>  <span class="mi">5</span>
<span class="mi">1</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="mi">7</span>  <span class="mi">5</span>
<span class="mi">2</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mi">11</span>  <span class="mi">5</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="dataframe的index和column也可以设置name属性">DataFrame的index和column也可以设置name属性</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span>
   <span class="n">a</span>  <span class="n">b</span>   <span class="n">c</span>   <span class="n">d</span>
<span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>
<span class="mi">1</span>  <span class="mi">4</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="mi">7</span>
<span class="mi">2</span>  <span class="mi">8</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mi">11</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;index_name&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;columns_name&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span>
<span class="n">columns_name</span>  <span class="n">a</span>  <span class="n">b</span>   <span class="n">c</span>   <span class="n">d</span>
<span class="n">index_name</span>
<span class="mi">0</span>             <span class="mi">0</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>
<span class="mi">1</span>             <span class="mi">4</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="mi">7</span>
<span class="mi">2</span>             <span class="mi">8</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mi">11</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="reindexing">Reindexing</h3>

<p><code>Series</code>和<code>DataFrame</code>对象可以使用<code>reindex</code>方法来修改行索引和列索引</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Series reindex</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span>
<span class="n">a</span>    <span class="mi">0</span>
<span class="n">b</span>    <span class="mi">1</span>
<span class="n">c</span>    <span class="mi">2</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">obj2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">reindex</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">obj2</span>
<span class="n">a</span>    <span class="mf">0.0</span>
<span class="n">b</span>    <span class="mf">1.0</span>
<span class="n">c</span>    <span class="mf">2.0</span>
<span class="n">d</span>    <span class="n">NaN</span>
<span class="n">e</span>    <span class="n">NaN</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="c1"># DataFrame reindex</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Ohio&#39;</span><span class="p">,</span> <span class="s1">&#39;Texas&#39;</span><span class="p">,</span> <span class="s1">&#39;California&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span>
   <span class="n">Ohio</span>  <span class="n">Texas</span>  <span class="n">California</span>
<span class="n">a</span>     <span class="mi">0</span>      <span class="mi">1</span>           <span class="mi">2</span>
<span class="n">c</span>     <span class="mi">3</span>      <span class="mi">4</span>           <span class="mi">5</span>
<span class="n">d</span>     <span class="mi">6</span>      <span class="mi">7</span>           <span class="mi">8</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">frame2</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">reindex</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">frame2</span>
   <span class="n">Ohio</span>  <span class="n">Texas</span>  <span class="n">California</span>
<span class="n">a</span>   <span class="mf">0.0</span>    <span class="mf">1.0</span>         <span class="mf">2.0</span>
<span class="n">b</span>   <span class="n">NaN</span>    <span class="n">NaN</span>         <span class="n">NaN</span>
<span class="n">c</span>   <span class="mf">3.0</span>    <span class="mf">4.0</span>         <span class="mf">5.0</span>
<span class="n">d</span>   <span class="mf">6.0</span>    <span class="mf">7.0</span>         <span class="mf">8.0</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">states</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Texas&#39;</span><span class="p">,</span> <span class="s1">&#39;Utah&#39;</span><span class="p">,</span> <span class="s1">&#39;California&#39;</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">states</span><span class="p">)</span>
   <span class="n">Texas</span>  <span class="n">Utah</span>  <span class="n">California</span>
<span class="n">a</span>      <span class="mi">1</span>   <span class="n">NaN</span>           <span class="mi">2</span>
<span class="n">c</span>      <span class="mi">4</span>   <span class="n">NaN</span>           <span class="mi">5</span>
<span class="n">d</span>      <span class="mi">7</span>   <span class="n">NaN</span>           <span class="mi">8</span></code></pre></td></tr></table>
</div>
</div>
<p><code>reindex</code>后的值还可以使用<code>method</code>参数来补充新添加的值</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;purple&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span>
<span class="mi">0</span>      <span class="n">blue</span>
<span class="mi">2</span>    <span class="n">purple</span>
<span class="mi">4</span>    <span class="n">yellow</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>

<span class="c1"># method的可选值</span>
<span class="c1"># * default: don&#39;t fill gaps</span>
<span class="c1"># * pad / ffill: propagate last valid observation forward to next</span>
<span class="c1">#   valid</span>
<span class="c1"># * backfill / bfill: use next valid observation to fill gap</span>
<span class="c1"># * nearest: use nearest valid observations to fill gap</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;ffill&#39;</span><span class="p">)</span>
<span class="mi">0</span>      <span class="n">blue</span>
<span class="mi">1</span>      <span class="n">blue</span>
<span class="mi">2</span>    <span class="n">purple</span>
<span class="mi">3</span>    <span class="n">purple</span>
<span class="mi">4</span>    <span class="n">yellow</span>
<span class="mi">5</span>    <span class="n">yellow</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="drop行或列">Drop行或列</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">5.</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span>
<span class="n">a</span>    <span class="mf">0.0</span>
<span class="n">b</span>    <span class="mf">1.0</span>
<span class="n">c</span>    <span class="mf">2.0</span>
<span class="n">d</span>    <span class="mf">3.0</span>
<span class="n">e</span>    <span class="mf">4.0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="c1"># drop掉一个索引</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">new_obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">new_obj</span>
<span class="n">a</span>    <span class="mf">0.0</span>
<span class="n">b</span>    <span class="mf">1.0</span>
<span class="n">d</span>    <span class="mf">3.0</span>
<span class="n">e</span>    <span class="mf">4.0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="n">a</span>    <span class="mf">0.0</span>
<span class="n">b</span>    <span class="mf">1.0</span>
<span class="n">e</span>    <span class="mf">4.0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="o">...</span>                     <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Ohio&#39;</span><span class="p">,</span> <span class="s1">&#39;Colorado&#39;</span><span class="p">,</span> <span class="s1">&#39;Utah&#39;</span><span class="p">,</span> <span class="s1">&#39;New York&#39;</span><span class="p">],</span>
<span class="o">...</span>                      <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">,</span> <span class="s1">&#39;four&#39;</span><span class="p">])</span>
<span class="o">...</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span>
          <span class="n">one</span>  <span class="n">two</span>  <span class="n">three</span>  <span class="n">four</span>
<span class="n">Ohio</span>        <span class="mi">0</span>    <span class="mi">1</span>      <span class="mi">2</span>     <span class="mi">3</span>
<span class="n">Colorado</span>    <span class="mi">4</span>    <span class="mi">5</span>      <span class="mi">6</span>     <span class="mi">7</span>
<span class="n">Utah</span>        <span class="mi">8</span>    <span class="mi">9</span>     <span class="mi">10</span>    <span class="mi">11</span>
<span class="n">New</span> <span class="n">York</span>   <span class="mi">12</span>   <span class="mi">13</span>     <span class="mi">14</span>    <span class="mi">15</span>

<span class="c1"># drop行</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Colorado&#39;</span><span class="p">,</span> <span class="s1">&#39;Ohio&#39;</span><span class="p">])</span>
          <span class="n">one</span>  <span class="n">two</span>  <span class="n">three</span>  <span class="n">four</span>
<span class="n">Utah</span>        <span class="mi">8</span>    <span class="mi">9</span>     <span class="mi">10</span>    <span class="mi">11</span>
<span class="n">New</span> <span class="n">York</span>   <span class="mi">12</span>   <span class="mi">13</span>     <span class="mi">14</span>    <span class="mi">15</span>

<span class="c1"># drop列</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
          <span class="n">one</span>  <span class="n">three</span>  <span class="n">four</span>
<span class="n">Ohio</span>        <span class="mi">0</span>      <span class="mi">2</span>     <span class="mi">3</span>
<span class="n">Colorado</span>    <span class="mi">4</span>      <span class="mi">6</span>     <span class="mi">7</span>
<span class="n">Utah</span>        <span class="mi">8</span>     <span class="mi">10</span>    <span class="mi">11</span>
<span class="n">New</span> <span class="n">York</span>   <span class="mi">12</span>     <span class="mi">14</span>    <span class="mi">15</span>

<span class="c1"># 默认情况下，drop方法会返回一个新的对象，但是不会修改原来的值</span>
<span class="c1"># 使用inplace参数可以直接修改原来的值</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Utah&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span>
          <span class="n">one</span>  <span class="n">two</span>  <span class="n">three</span>  <span class="n">four</span>
<span class="n">Ohio</span>        <span class="mi">0</span>    <span class="mi">1</span>      <span class="mi">2</span>     <span class="mi">3</span>
<span class="n">Colorado</span>    <span class="mi">4</span>    <span class="mi">5</span>      <span class="mi">6</span>     <span class="mi">7</span>
<span class="n">New</span> <span class="n">York</span>   <span class="mi">12</span>   <span class="mi">13</span>     <span class="mi">14</span>    <span class="mi">15</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="函数应用和映射">函数应用和映射</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;bde&#39;</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Utah&#39;</span><span class="p">,</span> <span class="s1">&#39;Ohio&#39;</span><span class="p">,</span> <span class="s1">&#39;Texas&#39;</span><span class="p">,</span> <span class="s1">&#39;Oregon&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span>
               <span class="n">b</span>         <span class="n">d</span>         <span class="n">e</span>
<span class="n">Utah</span>    <span class="mf">0.282987</span> <span class="o">-</span><span class="mf">0.941163</span> <span class="o">-</span><span class="mf">1.212623</span>
<span class="n">Ohio</span>   <span class="o">-</span><span class="mf">1.072346</span> <span class="o">-</span><span class="mf">0.245222</span> <span class="o">-</span><span class="mf">0.731497</span>
<span class="n">Texas</span>   <span class="mf">2.264081</span>  <span class="mf">0.169154</span> <span class="o">-</span><span class="mf">0.512539</span>
<span class="n">Oregon</span> <span class="o">-</span><span class="mf">0.795480</span>  <span class="mf">0.630302</span>  <span class="mf">1.127120</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="nb">abs</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
               <span class="n">b</span>         <span class="n">d</span>         <span class="n">e</span>
<span class="n">Utah</span>    <span class="mf">0.282987</span>  <span class="mf">0.941163</span>  <span class="mf">1.212623</span>
<span class="n">Ohio</span>    <span class="mf">1.072346</span>  <span class="mf">0.245222</span>  <span class="mf">0.731497</span>
<span class="n">Texas</span>   <span class="mf">2.264081</span>  <span class="mf">0.169154</span>  <span class="mf">0.512539</span>
<span class="n">Oregon</span>  <span class="mf">0.795480</span>  <span class="mf">0.630302</span>  <span class="mf">1.127120</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="nb">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="nb">min</span><span class="p">()</span>

<span class="c1"># 默认作用于每列</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">b</span>    <span class="mf">3.336427</span>
<span class="n">d</span>    <span class="mf">1.571465</span>
<span class="n">e</span>    <span class="mf">2.339742</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="c1"># 指定作用于每行</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span>
<span class="n">Utah</span>      <span class="mf">1.495609</span>
<span class="n">Ohio</span>      <span class="mf">0.827124</span>
<span class="n">Texas</span>     <span class="mf">2.776620</span>
<span class="n">Oregon</span>    <span class="mf">1.922600</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="c1"># applymap作用于每个元素</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">format</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">x</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span><span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="n">format</span><span class="p">)</span>
            <span class="n">b</span>      <span class="n">d</span>      <span class="n">e</span>
<span class="n">Utah</span>     <span class="mf">0.28</span>  <span class="o">-</span><span class="mf">0.94</span>  <span class="o">-</span><span class="mf">1.21</span>
<span class="n">Ohio</span>    <span class="o">-</span><span class="mf">1.07</span>  <span class="o">-</span><span class="mf">0.25</span>  <span class="o">-</span><span class="mf">0.73</span>
<span class="n">Texas</span>    <span class="mf">2.26</span>   <span class="mf">0.17</span>  <span class="o">-</span><span class="mf">0.51</span>
<span class="n">Oregon</span>  <span class="o">-</span><span class="mf">0.80</span>   <span class="mf">0.63</span>   <span class="mf">1.13</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span><span class="o">.</span><span class="nb">map</span><span class="p">(</span><span class="n">format</span><span class="p">)</span>
<span class="n">Utah</span>      <span class="o">-</span><span class="mf">1.21</span>
<span class="n">Ohio</span>      <span class="o">-</span><span class="mf">0.73</span>
<span class="n">Texas</span>     <span class="o">-</span><span class="mf">0.51</span>
<span class="n">Oregon</span>     <span class="mf">1.13</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">e</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="排序-sort">排序(Sort)</h3>

<p>按索引排序</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span>
<span class="n">d</span>    <span class="mi">0</span>
<span class="n">a</span>    <span class="mi">1</span>
<span class="n">b</span>    <span class="mi">2</span>
<span class="n">c</span>    <span class="mi">3</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>

<span class="c1"># 按索引排序</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="n">a</span>    <span class="mi">1</span>
<span class="n">b</span>    <span class="mi">2</span>
<span class="n">c</span>    <span class="mi">3</span>
<span class="n">d</span>    <span class="mi">0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;three&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span>
       <span class="n">d</span>  <span class="n">a</span>  <span class="n">b</span>  <span class="n">c</span>
<span class="n">three</span>  <span class="mi">0</span>  <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>
<span class="n">one</span>    <span class="mi">4</span>  <span class="mi">5</span>  <span class="mi">6</span>  <span class="mi">7</span>

<span class="c1"># 按索引排序</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
       <span class="n">d</span>  <span class="n">a</span>  <span class="n">b</span>  <span class="n">c</span>
<span class="n">one</span>    <span class="mi">4</span>  <span class="mi">5</span>  <span class="mi">6</span>  <span class="mi">7</span>
<span class="n">three</span>  <span class="mi">0</span>  <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>

<span class="c1"># 按列排序</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
       <span class="n">a</span>  <span class="n">b</span>  <span class="n">c</span>  <span class="n">d</span>
<span class="n">three</span>  <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">0</span>
<span class="n">one</span>    <span class="mi">5</span>  <span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">4</span>

<span class="c1"># 按照降序排序</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
       <span class="n">d</span>  <span class="n">c</span>  <span class="n">b</span>  <span class="n">a</span>
<span class="n">three</span>  <span class="mi">0</span>  <span class="mi">3</span>  <span class="mi">2</span>  <span class="mi">1</span>
<span class="n">one</span>    <span class="mi">4</span>  <span class="mi">7</span>  <span class="mi">6</span>  <span class="mi">5</span></code></pre></td></tr></table>
</div>
</div>
<p>按值排序</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span>
<span class="mi">0</span>    <span class="mi">4</span>
<span class="mi">1</span>    <span class="mi">7</span>
<span class="mi">2</span>   <span class="o">-</span><span class="mi">3</span>
<span class="mi">3</span>    <span class="mi">2</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span>
<span class="mi">2</span>   <span class="o">-</span><span class="mi">3</span>
<span class="mi">3</span>    <span class="mi">2</span>
<span class="mi">0</span>    <span class="mi">4</span>
<span class="mi">1</span>    <span class="mi">7</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>


<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<span class="c1"># 排序时NaN会自动排在最后</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span>
<span class="mi">4</span>   <span class="o">-</span><span class="mf">3.0</span>
<span class="mi">5</span>    <span class="mf">2.0</span>
<span class="mi">0</span>    <span class="mf">4.0</span>
<span class="mi">2</span>    <span class="mf">7.0</span>
<span class="mi">1</span>    <span class="n">NaN</span>
<span class="mi">3</span>    <span class="n">NaN</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span>
   <span class="n">a</span>  <span class="n">b</span>
<span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">4</span>
<span class="mi">1</span>  <span class="mi">1</span>  <span class="mi">7</span>
<span class="mi">2</span>  <span class="mi">0</span> <span class="o">-</span><span class="mi">3</span>
<span class="mi">3</span>  <span class="mi">1</span>  <span class="mi">2</span>

<span class="c1"># 按照指定的列排序</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
   <span class="n">a</span>  <span class="n">b</span>
<span class="mi">2</span>  <span class="mi">0</span> <span class="o">-</span><span class="mi">3</span>
<span class="mi">3</span>  <span class="mi">1</span>  <span class="mi">2</span>
<span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">4</span>
<span class="mi">1</span>  <span class="mi">1</span>  <span class="mi">7</span>

<span class="c1"># 按照多个列排序</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">])</span>
   <span class="n">a</span>  <span class="n">b</span>
<span class="mi">2</span>  <span class="mi">0</span> <span class="o">-</span><span class="mi">3</span>
<span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">4</span>
<span class="mi">3</span>  <span class="mi">1</span>  <span class="mi">2</span>
<span class="mi">1</span>  <span class="mi">1</span>  <span class="mi">7</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="排名-rank">排名(rank)</h3>

<p><code>ranking</code>（排名）是根据数字的排序，分配一个数字。rank方法能用于series和DataFrame，rank方法默认会给每个group一个mean rank（平均排名）。</p>

<p>rank表示在这个数在原来的Series中排第几名，有相同的数，取其排名平均（默认）作为值。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span>
<span class="mi">0</span>    <span class="mi">7</span>
<span class="mi">1</span>   <span class="o">-</span><span class="mi">5</span>
<span class="mi">2</span>    <span class="mi">7</span>
<span class="mi">3</span>    <span class="mi">4</span>
<span class="mi">4</span>    <span class="mi">2</span>
<span class="mi">5</span>    <span class="mi">0</span>
<span class="mi">6</span>    <span class="mi">4</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>

<span class="c1"># 索引1 排第一名。rank值是1.0</span>
<span class="c1"># 索引3和6分别排4，5名，所以rank是平均是4.5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span>
<span class="mi">0</span>    <span class="mf">6.5</span>
<span class="mi">1</span>    <span class="mf">1.0</span>
<span class="mi">2</span>    <span class="mf">6.5</span>
<span class="mi">3</span>    <span class="mf">4.5</span>
<span class="mi">4</span>    <span class="mf">3.0</span>
<span class="mi">5</span>    <span class="mf">2.0</span>
<span class="mi">6</span>    <span class="mf">4.5</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="c1"># 可以看出rank分配的值跟sort_values的排序是一致的</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span>
<span class="mi">1</span>   <span class="o">-</span><span class="mi">5</span>
<span class="mi">5</span>    <span class="mi">0</span>
<span class="mi">4</span>    <span class="mi">2</span>
<span class="mi">3</span>    <span class="mi">4</span>
<span class="mi">6</span>    <span class="mi">4</span>
<span class="mi">0</span>    <span class="mi">7</span>
<span class="mi">2</span>    <span class="mi">7</span></code></pre></td></tr></table>
</div>
</div>
<p>排序也可以根据数据出现的顺序来排序，而不是使用平均值</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span>
<span class="mi">0</span>    <span class="mi">7</span>
<span class="mi">1</span>   <span class="o">-</span><span class="mi">5</span>
<span class="mi">2</span>    <span class="mi">7</span>
<span class="mi">3</span>    <span class="mi">4</span>
<span class="mi">4</span>    <span class="mi">2</span>
<span class="mi">5</span>    <span class="mi">0</span>
<span class="mi">6</span>    <span class="mi">4</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>

<span class="c1"># 下面的排序中，虽然索引3和6对应的值是一样的，但是这次rank值并没有取平均值4.5，</span>
<span class="c1"># 而是根据它们出现的顺序，rank值依次为4和5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;first&#39;</span><span class="p">)</span>
<span class="mi">0</span>    <span class="mf">6.0</span>
<span class="mi">1</span>    <span class="mf">1.0</span>
<span class="mi">2</span>    <span class="mf">7.0</span>
<span class="mi">3</span>    <span class="mf">4.0</span>
<span class="mi">4</span>    <span class="mf">3.0</span>
<span class="mi">5</span>    <span class="mf">2.0</span>
<span class="mi">6</span>    <span class="mf">5.0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="c1"># 排序时，rank值取大的排名</span>
<span class="c1"># 索引3和6对应的值是一样的。rank值同时排第5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;max&#39;</span><span class="p">)</span>
<span class="mi">0</span>    <span class="mf">7.0</span>
<span class="mi">1</span>    <span class="mf">1.0</span>
<span class="mi">2</span>    <span class="mf">7.0</span>
<span class="mi">3</span>    <span class="mf">5.0</span>
<span class="mi">4</span>    <span class="mf">3.0</span>
<span class="mi">5</span>    <span class="mf">2.0</span>
<span class="mi">6</span>    <span class="mf">5.0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="c1"># 排序时，rank值取小的排名</span>
<span class="c1"># 索引3和6对应的值是一样的。rank值同时排第4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;min&#39;</span><span class="p">)</span>
<span class="mi">0</span>    <span class="mf">6.0</span>
<span class="mi">1</span>    <span class="mf">1.0</span>
<span class="mi">2</span>    <span class="mf">6.0</span>
<span class="mi">3</span>    <span class="mf">4.0</span>
<span class="mi">4</span>    <span class="mf">3.0</span>
<span class="mi">5</span>    <span class="mf">2.0</span>
<span class="mi">6</span>    <span class="mf">4.0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="c1"># 按照倒序排名</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="mi">0</span>    <span class="mf">1.0</span>
<span class="mi">1</span>    <span class="mf">7.0</span>
<span class="mi">2</span>    <span class="mf">1.0</span>
<span class="mi">3</span>    <span class="mf">3.0</span>
<span class="mi">4</span>    <span class="mf">5.0</span>
<span class="mi">5</span>    <span class="mf">6.0</span>
<span class="mi">6</span>    <span class="mf">3.0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>


<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">4.3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.5</span><span class="p">]})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span>
   <span class="n">a</span>    <span class="n">b</span>    <span class="n">c</span>
<span class="mi">0</span>  <span class="mi">0</span>  <span class="mf">4.3</span> <span class="o">-</span><span class="mf">2.0</span>
<span class="mi">1</span>  <span class="mi">1</span>  <span class="mf">7.0</span>  <span class="mf">5.0</span>
<span class="mi">2</span>  <span class="mi">0</span> <span class="o">-</span><span class="mf">3.0</span>  <span class="mf">8.0</span>
<span class="mi">3</span>  <span class="mi">1</span>  <span class="mf">2.0</span> <span class="o">-</span><span class="mf">2.5</span>

<span class="c1"># 按照行返回rank值</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">frame</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span>
     <span class="n">a</span>    <span class="n">b</span>    <span class="n">c</span>
<span class="mi">0</span>  <span class="mf">2.0</span>  <span class="mf">3.0</span>  <span class="mf">1.0</span>
<span class="mi">1</span>  <span class="mf">1.0</span>  <span class="mf">3.0</span>  <span class="mf">2.0</span>
<span class="mi">2</span>  <span class="mf">2.0</span>  <span class="mf">1.0</span>  <span class="mf">3.0</span>
<span class="mi">3</span>  <span class="mf">2.0</span>  <span class="mf">3.0</span>  <span class="mf">1.0</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="重复的索引">重复的索引</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span>
<span class="n">a</span>    <span class="mi">0</span>
<span class="n">a</span>    <span class="mi">1</span>
<span class="n">b</span>    <span class="mi">2</span>
<span class="n">b</span>    <span class="mi">3</span>
<span class="n">c</span>    <span class="mi">4</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>

<span class="c1"># is_unique 属性可以确定index是否含有重复的值</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_unique</span>
<span class="bp">False</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="pandas数据加载-存储">Pandas数据加载，存储</h2>

<p><strong>备注</strong>: 下面例子使用的csv文件可以从这里<a href="https://github.com/wesm/pydata-book">下载</a>。</p>

<h3 id="读取csv文件">读取CSV文件</h3>

<p>使用<code>read_csv</code>加载文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="o">&gt;&gt;&gt;</span> <span class="err">!</span> <span class="n">cat</span> <span class="n">examples</span><span class="o">/</span><span class="n">ex1</span><span class="o">.</span><span class="n">csv</span>
<span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">message</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="n">hello</span>
<span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="n">world</span>
<span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="n">foo</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;examples/ex1.csv&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
   <span class="n">a</span>   <span class="n">b</span>   <span class="n">c</span>   <span class="n">d</span> <span class="n">message</span>
<span class="mi">0</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>   <span class="mi">4</span>   <span class="n">hello</span>
<span class="mi">1</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="mi">7</span>   <span class="mi">8</span>   <span class="n">world</span>
<span class="mi">2</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mi">11</span>  <span class="mi">12</span>     <span class="n">foo</span></code></pre></td></tr></table>
</div>
</div>
<p>使用<code>read_table</code>加载文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;examples/ex1.csv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
   <span class="n">a</span>   <span class="n">b</span>   <span class="n">c</span>   <span class="n">d</span> <span class="n">message</span>
<span class="mi">0</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>   <span class="mi">4</span>   <span class="n">hello</span>
<span class="mi">1</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="mi">7</span>   <span class="mi">8</span>   <span class="n">world</span>
<span class="mi">2</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mi">11</span>  <span class="mi">12</span>     <span class="n">foo</span>

<span class="o">&gt;&gt;&gt;</span> <span class="err">!</span><span class="n">cat</span> <span class="n">examples</span><span class="o">/</span><span class="n">ex2</span><span class="o">.</span><span class="n">csv</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="n">hello</span>
<span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="n">world</span>
<span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="n">foo</span></code></pre></td></tr></table>
</div>
</div>
<p>针对没有header的情况</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;examples/ex2.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
   <span class="mi">0</span>   <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>      <span class="mi">4</span>
<span class="mi">0</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>   <span class="mi">4</span>  <span class="n">hello</span>
<span class="mi">1</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="mi">7</span>   <span class="mi">8</span>  <span class="n">world</span>
<span class="mi">2</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mi">11</span>  <span class="mi">12</span>    <span class="n">foo</span></code></pre></td></tr></table>
</div>
</div>
<p>指定columns索引</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;examples/ex2.csv&#39;</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">])</span>
   <span class="n">a</span>   <span class="n">b</span>   <span class="n">c</span>   <span class="n">d</span> <span class="n">message</span>
<span class="mi">0</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>   <span class="mi">4</span>   <span class="n">hello</span>
<span class="mi">1</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="mi">7</span>   <span class="mi">8</span>   <span class="n">world</span>
<span class="mi">2</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mi">11</span>  <span class="mi">12</span>     <span class="n">foo</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">]</span></code></pre></td></tr></table>
</div>
</div>
<p>使用csv中的message列作为index</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;examples/ex2.csv&#39;</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s1">&#39;message&#39;</span><span class="p">)</span>
         <span class="n">a</span>   <span class="n">b</span>   <span class="n">c</span>   <span class="n">d</span>
<span class="n">message</span>
<span class="n">hello</span>    <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>   <span class="mi">4</span>
<span class="n">world</span>    <span class="mi">5</span>   <span class="mi">6</span>   <span class="mi">7</span>   <span class="mi">8</span>
<span class="n">foo</span>      <span class="mi">9</span>  <span class="mi">10</span>  <span class="mi">11</span>  <span class="mi">12</span></code></pre></td></tr></table>
</div>
</div>
<p>构建hierarchical index</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="err">!</span><span class="n">cat</span> <span class="n">examples</span><span class="o">/</span><span class="n">csv_mindex</span><span class="o">.</span><span class="n">csv</span>
<span class="n">key1</span><span class="p">,</span><span class="n">key2</span><span class="p">,</span><span class="n">value1</span><span class="p">,</span><span class="n">value2</span>
<span class="n">one</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span>
<span class="n">one</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span>
<span class="n">one</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span>
<span class="n">one</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span>
<span class="n">two</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span>
<span class="n">two</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span>
<span class="n">two</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">14</span>
<span class="n">two</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">16</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">parsed</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;examples/csv_mindex.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;key1&#39;</span><span class="p">,</span> <span class="s1">&#39;key2&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">parsed</span>
           <span class="n">value1</span>  <span class="n">value2</span>
<span class="n">key1</span> <span class="n">key2</span>
<span class="n">one</span>  <span class="n">a</span>          <span class="mi">1</span>       <span class="mi">2</span>
     <span class="n">b</span>          <span class="mi">3</span>       <span class="mi">4</span>
     <span class="n">c</span>          <span class="mi">5</span>       <span class="mi">6</span>
     <span class="n">d</span>          <span class="mi">7</span>       <span class="mi">8</span>
<span class="n">two</span>  <span class="n">a</span>          <span class="mi">9</span>      <span class="mi">10</span>
     <span class="n">b</span>         <span class="mi">11</span>      <span class="mi">12</span>
     <span class="n">c</span>         <span class="mi">13</span>      <span class="mi">14</span>
     <span class="n">d</span>         <span class="mi">15</span>      <span class="mi">16</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">parsed</span><span class="o">.</span><span class="n">index</span>
<span class="n">MultiIndex</span><span class="p">(</span><span class="n">levels</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]],</span>
           <span class="n">labels</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span>
           <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;key1&#39;</span><span class="p">,</span> <span class="s1">&#39;key2&#39;</span><span class="p">])</span></code></pre></td></tr></table>
</div>
</div>
<p>使用其他的分隔符号(如下使用空格作为列分隔符)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;examples/ex3.txt&#39;</span><span class="p">))</span>
<span class="p">[</span><span class="s1">&#39;            A         B         C</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
 <span class="s1">&#39;aaa -0.264438 -1.026059 -0.619500</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
 <span class="s1">&#39;bbb  0.927272  0.302904 -0.032399</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ccc -0.264273 -0.386314 -0.217601</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ddd -0.871858 -0.348382  1.100491</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;examples/ex3.txt&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;\s+&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span>
            <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>
<span class="n">aaa</span> <span class="o">-</span><span class="mf">0.264438</span> <span class="o">-</span><span class="mf">1.026059</span> <span class="o">-</span><span class="mf">0.619500</span>
<span class="n">bbb</span>  <span class="mf">0.927272</span>  <span class="mf">0.302904</span> <span class="o">-</span><span class="mf">0.032399</span>
<span class="n">ccc</span> <span class="o">-</span><span class="mf">0.264273</span> <span class="o">-</span><span class="mf">0.386314</span> <span class="o">-</span><span class="mf">0.217601</span>
<span class="n">ddd</span> <span class="o">-</span><span class="mf">0.871858</span> <span class="o">-</span><span class="mf">0.348382</span>  <span class="mf">1.100491</span></code></pre></td></tr></table>
</div>
</div>
<p>过滤掉指定的行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="err">!</span><span class="n">cat</span> <span class="n">examples</span><span class="o">/</span><span class="n">ex4</span><span class="o">.</span><span class="n">csv</span>
<span class="c1"># hey!</span>
<span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">message</span>
<span class="c1"># just wanted to make things more difficult for you</span>
<span class="c1"># who reads CSV files with computers, anyway?</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="n">hello</span>
<span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="n">world</span>
<span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="n">foo</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;examples/ex4.csv&#39;</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
   <span class="n">a</span>   <span class="n">b</span>   <span class="n">c</span>   <span class="n">d</span> <span class="n">message</span>
<span class="mi">0</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>   <span class="mi">4</span>   <span class="n">hello</span>
<span class="mi">1</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="mi">7</span>   <span class="mi">8</span>   <span class="n">world</span>
<span class="mi">2</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mi">11</span>  <span class="mi">12</span>     <span class="n">foo</span></code></pre></td></tr></table>
</div>
</div>
<p>默认情况下，pandas认为<code>NULL</code>和<code>NA</code>为缺失的值</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="err">!</span><span class="n">cat</span> <span class="n">examples</span><span class="o">/</span><span class="n">ex5</span><span class="o">.</span><span class="n">csv</span>
<span class="n">something</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">message</span>
<span class="n">one</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="n">NA</span>
<span class="n">two</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,,</span><span class="mi">8</span><span class="p">,</span><span class="n">world</span>
<span class="n">three</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="n">foo</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;examples/ex5.csv&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span>
  <span class="n">something</span>  <span class="n">a</span>   <span class="n">b</span>     <span class="n">c</span>   <span class="n">d</span> <span class="n">message</span>
<span class="mi">0</span>       <span class="n">one</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mf">3.0</span>   <span class="mi">4</span>     <span class="n">NaN</span>
<span class="mi">1</span>       <span class="n">two</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="n">NaN</span>   <span class="mi">8</span>   <span class="n">world</span>
<span class="mi">2</span>     <span class="n">three</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mf">11.0</span>  <span class="mi">12</span>     <span class="n">foo</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
   <span class="n">something</span>      <span class="n">a</span>      <span class="n">b</span>      <span class="n">c</span>      <span class="n">d</span>  <span class="n">message</span>
<span class="mi">0</span>      <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>     <span class="bp">True</span>
<span class="mi">1</span>      <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>   <span class="bp">True</span>  <span class="bp">False</span>    <span class="bp">False</span>
<span class="mi">2</span>      <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>    <span class="bp">False</span></code></pre></td></tr></table>
</div>
</div>
<p>也可以通过<code>na_values</code>来指定缺失的值</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># 认为NULL为NaN</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;examples/ex5.csv&#39;</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NULL&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span>
  <span class="n">something</span>  <span class="n">a</span>   <span class="n">b</span>     <span class="n">c</span>   <span class="n">d</span> <span class="n">message</span>
<span class="mi">0</span>       <span class="n">one</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mf">3.0</span>   <span class="mi">4</span>     <span class="n">NaN</span>
<span class="mi">1</span>       <span class="n">two</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="n">NaN</span>   <span class="mi">8</span>   <span class="n">world</span>
<span class="mi">2</span>     <span class="n">three</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mf">11.0</span>  <span class="mi">12</span>     <span class="n">foo</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">sentinels</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">],</span> <span class="s1">&#39;something&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;two&#39;</span><span class="p">]}</span>

<span class="c1"># 通过字典，可以为每一列设置NaN值</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;examples/ex5.csv&#39;</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="n">sentinels</span><span class="p">)</span>
  <span class="n">something</span>  <span class="n">a</span>   <span class="n">b</span>     <span class="n">c</span>   <span class="n">d</span> <span class="n">message</span>
<span class="mi">0</span>       <span class="n">one</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mf">3.0</span>   <span class="mi">4</span>     <span class="n">NaN</span>
<span class="mi">1</span>       <span class="n">NaN</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="n">NaN</span>   <span class="mi">8</span>   <span class="n">world</span>
<span class="mi">2</span>     <span class="n">three</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mf">11.0</span>  <span class="mi">12</span>     <span class="n">NaN</span></code></pre></td></tr></table>
</div>
</div>
<p>读取文件的一部分</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># 设置只显示10行</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_rows</span> <span class="o">=</span> <span class="mi">10</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;examples/ex6.csv&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span>
           <span class="n">one</span>       <span class="n">two</span>     <span class="n">three</span>      <span class="n">four</span> <span class="n">key</span>
<span class="mi">0</span>     <span class="mf">0.467976</span> <span class="o">-</span><span class="mf">0.038649</span> <span class="o">-</span><span class="mf">0.295344</span> <span class="o">-</span><span class="mf">1.824726</span>   <span class="n">L</span>
<span class="mi">1</span>    <span class="o">-</span><span class="mf">0.358893</span>  <span class="mf">1.404453</span>  <span class="mf">0.704965</span> <span class="o">-</span><span class="mf">0.200638</span>   <span class="n">B</span>
<span class="mi">2</span>    <span class="o">-</span><span class="mf">0.501840</span>  <span class="mf">0.659254</span> <span class="o">-</span><span class="mf">0.421691</span> <span class="o">-</span><span class="mf">0.057688</span>   <span class="n">G</span>
<span class="mi">3</span>     <span class="mf">0.204886</span>  <span class="mf">1.074134</span>  <span class="mf">1.388361</span> <span class="o">-</span><span class="mf">0.982404</span>   <span class="n">R</span>
<span class="mi">4</span>     <span class="mf">0.354628</span> <span class="o">-</span><span class="mf">0.133116</span>  <span class="mf">0.283763</span> <span class="o">-</span><span class="mf">0.837063</span>   <span class="n">Q</span>
<span class="o">...</span>        <span class="o">...</span>       <span class="o">...</span>       <span class="o">...</span>       <span class="o">...</span>  <span class="o">..</span>
<span class="mi">9995</span>  <span class="mf">2.311896</span> <span class="o">-</span><span class="mf">0.417070</span> <span class="o">-</span><span class="mf">1.409599</span> <span class="o">-</span><span class="mf">0.515821</span>   <span class="n">L</span>
<span class="mi">9996</span> <span class="o">-</span><span class="mf">0.479893</span> <span class="o">-</span><span class="mf">0.650419</span>  <span class="mf">0.745152</span> <span class="o">-</span><span class="mf">0.646038</span>   <span class="n">E</span>
<span class="mi">9997</span>  <span class="mf">0.523331</span>  <span class="mf">0.787112</span>  <span class="mf">0.486066</span>  <span class="mf">1.093156</span>   <span class="n">K</span>
<span class="mi">9998</span> <span class="o">-</span><span class="mf">0.362559</span>  <span class="mf">0.598894</span> <span class="o">-</span><span class="mf">1.843201</span>  <span class="mf">0.887292</span>   <span class="n">G</span>
<span class="mi">9999</span> <span class="o">-</span><span class="mf">0.096376</span> <span class="o">-</span><span class="mf">1.012999</span> <span class="o">-</span><span class="mf">0.657431</span> <span class="o">-</span><span class="mf">0.573315</span>   <span class="mi">0</span>

<span class="p">[</span><span class="mi">10000</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">5</span> <span class="n">columns</span><span class="p">]</span></code></pre></td></tr></table>
</div>
</div>
<p>分块读取文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">chunker</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;examples/ex6.csv&#39;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">chunker</span>
<span class="o">&lt;</span><span class="n">pandas</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">parsers</span><span class="o">.</span><span class="n">TextFileReader</span> <span class="n">at</span> <span class="mh">0x1136a62b0</span><span class="o">&gt;</span>

<span class="c1"># 通过遍历chunker，可以读取整个文件，1次读取chunksize行</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">piece</span><span class="p">)</span> <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="n">chunker</span><span class="p">]</span>
<span class="p">[</span><span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
 <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
 <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
 <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
 <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
 <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
 <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
 <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
 <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
 <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="保存数据">保存数据</h3>

<p>保存到CSV文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;examples/ex5.csv&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span>
  <span class="n">something</span>  <span class="n">a</span>   <span class="n">b</span>     <span class="n">c</span>   <span class="n">d</span> <span class="n">message</span>
<span class="mi">0</span>       <span class="n">one</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="mf">3.0</span>   <span class="mi">4</span>     <span class="n">NaN</span>
<span class="mi">1</span>       <span class="n">two</span>  <span class="mi">5</span>   <span class="mi">6</span>   <span class="n">NaN</span>   <span class="mi">8</span>   <span class="n">world</span>
<span class="mi">2</span>     <span class="n">three</span>  <span class="mi">9</span>  <span class="mi">10</span>  <span class="mf">11.0</span>  <span class="mi">12</span>     <span class="n">foo</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;examples/out.csv&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="err">!</span><span class="n">cat</span> <span class="n">examples</span><span class="o">/</span><span class="n">out</span><span class="o">.</span><span class="n">csv</span>
<span class="p">,</span><span class="n">something</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">message</span>
<span class="mi">0</span><span class="p">,</span><span class="n">one</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span>
<span class="mi">1</span><span class="p">,</span><span class="n">two</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,,</span><span class="mi">8</span><span class="p">,</span><span class="n">world</span>
<span class="mi">2</span><span class="p">,</span><span class="n">three</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">11.0</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="n">foo</span></code></pre></td></tr></table>
</div>
</div>
<p>指定输出到标准输出和列分隔符</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">sys</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;|&#39;</span><span class="p">)</span>
<span class="o">|</span><span class="n">something</span><span class="o">|</span><span class="n">a</span><span class="o">|</span><span class="n">b</span><span class="o">|</span><span class="n">c</span><span class="o">|</span><span class="n">d</span><span class="o">|</span><span class="n">message</span>
<span class="mi">0</span><span class="o">|</span><span class="n">one</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">2</span><span class="o">|</span><span class="mf">3.0</span><span class="o">|</span><span class="mi">4</span><span class="o">|</span>
<span class="mi">1</span><span class="o">|</span><span class="n">two</span><span class="o">|</span><span class="mi">5</span><span class="o">|</span><span class="mi">6</span><span class="o">||</span><span class="mi">8</span><span class="o">|</span><span class="n">world</span>
<span class="mi">2</span><span class="o">|</span><span class="n">three</span><span class="o">|</span><span class="mi">9</span><span class="o">|</span><span class="mi">10</span><span class="o">|</span><span class="mf">11.0</span><span class="o">|</span><span class="mi">12</span><span class="o">|</span><span class="n">foo</span></code></pre></td></tr></table>
</div>
</div>
<p>默认情况下，确实的数据是以空字符串输出的，我们也可以指定缺失的数据的输出内容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s1">&#39;NULL&#39;</span><span class="p">)</span>
<span class="p">,</span><span class="n">something</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">message</span>
<span class="mi">0</span><span class="p">,</span><span class="n">one</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="n">NULL</span>
<span class="mi">1</span><span class="p">,</span><span class="n">two</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="n">NULL</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="n">world</span>
<span class="mi">2</span><span class="p">,</span><span class="n">three</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">11.0</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="n">foo</span></code></pre></td></tr></table>
</div>
</div>
<p>默认情况下，列索引和行索引都会写出到文件，也可以禁用这个行为</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># columns的索引用的是header参数</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s1">&#39;NULL&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">one</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="n">NULL</span>
<span class="n">two</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="n">NULL</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="n">world</span>
<span class="n">three</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">11.0</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="n">foo</span></code></pre></td></tr></table>
</div>
</div>
<p>保存部分数据</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># 只保存a,b,c列</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">3.0</span>
<span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span>
<span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">11.0</span></code></pre></td></tr></table>
</div>
</div>
    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">crazygit</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">2017-12-26</span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>

    
    
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="http://images.wiseturtles.com/wechatpay.jpg">
        <span>微信打赏</span>
      </label>
    
  </div>
</div>

    <footer class="post-footer">
      <div class="post-tags">
          <a href="https://crazygit.wiseturtles.com/tags/numpy/">numpy</a>
          <a href="https://crazygit.wiseturtles.com/tags/pandas/">pandas</a>
          <a href="https://crazygit.wiseturtles.com/tags/matplotlib/">matplotlib</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/2017/12/28/python-for-data-analysis-2nd-edition-note-two/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">《利用Python进行数据分析第二版》读书笔记二</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/2017/12/25/matplotlib-quickstart/">
            <span class="next-text nav-default">matplotlib教程</span>
            <span class="prev-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "crazygit/hugo-blog-comments"
            issue-term="pathname"
            crossorigin="anonymous"
            async>
      </script>
    </div>
  

  

  

  <div class="disqus-comment">
  <div class="disqus-button" id="load_disqus" onclick="load_disqus()">
    显示 Disqus 评论
  </div>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    function load_disqus() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'lianglin999';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

      $('#load_disqus').remove();
    };
  </script>
  <noscript>Please enable JavaScript to view the
    <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>
  
  </div>

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:crazygit@foxmail.com" rel="me noopener" class="iconfont icon-email"
        title="email" target="_blank">
      </a>
      <a href="https://twitter.com/lianglin999" rel="me noopener" class="iconfont icon-twitter"
        title="twitter" target="_blank">
      </a>
      <a href="https://github.com/crazygit" rel="me noopener" class="iconfont icon-github"
        title="github" target="_blank">
      </a>
      <a href="https://www.weibo.com/crazygit/profile" rel="me noopener" class="iconfont icon-weibo"
        title="weibo" target="_blank">
      </a>
  <a href="https://crazygit.wiseturtles.com/index.xml" rel="noopener alternate" type="application/rss&#43;xml" class="iconfont icon-rss"
    title="rss" target="_blank">
  </a>
  </div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2017 -
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span><span class="author">
        crazygit
        
      </span></span>

  
  
    <span id="busuanzi_container">
      访客数/访问量：<span id="busuanzi_value_site_uv"></span>/<span id="busuanzi_value_site_pv"></span>
    </span>
  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
<script type="text/javascript" src="/dist/jane.min.js?v=2.7.0"></script><script id="baidu_analytics">
  var _hmt = _hmt || [];
  (function() {
    if (window.location.hostname === 'localhost') return;
    var hm = document.createElement("script"); hm.async = true;
    hm.src = "https://hm.baidu.com/hm.js?2b47f91b8532d1a5e950c8e77142d95c";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>

<script id="baidu_push">
  (function(){
    if (window.location.hostname === 'localhost') return;
    var bp = document.createElement('script'); bp.async = true;
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
      bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
  })();
</script>



  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  




  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script type="text/javascript">
    AV.initialize("bWUs89CHYswTxwt88Jf71tIF-gzGzoHsz", "IcudhQhVD2eqKqkOTQQ6agUS");
  </script>

  <script>
    function showHitCount(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push($(this).attr("id").trim());
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var hits = item.get('hits');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(hits);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function (results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("hits");
            counter.save(null, {
              success: function (counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('hits'));
              },
              error: function (counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
             
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
             
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("hits", 1);
            newcounter.save(null, {
              success: function (newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('hits'));
              },
              error: function (newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function (error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function () {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        
        addCount(Counter);
      } else if ($('.post-link').length > 1) {
        
        showHitCount(Counter);
      }
    });
  </script>




  <script src="/js/douban.js"></script>


</body>
</html>
