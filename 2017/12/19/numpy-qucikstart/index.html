<!doctype html><html lang=zh-cn itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>NumPy快速入门指南 - Soul Mate</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes"><meta name=MobileOptimized content="width"><meta name=HandheldFriendly content="true"><meta name=applicable-device content="pc,mobile"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=mobile-web-app-capable content="yes"><meta name=author content="crazygit"><meta name=description content="Numpy库是python数据分析的基础库, 大部分数据分析的操作都离不开这个库。本文主要根据Numpy官网的快速入门指南整理而来, 介绍了常用的Numpy操作。
"><meta name=keywords content="Hugo,crazygit,blog"><meta name=baidu-site-verification content="mEI3NT6pyx"><meta name=google-site-verification content="AbF6G10N67H-FaerplTnvfAXJrTtXBGHdr4xsSot7z8"><meta name=generator content="Hugo 0.83.1"><link rel=canonical href=https://crazygit.wiseturtles.com/2017/12/19/numpy-qucikstart/><link rel=icon href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=stylesheet href=/sass/jane.min.b3a8813c06e6d785beba22bf8264e174fa2cb3a396b22f9ba24e2c00c18aaf7f.css integrity="sha256-s6iBPAbm14W+uiK/gmThdPoss6OWsi+bok4sAMGKr38=" media=screen crossorigin=anonymous><link rel=stylesheet href=/css/douban.css><link rel=stylesheet href=/css/monokai-syntax.css><meta property="og:title" content="NumPy快速入门指南"><meta property="og:description" content="Numpy库是python数据分析的基础库, 大部分数据分析的操作都离不开这个库。本文主要根据Numpy官网的快速入门指南整理而来, 介绍了常用的Numpy操作。
"><meta property="og:type" content="article"><meta property="og:url" content="https://crazygit.wiseturtles.com/2017/12/19/numpy-qucikstart/"><meta property="article:section" content="post"><meta property="article:published_time" content="2017-12-19T22:08:10+08:00"><meta property="article:modified_time" content="2017-12-19T22:08:10+08:00"><meta itemprop=name content="NumPy快速入门指南"><meta itemprop=description content="Numpy库是python数据分析的基础库, 大部分数据分析的操作都离不开这个库。本文主要根据Numpy官网的快速入门指南整理而来, 介绍了常用的Numpy操作。
"><meta itemprop=datePublished content="2017-12-19T22:08:10+08:00"><meta itemprop=dateModified content="2017-12-19T22:08:10+08:00"><meta itemprop=wordCount content="7013"><meta itemprop=keywords content="numpy,"><meta name=twitter:card content="summary"><meta name=twitter:title content="NumPy快速入门指南"><meta name=twitter:description content="Numpy库是python数据分析的基础库, 大部分数据分析的操作都离不开这个库。本文主要根据Numpy官网的快速入门指南整理而来, 介绍了常用的Numpy操作。
"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-112251188-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>Soul Mate</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><li class=mobile-menu-item><a class=menu-item-link href=https://crazygit.wiseturtles.com/>主页</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://crazygit.wiseturtles.com/categories/>分类</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://crazygit.wiseturtles.com/post/>归档</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://crazygit.wiseturtles.com/tags/>标签</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://crazygit.wiseturtles.com/books/>读书</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://crazygit.wiseturtles.com/about/>关于</a></li></ul></nav><link rel=stylesheet href=/lib/photoswipe/photoswipe.min.css><link rel=stylesheet href=/lib/photoswipe/default-skin/default-skin.min.css><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header id=header class="header container"><div class=logo-wrapper><a href=/ class=logo>Soul Mate</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=https://crazygit.wiseturtles.com/>主页</a></li><li class=menu-item><a class=menu-item-link href=https://crazygit.wiseturtles.com/categories/>分类</a></li><li class=menu-item><a class=menu-item-link href=https://crazygit.wiseturtles.com/post/>归档</a></li><li class=menu-item><a class=menu-item-link href=https://crazygit.wiseturtles.com/tags/>标签</a></li><li class=menu-item><a class=menu-item-link href=https://crazygit.wiseturtles.com/books/>读书</a></li><li class=menu-item><a class=menu-item-link href=https://crazygit.wiseturtles.com/about/>关于</a></li></ul></nav></header><div id=mobile-panel><main id=main class="main bg-llight"><div class=content-wrapper><div id=content class="content container"><article class="post bg-white"><header class=post-header><h1 class=post-title>NumPy快速入门指南</h1><div class=post-meta><time datetime=2017-12-19 class=post-time>2017-12-19</time><div class=post-category><a href=https://crazygit.wiseturtles.com/categories/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/>python数据分析</a></div><span class=more-meta>约 7013 字</span>
<span class=more-meta>预计阅读 14 分钟</span>
<span id=/2017/12/19/numpy-qucikstart/ class=leancloud_visitors data-flag-title=NumPy快速入门指南><span class=post-meta-item-text>| 阅读</span>
<span class=leancloud-visitors-count></span></span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>文章目录</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#准备>准备</a></li><li><a href=#基础>基础</a><ul><li><a href=#数组例子>数组例子</a></li><li><a href=#创建数组>创建数组</a></li><li><a href=#打印数组>打印数组</a></li><li><a href=#基本操作>基本操作</a></li><li><a href=#通用函数>通用函数</a></li><li><a href=#索引切片和迭代>索引，切片和迭代</a></li></ul></li><li><a href=#shape操作>shape操作</a><ul><li><a href=#改变数组的shape>改变数组的shape</a></li><li><a href=#数组合并>数组合并</a></li><li><a href=#数组切割>数组切割</a></li></ul></li><li><a href=#复制和视图views>复制和视图(Views)</a><ul><li><a href=#一点也不复制>一点也不复制</a></li><li><a href=#视图view和浅复制shallow-copy>视图(View)和浅复制(Shallow Copy)</a></li><li><a href=#深度复制deep-copy>深度复制(Deep Copy)</a></li><li><a href=#函数和方法概览>函数和方法概览</a></li></ul></li><li><a href=#less-basic>Less Basic</a><ul><li><a href=#广播机制>广播机制</a></li><li><a href=#索引>索引</a></li><li><a href=#数组索引>数组索引</a></li><li><a href=#布尔数组索引>布尔数组索引</a></li><li><a href=#ix_函数httpsdocsscipyorgdocnumpy-devreferencegeneratednumpyix_htmlnumpyix_-作用待定><a href=https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.ix_.html#numpy.ix_>ix_()函数</a> （作用待定）</a></li><li><a href=#字符串索引>字符串索引</a></li></ul></li><li><a href=#更多httpsdocsscipyorgdocnumpy-devuserbasicshtml><a href=https://docs.scipy.org/doc/numpy-dev/user/basics.html>更多</a></a></li><li><a href=#扩展阅读>扩展阅读</a></li></ul></nav></div></div><div class=post-content><p>参考:
<a href=https://docs.scipy.org/doc/numpy-dev/user/quickstart.html>https://docs.scipy.org/doc/numpy-dev/user/quickstart.html</a></p><h2 id=准备>准备</h2><p>安装numpy</p><pre><code>$ pip install numpy
</code></pre><h2 id=基础>基础</h2><blockquote><p>In NumPy dimensions are called axes. The number of axes is rank.</p></blockquote><p>Numpy中，维度被称作<code>axes</code>, 维度数被称作<code>rank</code>。</p><p>Numpy的数组类是<code>ndarray</code>, 与标准python库的数组不太一样，它包含的元素必须是<strong>相同类型</strong>的。</p><p><code>ndarray</code>的常见属性如下:</p><ul><li><code>ndarray.ndim</code>数组的轴数(即<code>rank</code>)</li><li><code>ndarray.shape</code>数组的维度，返回的是一个元组，元组的长度值刚好是<code>ndim</code></li><li><code>ndarray.size</code>数组元素的个数</li><li><code>ndarray.dtype</code>数组元素的类型</li><li><code>ndarray.itemsize</code>数组元素的字节大小</li><li><code>ndarray.data</code>数组包含的实际数据(一般情况下不会用到这个属性，都是通过索引来访问元素)</li></ul><h3 id=数组例子>数组例子</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>numpy</span> <span class=kn>as</span> <span class=nn>np</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>15</span><span class=p>)</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=mi>5</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>2</span><span class=p>,</span>  <span class=mi>3</span><span class=p>,</span>  <span class=mi>4</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span>  <span class=mi>7</span><span class=p>,</span>  <span class=mi>8</span><span class=p>,</span>  <span class=mi>9</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>13</span><span class=p>,</span> <span class=mi>14</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=nb>type</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
<span class=n>numpy</span><span class=o>.</span><span class=n>ndarray</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>ndim</span>
<span class=mi>2</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>shape</span>
<span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>size</span>
<span class=mi>15</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>dtype</span>
<span class=n>dtype</span><span class=p>(</span><span class=s1>&#39;int64&#39;</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>itemsize</span>
<span class=mi>8</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>data</span>
<span class=o>&lt;</span><span class=n>memory</span> <span class=n>at</span> <span class=mh>0x11221b120</span><span class=o>&gt;</span>
</code></pre></td></tr></table></div></div><h3 id=创建数组>创建数组</h3><p>创建数组一般有如下几种方法:</p><p>通过<code>array</code>函数，可以从普通的python列表或元组来创建</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>dtype</span>
<span class=n>dtype</span><span class=p>(</span><span class=s1>&#39;int64&#39;</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mf>1.2</span><span class=p>,</span> <span class=mf>3.5</span><span class=p>,</span> <span class=mf>5.1</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=o>.</span><span class=n>dtype</span>
<span class=n>dtype</span><span class=p>(</span><span class=s1>&#39;float64&#39;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p>一个常见的错误就是在调用<code>array</code>函数时， 传递多个参数，而不是一个列表</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>)</span>    <span class=c1># 错误</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>])</span>  <span class=c1># 正确</span>
</code></pre></td></tr></table></div></div><p><code>array</code>同样可以接受列表序列并将它转换为多维数组</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>c</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([(</span><span class=mf>1.5</span><span class=p>,</span> <span class=mf>2.3</span><span class=p>),</span> <span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>)])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span>
<span class=n>array</span><span class=p>([(</span><span class=mf>1.5</span><span class=p>,</span> <span class=mf>2.3</span><span class=p>),</span> <span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>)],</span> <span class=n>dtype</span><span class=o>=</span><span class=nb>object</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p>同样可以在创建数组的时候，指定数据类型</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>d</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]],</span> <span class=n>dtype</span><span class=o>=</span><span class=nb>complex</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>d</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>1.</span><span class=o>+</span><span class=mf>0.j</span><span class=p>,</span>  <span class=mf>2.</span><span class=o>+</span><span class=mf>0.j</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>3.</span><span class=o>+</span><span class=mf>0.j</span><span class=p>,</span>  <span class=mf>4.</span><span class=o>+</span><span class=mf>0.j</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p>通常情况下， 数组元素的初始数据是不知道的，但是知道数组的大小。因此Numpy提供了一些函数来创建指定大小的数组，并用占位符来填充数组。</p><ul><li><code>zeros</code>函数创建初始值为0的数组</li><li><code>ones</code>创建初始值为1的数组</li><li><code>empty</code>创建未初始化的随机数组</li></ul><p>默认情况下，上面三个函数创建数组的元素类型都是<code>float64</code>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>zeros</span><span class=p>((</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>))</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>0.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>0.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>0.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>ones</span><span class=p>((</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>))</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>empty</span><span class=p>((</span><span class=mi>2</span><span class=p>,</span><span class=mi>5</span><span class=p>))</span>
<span class=n>array</span><span class=p>([[</span>  <span class=mf>2.68156159e+154</span><span class=p>,</span>   <span class=mf>2.68679227e+154</span><span class=p>,</span>   <span class=mf>2.37663529e-312</span><span class=p>,</span>
          <span class=mf>2.56761491e-312</span><span class=p>,</span>   <span class=mf>8.48798317e-313</span><span class=p>],</span>
       <span class=p>[</span>  <span class=mf>9.33678148e-313</span><span class=p>,</span>   <span class=mf>8.70018275e-313</span><span class=p>,</span>   <span class=mf>2.02566915e-322</span><span class=p>,</span>
          <span class=mf>0.00000000e+000</span><span class=p>,</span>   <span class=mf>6.95335581e-309</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p>为了创建序列函数，Numpy也提供了类似<code>range</code>函数的方法</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>30</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
<span class=n>array</span><span class=p>([</span><span class=mi>10</span><span class=p>,</span> <span class=mi>15</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mi>25</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mf>0.3</span><span class=p>)</span>
<span class=n>array</span><span class=p>([</span> <span class=mf>0.</span> <span class=p>,</span>  <span class=mf>0.3</span><span class=p>,</span>  <span class=mf>0.6</span><span class=p>,</span>  <span class=mf>0.9</span><span class=p>,</span>  <span class=mf>1.2</span><span class=p>,</span>  <span class=mf>1.5</span><span class=p>,</span>  <span class=mf>1.8</span><span class=p>])</span>
</code></pre></td></tr></table></div></div><p>当使用<code>arange</code>函数的生成<code>float</code>类型的序列时，生成的序列有时候并不会按照我们预期的步长来生成，要实现这个效果，最好是用<code>linspace</code>函数来代替。例如:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>numpy</span> <span class=kn>import</span> <span class=n>pi</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>linspace</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>9</span><span class=p>)</span>
<span class=n>array</span><span class=p>([</span> <span class=mf>0.</span>  <span class=p>,</span>  <span class=mf>0.25</span><span class=p>,</span>  <span class=mf>0.5</span> <span class=p>,</span>  <span class=mf>0.75</span><span class=p>,</span>  <span class=mf>1.</span>  <span class=p>,</span>  <span class=mf>1.25</span><span class=p>,</span>  <span class=mf>1.5</span> <span class=p>,</span>  <span class=mf>1.75</span><span class=p>,</span>  <span class=mf>2.</span>  <span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>linspace</span><span class=p>(</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=o>*</span><span class=n>pi</span><span class=p>,</span> <span class=mi>100</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>f</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>sin</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p>除此之外，还可以使用下面的函数来创建数组</p><ul><li><code>array</code></li><li><code>zeros</code></li><li><code>zeros_like</code> # 创建一个和给定数组相同shape的全是0的数组</li><li><code>ones</code></li><li><code>ones_like</code></li><li><code>empty</code></li><li><code>empty_like</code></li><li><code>arange</code></li><li><code>linspace</code></li><li><code>numpy.random.rand</code> # 从 [0, 1) 中返回一个或多个样本值。</li><li><code>numpy.random.randn</code> # 从标准正态分布中返回一个或多个样本值。</li><li><code>fromfunction</code></li><li><code>fromfile</code></li></ul><h3 id=打印数组>打印数组</h3><p>当使用<code>print</code>函数打印数组时，numpy会输出一个嵌套的列表形式</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=c1># 一维数组</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>6</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=k>print</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
<span class=p>[</span><span class=mi>0</span> <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=mi>4</span> <span class=mi>5</span><span class=p>]</span>
<span class=c1># 二维数组</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>12</span><span class=p>)</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=mi>3</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=k>print</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>
<span class=p>[[</span> <span class=mi>0</span>  <span class=mi>1</span>  <span class=mi>2</span><span class=p>]</span>
 <span class=p>[</span> <span class=mi>3</span>  <span class=mi>4</span>  <span class=mi>5</span><span class=p>]</span>
 <span class=p>[</span> <span class=mi>6</span>  <span class=mi>7</span>  <span class=mi>8</span><span class=p>]</span>
 <span class=p>[</span> <span class=mi>9</span> <span class=mi>10</span> <span class=mi>11</span><span class=p>]]</span>
<span class=c1># 三维数组</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>24</span><span class=p>)</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=k>print</span><span class=p>(</span><span class=n>c</span><span class=p>)</span>
<span class=p>[[[</span> <span class=mi>0</span>  <span class=mi>1</span>  <span class=mi>2</span>  <span class=mi>3</span><span class=p>]</span>
  <span class=p>[</span> <span class=mi>4</span>  <span class=mi>5</span>  <span class=mi>6</span>  <span class=mi>7</span><span class=p>]</span>
  <span class=p>[</span> <span class=mi>8</span>  <span class=mi>9</span> <span class=mi>10</span> <span class=mi>11</span><span class=p>]]</span>

 <span class=p>[[</span><span class=mi>12</span> <span class=mi>13</span> <span class=mi>14</span> <span class=mi>15</span><span class=p>]</span>
  <span class=p>[</span><span class=mi>16</span> <span class=mi>17</span> <span class=mi>18</span> <span class=mi>19</span><span class=p>]</span>
  <span class=p>[</span><span class=mi>20</span> <span class=mi>21</span> <span class=mi>22</span> <span class=mi>23</span><span class=p>]]]</span>
</code></pre></td></tr></table></div></div><p>当数组包含的元素太多时，会省略中间的元素，只打印角落的元素</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=k>print</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>10000</span><span class=p>))</span>
<span class=p>[</span>   <span class=mi>0</span>    <span class=mi>1</span>    <span class=mi>2</span> <span class=o>...</span><span class=p>,</span> <span class=mi>9997</span> <span class=mi>9998</span> <span class=mi>9999</span><span class=p>]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=k>print</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>10000</span><span class=p>)</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span><span class=mi>100</span><span class=p>))</span>
<span class=p>[[</span>   <span class=mi>0</span>    <span class=mi>1</span>    <span class=mi>2</span> <span class=o>...</span><span class=p>,</span>   <span class=mi>97</span>   <span class=mi>98</span>   <span class=mi>99</span><span class=p>]</span>
 <span class=p>[</span> <span class=mi>100</span>  <span class=mi>101</span>  <span class=mi>102</span> <span class=o>...</span><span class=p>,</span>  <span class=mi>197</span>  <span class=mi>198</span>  <span class=mi>199</span><span class=p>]</span>
 <span class=p>[</span> <span class=mi>200</span>  <span class=mi>201</span>  <span class=mi>202</span> <span class=o>...</span><span class=p>,</span>  <span class=mi>297</span>  <span class=mi>298</span>  <span class=mi>299</span><span class=p>]</span>
 <span class=o>...</span><span class=p>,</span>
 <span class=p>[</span><span class=mi>9700</span> <span class=mi>9701</span> <span class=mi>9702</span> <span class=o>...</span><span class=p>,</span> <span class=mi>9797</span> <span class=mi>9798</span> <span class=mi>9799</span><span class=p>]</span>
 <span class=p>[</span><span class=mi>9800</span> <span class=mi>9801</span> <span class=mi>9802</span> <span class=o>...</span><span class=p>,</span> <span class=mi>9897</span> <span class=mi>9898</span> <span class=mi>9899</span><span class=p>]</span>
 <span class=p>[</span><span class=mi>9900</span> <span class=mi>9901</span> <span class=mi>9902</span> <span class=o>...</span><span class=p>,</span> <span class=mi>9997</span> <span class=mi>9998</span> <span class=mi>9999</span><span class=p>]]</span>
</code></pre></td></tr></table></div></div><p>如果想禁用这个行为，强制打印所有的元素，可以开启<code>set_printoptions</code>选项</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>set_printoptions</span><span class=p>(</span><span class=n>threshold</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>nan</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=k>print</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>100</span><span class=p>))</span>
<span class=p>[</span> <span class=mi>0</span>  <span class=mi>1</span>  <span class=mi>2</span>  <span class=mi>3</span>  <span class=mi>4</span>  <span class=mi>5</span>  <span class=mi>6</span>  <span class=mi>7</span>  <span class=mi>8</span>  <span class=mi>9</span> <span class=mi>10</span> <span class=mi>11</span> <span class=mi>12</span> <span class=mi>13</span> <span class=mi>14</span> <span class=mi>15</span> <span class=mi>16</span> <span class=mi>17</span> <span class=mi>18</span> <span class=mi>19</span> <span class=mi>20</span> <span class=mi>21</span> <span class=mi>22</span> <span class=mi>23</span> <span class=mi>24</span>
 <span class=mi>25</span> <span class=mi>26</span> <span class=mi>27</span> <span class=mi>28</span> <span class=mi>29</span> <span class=mi>30</span> <span class=mi>31</span> <span class=mi>32</span> <span class=mi>33</span> <span class=mi>34</span> <span class=mi>35</span> <span class=mi>36</span> <span class=mi>37</span> <span class=mi>38</span> <span class=mi>39</span> <span class=mi>40</span> <span class=mi>41</span> <span class=mi>42</span> <span class=mi>43</span> <span class=mi>44</span> <span class=mi>45</span> <span class=mi>46</span> <span class=mi>47</span> <span class=mi>48</span> <span class=mi>49</span>
 <span class=mi>50</span> <span class=mi>51</span> <span class=mi>52</span> <span class=mi>53</span> <span class=mi>54</span> <span class=mi>55</span> <span class=mi>56</span> <span class=mi>57</span> <span class=mi>58</span> <span class=mi>59</span> <span class=mi>60</span> <span class=mi>61</span> <span class=mi>62</span> <span class=mi>63</span> <span class=mi>64</span> <span class=mi>65</span> <span class=mi>66</span> <span class=mi>67</span> <span class=mi>68</span> <span class=mi>69</span> <span class=mi>70</span> <span class=mi>71</span> <span class=mi>72</span> <span class=mi>73</span> <span class=mi>74</span>
 <span class=mi>75</span> <span class=mi>76</span> <span class=mi>77</span> <span class=mi>78</span> <span class=mi>79</span> <span class=mi>80</span> <span class=mi>81</span> <span class=mi>82</span> <span class=mi>83</span> <span class=mi>84</span> <span class=mi>85</span> <span class=mi>86</span> <span class=mi>87</span> <span class=mi>88</span> <span class=mi>89</span> <span class=mi>90</span> <span class=mi>91</span> <span class=mi>92</span> <span class=mi>93</span> <span class=mi>94</span> <span class=mi>95</span> <span class=mi>96</span> <span class=mi>97</span> <span class=mi>98</span> <span class=mi>99</span><span class=p>]</span>
</code></pre></td></tr></table></div></div><p>还原成省略效果</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>set_printoptions</span><span class=p>(</span><span class=n>threshold</span><span class=o>=</span><span class=mi>1000</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p>设置打印浮点数的小数位数:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>set_printoptions</span><span class=p>(</span><span class=n>precision</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span> <span class=c1># 设置打印浮点数的小数位数，默认是8位</span>
</code></pre></td></tr></table></div></div><h3 id=基本操作>基本操作</h3><p>数组的算术运算会自动作用于每个元素，并返回一个新的数组</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>20</span><span class=p>,</span><span class=mi>30</span><span class=p>,</span><span class=mi>40</span><span class=p>,</span><span class=mi>50</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span> <span class=o>=</span> <span class=n>a</span> <span class=o>-</span> <span class=n>b</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span>
<span class=n>array</span><span class=p>([</span><span class=mi>20</span><span class=p>,</span> <span class=mi>29</span><span class=p>,</span> <span class=mi>38</span><span class=p>,</span> <span class=mi>47</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=o>**</span><span class=mi>2</span>
<span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>9</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=mi>10</span> <span class=o>*</span> <span class=n>np</span><span class=o>.</span><span class=n>sin</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
<span class=n>array</span><span class=p>([</span> <span class=mf>9.12945251</span><span class=p>,</span> <span class=o>-</span><span class=mf>9.88031624</span><span class=p>,</span>  <span class=mf>7.4511316</span> <span class=p>,</span> <span class=o>-</span><span class=mf>2.62374854</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>&lt;</span> <span class=mi>35</span>
<span class=n>array</span><span class=p>([</span> <span class=bp>True</span><span class=p>,</span>  <span class=bp>True</span><span class=p>,</span> <span class=bp>False</span><span class=p>,</span> <span class=bp>False</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=nb>bool</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><code>*</code>返回的是每个元素相乘的结果，要实现矩阵乘法，需要使用<code>dot</code>函数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
<span class=o>...</span>                <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>]])</span>
<span class=o>...</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
<span class=o>...</span>                <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>]])</span>
<span class=o>...</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>*</span> <span class=n>b</span>       <span class=c1># 对应位置的元素相乘</span>
<span class=n>array</span><span class=p>([[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>4</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>dot</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>   <span class=c1># 矩阵乘法</span>
<span class=n>array</span><span class=p>([[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>dot</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span> <span class=c1># 另一种形式的矩阵乘法</span>
<span class=n>array</span><span class=p>([[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p>一些操作， 如<code>+=</code>和<code>*=</code>是直接修改原有的数组，而不是新建一个</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>ones</span><span class=p>((</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>),</span> <span class=n>dtype</span><span class=o>=</span><span class=nb>int</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>((</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>))</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>0.7216234</span> <span class=p>,</span>  <span class=mf>0.5813183</span> <span class=p>,</span>  <span class=mf>0.21175569</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>0.11697569</span><span class=p>,</span>  <span class=mf>0.89835328</span><span class=p>,</span>  <span class=mf>0.06088455</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>dtype</span>
<span class=n>dtype</span><span class=p>(</span><span class=s1>&#39;int64&#39;</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=o>.</span><span class=n>dtype</span>
<span class=n>dtype</span><span class=p>(</span><span class=s1>&#39;float64&#39;</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=o>+=</span><span class=n>a</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>1.7216234</span> <span class=p>,</span>  <span class=mf>1.5813183</span> <span class=p>,</span>  <span class=mf>1.21175569</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>1.11697569</span><span class=p>,</span>  <span class=mf>1.89835328</span><span class=p>,</span>  <span class=mf>1.06088455</span><span class=p>]])</span>

<span class=c1># 报错的原因是因为a数组原来是保存int64类型，现在没法保存float64类型</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>+=</span><span class=n>b</span>
<span class=o>---------------------------------------------------------------------------</span>
<span class=ne>TypeError</span>                                 <span class=n>Traceback</span> <span class=p>(</span><span class=n>most</span> <span class=n>recent</span> <span class=n>call</span> <span class=n>last</span><span class=p>)</span>
<span class=o>&lt;</span><span class=n>ipython</span><span class=o>-</span><span class=nb>input</span><span class=o>-</span><span class=mi>11</span><span class=o>-</span><span class=mi>0</span><span class=n>a45668e3cc6</span><span class=o>&gt;</span> <span class=ow>in</span> <span class=o>&lt;</span><span class=n>module</span><span class=o>&gt;</span><span class=p>()</span>
<span class=o>----&gt;</span> <span class=mi>1</span> <span class=n>a</span><span class=o>+=</span><span class=n>b</span>

<span class=ne>TypeError</span><span class=p>:</span> <span class=n>Cannot</span> <span class=n>cast</span> <span class=n>ufunc</span> <span class=n>add</span> <span class=n>output</span> <span class=kn>from</span> <span class=nn>dtype</span><span class=p>(</span><span class=s1>&#39;float64&#39;</span><span class=p>)</span> <span class=n>to</span> <span class=n>dtype</span><span class=p>(</span><span class=s1>&#39;int64&#39;</span><span class=p>)</span> <span class=k>with</span> <span class=n>casting</span> <span class=n>rule</span> <span class=s1>&#39;same_kind&#39;</span>
</code></pre></td></tr></table></div></div><p>当不同类型的数组运算操作时，总是向精度更高的自动转换</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>ones</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>int32</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>linspace</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>pi</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=o>.</span><span class=n>dtype</span><span class=o>.</span><span class=n>name</span>
<span class=s1>&#39;float64&#39;</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span> <span class=o>=</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span>
<span class=n>array</span><span class=p>([</span> <span class=mf>1.</span>        <span class=p>,</span>  <span class=mf>2.57079633</span><span class=p>,</span>  <span class=mf>4.14159265</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span><span class=o>.</span><span class=n>dtype</span><span class=o>.</span><span class=n>name</span>
<span class=s1>&#39;float64&#39;</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>d</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>exp</span><span class=p>(</span><span class=n>c</span><span class=o>*</span><span class=mi>1j</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>d</span>
<span class=n>array</span><span class=p>([</span> <span class=mf>0.54030231</span><span class=o>+</span><span class=mf>0.84147098j</span><span class=p>,</span> <span class=o>-</span><span class=mf>0.84147098</span><span class=o>+</span><span class=mf>0.54030231j</span><span class=p>,</span>
       <span class=o>-</span><span class=mf>0.54030231</span><span class=o>-</span><span class=mf>0.84147098j</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>d</span><span class=o>.</span><span class=n>dtype</span><span class=o>.</span><span class=n>name</span>
<span class=s1>&#39;complex128&#39;</span>
</code></pre></td></tr></table></div></div><p><code>ndarray</code>包含了很多一元运算。如求和等</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>15</span><span class=p>)</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>2</span><span class=p>,</span>  <span class=mi>3</span><span class=p>,</span>  <span class=mi>4</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span>  <span class=mi>7</span><span class=p>,</span>  <span class=mi>8</span><span class=p>,</span>  <span class=mi>9</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>13</span><span class=p>,</span> <span class=mi>14</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
<span class=mi>105</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>min</span><span class=p>()</span>
<span class=mi>0</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>max</span><span class=p>()</span>
<span class=mi>14</span>
</code></pre></td></tr></table></div></div><p>默认情况下，这些操作都是作用于每一个元素，而不管它的维度。但是，我们也可以通过<code>axis</code>参数来限定操作的轴</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>12</span><span class=p>)</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>2</span><span class=p>,</span>  <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>4</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span>  <span class=mi>7</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>8</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>]])</span>

<span class=c1># 计算每一列的和</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=o>.</span><span class=n>sum</span><span class=p>(</span><span class=n>axis</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=n>array</span><span class=p>([</span><span class=mi>12</span><span class=p>,</span> <span class=mi>15</span><span class=p>,</span> <span class=mi>18</span><span class=p>,</span> <span class=mi>21</span><span class=p>])</span>

<span class=c1># 计算每一行的最小值</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=o>.</span><span class=n>min</span><span class=p>(</span><span class=n>axis</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>8</span><span class=p>])</span>

<span class=c1># 每一行累积和</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=o>.</span><span class=n>cumsum</span><span class=p>(</span><span class=n>axis</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>3</span><span class=p>,</span>  <span class=mi>6</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>4</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>15</span><span class=p>,</span> <span class=mi>22</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>17</span><span class=p>,</span> <span class=mi>27</span><span class=p>,</span> <span class=mi>38</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><h3 id=通用函数>通用函数</h3><p>Numpy提供了很多常见的数学上的运算，如<code>sin</code>, <code>cos</code>, <code>exp</code>。在Numpy中，我们称这些为"universal functions"（<code>ufunc</code>）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>B</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>B</span>
<span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>exp</span><span class=p>(</span><span class=n>B</span><span class=p>)</span>
<span class=n>array</span><span class=p>([</span> <span class=mf>1.</span>        <span class=p>,</span>  <span class=mf>2.71828183</span><span class=p>,</span>  <span class=mf>7.3890561</span> <span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=mf>2.71828183</span> <span class=o>*</span> <span class=mf>2.71828183</span>
<span class=mf>7.389056107308149</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>B</span><span class=p>)</span>
<span class=n>array</span><span class=p>([</span> <span class=mf>0.</span>        <span class=p>,</span>  <span class=mf>1.</span>        <span class=p>,</span>  <span class=mf>1.41421356</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>C</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mf>2.</span><span class=p>,</span> <span class=o>-</span><span class=mf>1.</span><span class=p>,</span> <span class=mf>4.</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>B</span><span class=p>,</span> <span class=n>C</span><span class=p>)</span>
<span class=n>array</span><span class=p>([</span> <span class=mf>2.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>6.</span><span class=p>])</span>
</code></pre></td></tr></table></div></div><h3 id=索引切片和迭代>索引，切片和迭代</h3><p>一维数组的索引，切片，迭代跟普通的python列表一样</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span> <span class=o>**</span> <span class=mi>3</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([</span>  <span class=mi>0</span><span class=p>,</span>   <span class=mi>1</span><span class=p>,</span>   <span class=mi>8</span><span class=p>,</span>  <span class=mi>27</span><span class=p>,</span>  <span class=mi>64</span><span class=p>,</span> <span class=mi>125</span><span class=p>,</span> <span class=mi>216</span><span class=p>,</span> <span class=mi>343</span><span class=p>,</span> <span class=mi>512</span><span class=p>,</span> <span class=mi>729</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>
<span class=mi>8</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=mi>2</span><span class=p>:</span><span class=mi>5</span><span class=p>]</span>
<span class=n>array</span><span class=p>([</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>27</span><span class=p>,</span> <span class=mi>64</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[:</span><span class=mi>6</span><span class=p>:</span><span class=mi>2</span><span class=p>]</span>  <span class=c1># 等价于a[0:6:2]</span>
<span class=n>array</span><span class=p>([</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>8</span><span class=p>,</span> <span class=mi>64</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[:</span><span class=mi>6</span><span class=p>:</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1000</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([</span><span class=o>-</span><span class=mi>1000</span><span class=p>,</span>     <span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1000</span><span class=p>,</span>    <span class=mi>27</span><span class=p>,</span> <span class=o>-</span><span class=mi>1000</span><span class=p>,</span>   <span class=mi>125</span><span class=p>,</span>   <span class=mi>216</span><span class=p>,</span>   <span class=mi>343</span><span class=p>,</span>   <span class=mi>512</span><span class=p>,</span>   <span class=mi>729</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[::</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>  <span class=c1># 反转数组a</span>
<span class=n>array</span><span class=p>([</span>  <span class=mi>729</span><span class=p>,</span>   <span class=mi>512</span><span class=p>,</span>   <span class=mi>343</span><span class=p>,</span>   <span class=mi>216</span><span class=p>,</span>   <span class=mi>125</span><span class=p>,</span> <span class=o>-</span><span class=mi>1000</span><span class=p>,</span>    <span class=mi>27</span><span class=p>,</span> <span class=o>-</span><span class=mi>1000</span><span class=p>,</span>     <span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1000</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>a</span><span class=p>:</span>
<span class=o>...</span>     <span class=k>print</span><span class=p>(</span><span class=n>i</span><span class=o>**</span><span class=p>(</span><span class=mi>1</span><span class=o>/</span><span class=mf>3.</span><span class=p>))</span>
<span class=o>...</span>
<span class=n>nan</span>
<span class=mf>1.0</span>
<span class=n>nan</span>
<span class=mf>3.0</span>
<span class=n>nan</span>
<span class=mf>5.0</span>
<span class=mf>6.0</span>
<span class=mf>7.0</span>
<span class=mf>8.0</span>
<span class=mf>9.0</span>
</code></pre></td></tr></table></div></div><p>多维数组可以在每个轴上索引，多个索引用<code>,</code>分隔</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>):</span>
<span class=o>...</span>     <span class=k>return</span> <span class=mi>10</span><span class=o>*</span><span class=n>x</span> <span class=o>+</span><span class=n>y</span>
<span class=o>...</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>fromfunction</span><span class=p>(</span><span class=n>f</span><span class=p>,</span> <span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=mi>4</span><span class=p>),</span> <span class=n>dtype</span><span class=o>=</span><span class=nb>int</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>2</span><span class=p>,</span>  <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>13</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>20</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mi>22</span><span class=p>,</span> <span class=mi>23</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>30</span><span class=p>,</span> <span class=mi>31</span><span class=p>,</span> <span class=mi>32</span><span class=p>,</span> <span class=mi>33</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>40</span><span class=p>,</span> <span class=mi>41</span><span class=p>,</span> <span class=mi>42</span><span class=p>,</span> <span class=mi>43</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>help</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>fromfunction</span><span class=p>)</span>


<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=p>[</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>]</span>
<span class=mi>23</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>5</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span>
<span class=n>array</span><span class=p>([</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mi>31</span><span class=p>,</span> <span class=mi>41</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=p>[:,</span> <span class=mi>1</span><span class=p>]</span>
<span class=n>array</span><span class=p>([</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mi>31</span><span class=p>,</span> <span class=mi>41</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>,</span> <span class=p>:]</span>
<span class=n>array</span><span class=p>([[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>13</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>20</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mi>22</span><span class=p>,</span> <span class=mi>23</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p>当索引数少于轴数时，缺失的索引认为是全切片<code>:</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span> <span class=c1># 等价于 b[-1,:]</span>
<span class=n>array</span><span class=p>([</span><span class=mi>40</span><span class=p>,</span> <span class=mi>41</span><span class=p>,</span> <span class=mi>42</span><span class=p>,</span> <span class=mi>43</span><span class=p>])</span>
</code></pre></td></tr></table></div></div><p>同样可以使用<code>...</code>来表示全切片，它代表补全剩下的所有索引。例如数组<code>x</code>, rank是5.那么</p><ul><li><code>x[1,2,...]</code>等价于<code>x[1,2,:,:,:]</code></li><li><code>x[...,3]</code>等价于<code>x[:,:,:,:,3]</code></li><li><code>x[4,...,5,:]</code>等价于<code>x[4,:,:,5,:]</code></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>c</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>],</span>
<span class=o>...</span>                <span class=p>[</span><span class=mi>10</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>]],</span>
<span class=o>...</span>                <span class=p>[[</span><span class=mi>100</span><span class=p>,</span><span class=mi>101</span><span class=p>,</span><span class=mi>102</span><span class=p>],</span>
<span class=o>...</span>                <span class=p>[</span><span class=mi>110</span><span class=p>,</span><span class=mi>112</span><span class=p>,</span><span class=mi>113</span><span class=p>]]])</span>
<span class=o>...</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span><span class=o>.</span><span class=n>shape</span>
<span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span><span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=o>...</span><span class=p>]</span>
<span class=n>array</span><span class=p>([[</span><span class=mi>100</span><span class=p>,</span> <span class=mi>101</span><span class=p>,</span> <span class=mi>102</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>110</span><span class=p>,</span> <span class=mi>112</span><span class=p>,</span> <span class=mi>113</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span><span class=p>[</span><span class=o>...</span><span class=p>,</span><span class=mi>2</span><span class=p>]</span>
<span class=n>array</span><span class=p>([[</span>  <span class=mi>2</span><span class=p>,</span>  <span class=mi>13</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>102</span><span class=p>,</span> <span class=mi>113</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p>多维数组的迭代是根据第一个轴来操作的</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>b</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>2</span><span class=p>,</span>  <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>13</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>20</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mi>22</span><span class=p>,</span> <span class=mi>23</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>30</span><span class=p>,</span> <span class=mi>31</span><span class=p>,</span> <span class=mi>32</span><span class=p>,</span> <span class=mi>33</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>40</span><span class=p>,</span> <span class=mi>41</span><span class=p>,</span> <span class=mi>42</span><span class=p>,</span> <span class=mi>43</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=k>for</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>b</span><span class=p>:</span>
<span class=o>...</span>     <span class=k>print</span><span class=p>(</span><span class=n>row</span><span class=p>)</span>
<span class=o>...</span>
<span class=p>[</span><span class=mi>0</span> <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span><span class=p>]</span>
<span class=p>[</span><span class=mi>10</span> <span class=mi>11</span> <span class=mi>12</span> <span class=mi>13</span><span class=p>]</span>
<span class=p>[</span><span class=mi>20</span> <span class=mi>21</span> <span class=mi>22</span> <span class=mi>23</span><span class=p>]</span>
<span class=p>[</span><span class=mi>30</span> <span class=mi>31</span> <span class=mi>32</span> <span class=mi>33</span><span class=p>]</span>
<span class=p>[</span><span class=mi>40</span> <span class=mi>41</span> <span class=mi>42</span> <span class=mi>43</span><span class=p>]</span>
</code></pre></td></tr></table></div></div><p>如果想遍历每个元素，可以使用<code>flat</code>属性</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=k>for</span> <span class=n>element</span> <span class=ow>in</span> <span class=n>b</span><span class=o>.</span><span class=n>flat</span><span class=p>:</span>
<span class=o>...</span>     <span class=k>print</span><span class=p>(</span><span class=n>element</span><span class=p>)</span>
<span class=o>...</span>
<span class=mi>0</span>
<span class=mi>1</span>
<span class=mi>2</span>
<span class=mi>3</span>
<span class=mi>10</span>
<span class=mi>11</span>
<span class=mi>12</span>
<span class=mi>13</span>
<span class=mi>20</span>
<span class=mi>21</span>
<span class=mi>22</span>
<span class=mi>23</span>
<span class=mi>30</span>
<span class=mi>31</span>
<span class=mi>32</span>
<span class=mi>33</span>
<span class=mi>40</span>
<span class=mi>41</span>
<span class=mi>42</span>
<span class=mi>43</span>
</code></pre></td></tr></table></div></div><h2 id=shape操作>shape操作</h2><h3 id=改变数组的shape>改变数组的shape</h3><p>许多函数都可以改变数组的shape，但是它们都是返回一个新的修改后的数组，并不会改变原数组</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>floor</span><span class=p>(</span><span class=mi>10</span><span class=o>*</span><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>((</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>)))</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>shape</span>
<span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>7.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>8.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>4.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>7.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>]])</span>

<span class=c1># 返回降维的数组</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>ravel</span><span class=p>()</span>
<span class=n>array</span><span class=p>([</span> <span class=mf>7.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>7.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>])</span>

<span class=c1># 直接修改shape</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=mi>6</span><span class=p>,</span><span class=mi>2</span><span class=p>)</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>7.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>0.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>8.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>9.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>4.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>7.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>]])</span>

<span class=c1># 数组转置</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>T</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>7.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>8.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>0.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>,</span>  <span class=mf>7.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>9.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>T</span><span class=o>.</span><span class=n>shape</span>
<span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>shape</span>
<span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><code>reshape</code>返回修改后的数组，不改变数组本身，但是<code>resize</code>函数直接修改原数组</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>7.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>8.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>4.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>7.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>resize</span><span class=p>((</span><span class=mi>2</span><span class=p>,</span><span class=mi>6</span><span class=p>))</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>7.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>9.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>7.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p>如果一个维度为的是<code>-1</code>, 那么<code>reshape</code>函数会自动计算它的值。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>7.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>9.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>7.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>7.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>8.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>4.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>7.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><h3 id=数组合并>数组合并</h3><p>多个数组可以根据不同的轴组合在一起</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>floor</span><span class=p>(</span><span class=mi>10</span><span class=o>*</span><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>((</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>)))</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>4.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>floor</span><span class=p>(</span><span class=mi>10</span><span class=o>*</span><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>((</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>)))</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>2.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>0.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>vstack</span><span class=p>((</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>))</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>4.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>2.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>0.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>hstack</span><span class=p>((</span><span class=n>a</span><span class=p>,</span><span class=n>b</span><span class=p>))</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>,</span>  <span class=mf>2.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>4.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p><code>column_stack</code>函数把1维数组当做列来拼成2维数组，如果只是操作2维数组，跟<code>hstack</code>的等效。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>4.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>2.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>0.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>]])</span>

<span class=c1># 操作2维数组，等效于hstack</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>column_stack</span><span class=p>((</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>))</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>1.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>,</span>  <span class=mf>2.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>4.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mf>4.</span><span class=p>,</span> <span class=mf>2.</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mf>3.</span><span class=p>,</span> <span class=mf>8.</span><span class=p>])</span>

<span class=c1># 操作1维数组，返回2维数组，a,b分别为2维数组的列</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>column_stack</span><span class=p>((</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>))</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>4.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>2.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>numpy</span> <span class=kn>import</span> <span class=n>newaxis</span>
<span class=c1># 将1维数组变成2维数组</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[:,</span><span class=n>newaxis</span><span class=p>]</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>4.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>2.</span><span class=p>]])</span>

<span class=c1># 都是操作二维数组，下面两个操作column_stack和hstack等效</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>column_stack</span><span class=p>((</span><span class=n>a</span><span class=p>[:,</span> <span class=n>newaxis</span><span class=p>],</span> <span class=n>b</span><span class=p>[:,</span> <span class=n>newaxis</span><span class=p>]))</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>4.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>2.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>hstack</span><span class=p>((</span><span class=n>a</span><span class=p>[:,</span> <span class=n>newaxis</span><span class=p>],</span> <span class=n>b</span><span class=p>[:,</span> <span class=n>newaxis</span><span class=p>]))</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>4.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>2.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p>另外不论什么数组，<code>row_stack</code>函数等效于<code>vstack</code>。通常来说，2维以上的数组，<code>hstack</code>基于第2根轴做运算，<code>vstack</code>基于第1根轴，<code>concatenate</code>函数额外多接受一个参数，可以指定基于哪根轴做数组的合并操作。</p><p>另外, <code>r_</code>和<code>c_</code>函数对于在一个轴上组合数据相当哟偶用，他们允许使用范围符号<code>:</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>r_</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>4</span><span class=p>]</span>
<span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span>
</code></pre></td></tr></table></div></div><h3 id=数组切割>数组切割</h3><p>使用<code>hsplit</code>函数，你可以在水平方向切割一个数组</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mf>9.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>2.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>,</span>  <span class=mf>6.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>],</span>
       <span class=p>[</span> <span class=mf>5.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>5.</span><span class=p>,</span>  <span class=mf>5.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>5.</span><span class=p>,</span>  <span class=mf>6.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>7.</span><span class=p>]])</span>

<span class=c1># 切割成3个数组</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>hsplit</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
<span class=p>[</span><span class=n>array</span><span class=p>([[</span> <span class=mf>9.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>2.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>],</span>
        <span class=p>[</span> <span class=mf>5.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>5.</span><span class=p>]]),</span> <span class=n>array</span><span class=p>([[</span> <span class=mf>0.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>,</span>  <span class=mf>6.</span><span class=p>],</span>
        <span class=p>[</span> <span class=mf>5.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>5.</span><span class=p>]]),</span> <span class=n>array</span><span class=p>([[</span> <span class=mf>4.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>],</span>
        <span class=p>[</span> <span class=mf>6.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>7.</span><span class=p>]])]</span>

 <span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>vsplit</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
<span class=p>[</span><span class=n>array</span><span class=p>([[</span> <span class=mf>9.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>2.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>,</span>  <span class=mf>6.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>]]),</span>
 <span class=n>array</span><span class=p>([[</span> <span class=mf>5.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>5.</span><span class=p>,</span>  <span class=mf>5.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>5.</span><span class=p>,</span>  <span class=mf>6.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>7.</span><span class=p>]])]</span>

<span class=c1># 基于第3和第4列切割</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>hsplit</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>))</span>
<span class=p>[</span><span class=n>array</span><span class=p>([[</span> <span class=mf>9.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>2.</span><span class=p>],</span>
        <span class=p>[</span> <span class=mf>5.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>]]),</span> <span class=n>array</span><span class=p>([[</span> <span class=mf>0.</span><span class=p>],</span>
        <span class=p>[</span> <span class=mf>5.</span><span class=p>]]),</span> <span class=n>array</span><span class=p>([[</span> <span class=mf>0.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>1.</span><span class=p>,</span>  <span class=mf>6.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>9.</span><span class=p>],</span>
        <span class=p>[</span> <span class=mf>5.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>0.</span><span class=p>,</span>  <span class=mf>5.</span><span class=p>,</span>  <span class=mf>6.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span>  <span class=mf>8.</span><span class=p>,</span>  <span class=mf>7.</span><span class=p>]])]</span>
</code></pre></td></tr></table></div></div><p><code>vsplit</code>可以基于垂直轴切割，<code>array_split</code>可以指定基于哪个轴切割</p><h2 id=复制和视图views>复制和视图(Views)</h2><p>当进行数组运算和改变数组时，有时候数据是被复制到一个新的数组，有时候不是。对于初学者来说，对于具体是哪种操作，很容易混淆。 主要分三种情况。</p><h3 id=一点也不复制>一点也不复制</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>12</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>a</span>   <span class=c1># 不会有新对象产生</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=ow>is</span> <span class=n>a</span>  <span class=c1># a和b是同一个数组</span>
<span class=bp>True</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=o>.</span><span class=n>shape</span>
<span class=p>(</span><span class=mi>12</span><span class=p>,)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=o>.</span><span class=n>shape</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span>  <span class=c1># 改变b的shape, a也同样变化</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>shape</span>
<span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>2</span><span class=p>,</span>  <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>4</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span>  <span class=mi>7</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>8</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p>python中使用可变参数时，可以看做是引用传参，因此函数调用不会复制</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
<span class=o>...</span>     <span class=k>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>x</span><span class=p>))</span>
<span class=o>...</span>

<span class=o>&gt;&gt;&gt;</span> <span class=nb>id</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
<span class=mi>4361164320</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>f</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
<span class=mi>4361164320</span>
</code></pre></td></tr></table></div></div><h3 id=视图view和浅复制shallow-copy>视图(View)和浅复制(Shallow Copy)</h3><p>不同的数组可以共享数据，<code>view</code>函数可以创造一个数据相同的新数组</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>2</span><span class=p>,</span>  <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>4</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span>  <span class=mi>7</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>8</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=n>view</span><span class=p>()</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span> <span class=ow>is</span> <span class=n>a</span>   <span class=c1># c和a不是同一个数组</span>
<span class=bp>False</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span><span class=o>.</span><span class=n>base</span> <span class=ow>is</span> <span class=n>a</span>  <span class=c1># c是a的数据的视图</span>
<span class=bp>True</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span><span class=o>.</span><span class=n>flags</span><span class=o>.</span><span class=n>owndata</span>
<span class=bp>False</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span><span class=o>.</span><span class=n>shape</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>6</span>  <span class=c1># a的不会改变</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>shape</span>
<span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span><span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>4</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1234</span>  <span class=c1># a的数据发生改变</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span>   <span class=mi>0</span><span class=p>,</span>    <span class=mi>1</span><span class=p>,</span>    <span class=mi>2</span><span class=p>,</span>    <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>1234</span><span class=p>,</span>    <span class=mi>5</span><span class=p>,</span>    <span class=mi>6</span><span class=p>,</span>    <span class=mi>7</span><span class=p>],</span>
       <span class=p>[</span>   <span class=mi>8</span><span class=p>,</span>    <span class=mi>9</span><span class=p>,</span>   <span class=mi>10</span><span class=p>,</span>   <span class=mi>11</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>c</span>
<span class=n>array</span><span class=p>([[</span>   <span class=mi>0</span><span class=p>,</span>    <span class=mi>1</span><span class=p>,</span>    <span class=mi>2</span><span class=p>,</span>    <span class=mi>3</span><span class=p>,</span> <span class=mi>1234</span><span class=p>,</span>    <span class=mi>5</span><span class=p>],</span>
       <span class=p>[</span>   <span class=mi>6</span><span class=p>,</span>    <span class=mi>7</span><span class=p>,</span>    <span class=mi>8</span><span class=p>,</span>    <span class=mi>9</span><span class=p>,</span>   <span class=mi>10</span><span class=p>,</span>   <span class=mi>11</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p>一个数组的切片返回的就是它的视图</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span>   <span class=mi>0</span><span class=p>,</span>    <span class=mi>1</span><span class=p>,</span>    <span class=mi>2</span><span class=p>,</span>    <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>1234</span><span class=p>,</span>    <span class=mi>5</span><span class=p>,</span>    <span class=mi>6</span><span class=p>,</span>    <span class=mi>7</span><span class=p>],</span>
       <span class=p>[</span>   <span class=mi>8</span><span class=p>,</span>    <span class=mi>9</span><span class=p>,</span>   <span class=mi>10</span><span class=p>,</span>   <span class=mi>11</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>s</span> <span class=o>=</span> <span class=n>a</span> <span class=p>[:,</span> <span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>]</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>s</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>1</span><span class=p>,</span>  <span class=mi>2</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>s</span><span class=p>[:]</span> <span class=o>=</span> <span class=mi>10</span> <span class=c1># s[:]是s的视图</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>s</span>
<span class=n>array</span><span class=p>([[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><h3 id=深度复制deep-copy>深度复制(Deep Copy)</h3><p><code>copy</code>方法可以完全复制数组和它的数据</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>12</span><span class=p>)</span><span class=o>.</span><span class=n>reshape</span><span class=p>((</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>))</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>2</span><span class=p>,</span>  <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>4</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span>  <span class=mi>7</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>8</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>d</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>d</span> <span class=ow>is</span> <span class=n>a</span>
<span class=bp>False</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>d</span><span class=o>.</span><span class=n>base</span> <span class=ow>is</span> <span class=n>a</span>
<span class=bp>False</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>d</span><span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>9999</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>d</span>
<span class=n>array</span><span class=p>([[</span><span class=mi>9999</span><span class=p>,</span>    <span class=mi>1</span><span class=p>,</span>    <span class=mi>2</span><span class=p>,</span>    <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span>   <span class=mi>4</span><span class=p>,</span>    <span class=mi>5</span><span class=p>,</span>    <span class=mi>6</span><span class=p>,</span>    <span class=mi>7</span><span class=p>],</span>
       <span class=p>[</span>   <span class=mi>8</span><span class=p>,</span>    <span class=mi>9</span><span class=p>,</span>   <span class=mi>10</span><span class=p>,</span>   <span class=mi>11</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>2</span><span class=p>,</span>  <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>4</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span>  <span class=mi>7</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>8</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><h3 id=函数和方法概览>函数和方法概览</h3><p>如下是按照分类整理的常用函数和方法，完整的分类可以参考<a href=https://docs.scipy.org/doc/numpy-dev/reference/routines.html#routines>Routines</a></p><p><strong>数组创建</strong></p><ul><li>arange</li><li>array</li><li>copy</li><li>empty</li><li>empty_like</li><li>eye # 创建一个对角线全是1的二维数组</li><li>fromfile</li><li>fromfunction</li><li>identity # 创建一个对角线全是1的方形矩阵，与eye方法差不多，只是可以接受的参数不同</li><li>linspace</li><li>logspace # 创建等比数列</li><li>mgrid</li><li>orgid</li><li>ones</li><li>ones_like</li><li>zeros</li><li>zeros_like</li></ul><p><strong>转换</strong></p><ul><li>ndarray.astype # 改变数组的元素格式</li><li>atleast_1d # 将输入转换为至少1维数组</li><li>atleast_2d</li><li>alteast_3d</li><li>mat # 将输入转换为矩阵</li></ul><p><strong>处理</strong></p><ul><li>array_split</li><li>column_stack</li><li>concatenate</li><li>diagonal</li><li>dsplit</li><li>dstack</li><li>hsplit</li><li>hstack</li><li>ndarray.item</li><li>newaxis</li><li>ravel</li><li>repeat</li><li>reshape</li><li>resize</li><li>squeeze</li><li>swapaxes</li><li>take</li><li>transpose</li><li>vsplit</li><li>vstack</li></ul><p><strong>Questions</strong></p><ul><li>all</li><li>any</li><li>nonezero</li><li>where</li></ul><p><strong>排序</strong></p><ul><li>argmax # 返回最大值的索引</li><li>argmin # 返回最小值的索引</li><li>argsort # 返回排序后的索引</li><li>max</li><li>min</li><li>ptp</li><li>searchsorted</li><li>sort</li></ul><p><strong>运算</strong></p><ul><li>choose</li><li>compress</li><li>cumprod</li><li>cumsum</li><li>inner</li><li>ndarray.fill</li><li>imag</li><li>prod</li><li>put</li><li>putmask</li><li>real</li><li>sum</li></ul><p><strong>基本统计</strong></p><ul><li>cov</li><li>mean</li><li>std</li><li>var</li></ul><p><strong>线性代数</strong></p><ul><li>cross</li><li>dot</li><li>outer</li><li>linalg</li><li>svd</li><li>vdot</li></ul><h2 id=less-basic>Less Basic</h2><h3 id=广播机制>广播机制</h3><p>属于广播主要描述于numpy对于不同shape的数组如何进行算术运算。受限于一些特定约束。
一般都是小的数组扩展为大的数组，以便能计算。</p><p>通常情况下，numpy操作的数组必须是相同shape的。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>numpy</span> <span class=kn>as</span> <span class=nn>np</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>,</span> <span class=mf>3.0</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mf>2.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>*</span> <span class=n>b</span>
<span class=n>array</span><span class=p>([</span> <span class=mf>2.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>6.</span><span class=p>])</span>
</code></pre></td></tr></table></div></div><p>当数组的shape满足某些特定约束时，numpy的广播机制可以使这个约束更宽松。最简单的就是广播例子就是当数组和一个标量操作时。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>,</span> <span class=mf>3.0</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=mf>2.0</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>*</span> <span class=n>b</span>
<span class=n>array</span><span class=p>([</span> <span class=mf>2.</span><span class=p>,</span>  <span class=mf>4.</span><span class=p>,</span>  <span class=mf>6.</span><span class=p>])</span>
</code></pre></td></tr></table></div></div><p>上面两个例子的结果是一样的，我们可以认为标量b被扩展为了和a同样shape的数组，b中的新元素就是原来标量的拷贝。这个扩展策略仅仅是概念上的，实际上Numpy足够聪明，能自动使用标量做运算，而不需要复制任何东西。所以广播运算从计算内存上来说更优秀。</p><p>要能满足广播，必须符合下面两条规则：</p><ol><li>广播之后，输出数组的shape是输入数组shape的各个轴上的最大值，然后沿着较大shape属性的方向复制延伸；</li><li>要进行广播机制，要么两个数组的shape属性一样，要么其中有一个数组的shape属性必须有一个等于1；</li></ol><p>更多可以参考:</p><ul><li><a href=https://docs.scipy.org/doc/numpy-dev/user/basics.broadcasting.html>https://docs.scipy.org/doc/numpy-dev/user/basics.broadcasting.html</a></li><li><a href="http://www.labri.fr/perso/nrougier/from-python-to-numpy/?utm_source=mybridge&utm_medium=blog&utm_campaign=read_more#broadcasting">http://www.labri.fr/perso/nrougier/from-python-to-numpy/?utm_source=mybridge&utm_medium=blog&utm_campaign=read_more#broadcasting</a></li></ul><h3 id=索引>索引</h3><p>numpy除了支持普通的python方式的索引和切片之外，还支持整数数组或布尔数组索引</p><h3 id=数组索引>数组索引</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>12</span><span class=p>)</span> <span class=o>**</span> <span class=mi>2</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>i</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>5</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([</span>  <span class=mi>0</span><span class=p>,</span>   <span class=mi>1</span><span class=p>,</span>   <span class=mi>4</span><span class=p>,</span>   <span class=mi>9</span><span class=p>,</span>  <span class=mi>16</span><span class=p>,</span>  <span class=mi>25</span><span class=p>,</span>  <span class=mi>36</span><span class=p>,</span>  <span class=mi>49</span><span class=p>,</span>  <span class=mi>64</span><span class=p>,</span>  <span class=mi>81</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=mi>121</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>i</span>
<span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>5</span><span class=p>])</span>

<span class=c1># 返回a中在索引i的元素</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>]</span>
<span class=n>array</span><span class=p>([</span> <span class=mi>1</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>64</span><span class=p>,</span> <span class=mi>25</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>j</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>],</span> <span class=p>[</span><span class=mi>9</span><span class=p>,</span><span class=mi>7</span><span class=p>]])</span>

<span class=c1># 二维数组索引，返回a中在索引j的元素</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>j</span><span class=p>]</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>16</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>81</span><span class=p>,</span> <span class=mi>49</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p>当数组索引作用在多维数组时，是根据数组的第一个维度来索引的。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>palette</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span> <span class=p>[</span><span class=mi>0</span> <span class=p>,</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
<span class=o>...</span>                      <span class=p>[</span><span class=mi>255</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
<span class=o>...</span>                      <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>255</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
<span class=o>...</span>                      <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>255</span><span class=p>],</span>
<span class=o>...</span>                      <span class=p>[</span><span class=mi>255</span><span class=p>,</span> <span class=mi>255</span><span class=p>,</span> <span class=mi>255</span><span class=p>]</span> <span class=p>])</span>
<span class=o>...</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>image</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
<span class=o>...</span>                    <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>]</span> <span class=p>])</span>
<span class=o>...</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>palette</span><span class=p>[</span><span class=n>image</span><span class=p>]</span>
<span class=n>array</span><span class=p>([[[</span>  <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>],</span>
        <span class=p>[</span><span class=mi>255</span><span class=p>,</span>   <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>],</span>
        <span class=p>[</span>  <span class=mi>0</span><span class=p>,</span> <span class=mi>255</span><span class=p>,</span>   <span class=mi>0</span><span class=p>],</span>
        <span class=p>[</span>  <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>]],</span>

       <span class=p>[[</span>  <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>],</span>
        <span class=p>[</span>  <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>,</span> <span class=mi>255</span><span class=p>],</span>
        <span class=p>[</span><span class=mi>255</span><span class=p>,</span> <span class=mi>255</span><span class=p>,</span> <span class=mi>255</span><span class=p>],</span>
        <span class=p>[</span>  <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>]]])</span>
</code></pre></td></tr></table></div></div><p>索引同样可以是多维的，但是必须是相同的shape</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>12</span><span class=p>)</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>2</span><span class=p>,</span>  <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>4</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span>  <span class=mi>7</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>8</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>]])</span>

<span class=c1># indices for the first dim of a</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>i</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>],</span>
<span class=o>...</span>                <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>]</span> <span class=p>])</span>
<span class=o>...</span>

<span class=c1># indices for the second dim</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>j</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
<span class=o>...</span>               <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span> <span class=p>])</span>
<span class=o>...</span>

<span class=c1># i and j must have equal shape</span>
<span class=c1># 返回的结果是是[ [a[0,2], a[1,1]</span>
<span class=c1>#                [a[1,3], a[2, 3] ]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>]</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>2</span><span class=p>,</span>  <span class=mi>5</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>11</span><span class=p>]])</span>

<span class=c1># [ a[0,2], a[1, 2],</span>
<span class=c1>#   a[1,2], a[2, 2] ]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=mi>2</span><span class=p>]</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>2</span><span class=p>,</span>  <span class=mi>6</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>10</span><span class=p>]])</span>

<span class=c1># [[[ a[0,2], a[0,1],</span>
<span class=c1>#     a[0,3], a[0,3]],</span>
<span class=c1>#</span>
<span class=c1>#     a[1,2], a[1,1],</span>
<span class=c1>#     a[1,3], a[1,3]],</span>
<span class=c1>#</span>
<span class=c1>#     a[2,2], a[2,1],</span>
<span class=c1>#     a[2,3], a[2,3]]]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[:,</span> <span class=n>j</span><span class=p>]</span>
<span class=n>array</span><span class=p>([[[</span> <span class=mi>2</span><span class=p>,</span>  <span class=mi>1</span><span class=p>],</span>
    <span class=p>[</span> <span class=mi>3</span><span class=p>,</span>  <span class=mi>3</span><span class=p>]],</span>

   <span class=p>[[</span> <span class=mi>6</span><span class=p>,</span>  <span class=mi>5</span><span class=p>],</span>
    <span class=p>[</span> <span class=mi>7</span><span class=p>,</span>  <span class=mi>7</span><span class=p>]],</span>

   <span class=p>[[</span><span class=mi>10</span><span class=p>,</span>  <span class=mi>9</span><span class=p>],</span>
    <span class=p>[</span><span class=mi>11</span><span class=p>,</span> <span class=mi>11</span><span class=p>]]])</span>
</code></pre></td></tr></table></div></div><p>同样，我们可以把<code>i</code>和<code>j</code>放在一个列表里，然后用列表做索引</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>l</span> <span class=o>=</span> <span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>]</span>

<span class=c1># 等价于a[i, j]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>l</span><span class=p>]</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>2</span><span class=p>,</span>  <span class=mi>5</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>11</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p>但是，我们不可以把<code>i</code>和<code>j</code>放在一个数组里，因为数组索引是作用在第一个维度上的。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>s</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>s</span>
<span class=n>array</span><span class=p>([[[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
        <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]],</span>

       <span class=p>[[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
        <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>]]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>s</span><span class=p>]</span>
<span class=o>---------------------------------------------------------------------------</span>
<span class=ne>IndexError</span>                                <span class=n>Traceback</span> <span class=p>(</span><span class=n>most</span> <span class=n>recent</span> <span class=n>call</span> <span class=n>last</span><span class=p>)</span>
<span class=o>&lt;</span><span class=n>ipython</span><span class=o>-</span><span class=nb>input</span><span class=o>-</span><span class=mi>42</span><span class=o>-</span><span class=n>c057dc68e5fe</span><span class=o>&gt;</span> <span class=ow>in</span> <span class=o>&lt;</span><span class=n>module</span><span class=o>&gt;</span><span class=p>()</span>
<span class=o>----&gt;</span> <span class=mi>1</span> <span class=n>a</span><span class=p>[</span><span class=n>s</span><span class=p>]</span>

<span class=ne>IndexError</span><span class=p>:</span> <span class=n>index</span> <span class=mi>3</span> <span class=ow>is</span> <span class=n>out</span> <span class=n>of</span> <span class=n>bounds</span> <span class=k>for</span> <span class=n>axis</span> <span class=mi>0</span> <span class=k>with</span> <span class=n>size</span> <span class=mi>3</span>

<span class=c1># 等价于 a[i, j]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=nb>tuple</span><span class=p>(</span><span class=n>s</span><span class=p>)]</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>2</span><span class=p>,</span>  <span class=mi>5</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>11</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p>我们同样可以给数组索引赋值</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[[</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]]</span> <span class=o>=</span> <span class=mi>0</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>])</span>
</code></pre></td></tr></table></div></div><p>但是当列表包含相同的索引时，这个位置会被赋值多次，最终只保留最后一次的值</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>]]</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>]</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span>
</code></pre></td></tr></table></div></div><p>上面看起来很合理，但是当使用<code>+=</code>符号的时候，结果和我们想的可能不太一样</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>]]</span> <span class=o>+=</span> <span class=mi>1</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span>
</code></pre></td></tr></table></div></div><p>尽管索引中出现了两次0，但是第0个元素它只加了1次。</p><h3 id=布尔数组索引>布尔数组索引</h3><p>当使用数字数组索引时，我们提供了哪些元素要被索引的信息。但是当使用布尔数组时，我们是明确哪些元素需要，哪些元素不需要。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>12</span><span class=p>)</span><span class=o>.</span><span class=n>reshape</span><span class=p>((</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>))</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>2</span><span class=p>,</span>  <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>4</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span>  <span class=mi>7</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>8</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>]])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>a</span> <span class=o>&gt;</span> <span class=mi>4</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b</span>
<span class=n>array</span><span class=p>([[</span><span class=bp>False</span><span class=p>,</span> <span class=bp>False</span><span class=p>,</span> <span class=bp>False</span><span class=p>,</span> <span class=bp>False</span><span class=p>],</span>
       <span class=p>[</span><span class=bp>False</span><span class=p>,</span>  <span class=bp>True</span><span class=p>,</span>  <span class=bp>True</span><span class=p>,</span>  <span class=bp>True</span><span class=p>],</span>
       <span class=p>[</span> <span class=bp>True</span><span class=p>,</span>  <span class=bp>True</span><span class=p>,</span>  <span class=bp>True</span><span class=p>,</span>  <span class=bp>True</span><span class=p>]],</span> <span class=n>dtype</span><span class=o>=</span><span class=nb>bool</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>b</span><span class=p>]</span>
<span class=n>array</span><span class=p>([</span> <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span>  <span class=mi>7</span><span class=p>,</span>  <span class=mi>8</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>])</span>
</code></pre></td></tr></table></div></div><p>这个特性非常适合用来赋值</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=c1># 所有大于4的元素都赋值为0</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>b</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
       <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>]])</span>
</code></pre></td></tr></table></div></div><p>一个使用布尔数组索引的例子就是<a href=https://zh.wikipedia.org/wiki/%E6%9B%BC%E5%BE%B7%E5%8D%9A%E9%9B%86%E5%90%88>曼德博集合(Mandelbrot set)</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>numpy</span> <span class=kn>as</span> <span class=nn>np</span>
<span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=kn>as</span> <span class=nn>plt</span>
<span class=k>def</span> <span class=nf>mandelbrot</span><span class=p>(</span> <span class=n>h</span><span class=p>,</span><span class=n>w</span><span class=p>,</span> <span class=n>maxit</span><span class=o>=</span><span class=mi>20</span> <span class=p>):</span>
    <span class=s2>&#34;&#34;&#34;Returns an image of the Mandelbrot fractal of size (h,w).&#34;&#34;&#34;</span>
    <span class=n>y</span><span class=p>,</span><span class=n>x</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>ogrid</span><span class=p>[</span> <span class=o>-</span><span class=mf>1.4</span><span class=p>:</span><span class=mf>1.4</span><span class=p>:</span><span class=n>h</span><span class=o>*</span><span class=mi>1j</span><span class=p>,</span> <span class=o>-</span><span class=mi>2</span><span class=p>:</span><span class=mf>0.8</span><span class=p>:</span><span class=n>w</span><span class=o>*</span><span class=mi>1j</span> <span class=p>]</span>
    <span class=n>c</span> <span class=o>=</span> <span class=n>x</span><span class=o>+</span><span class=n>y</span><span class=o>*</span><span class=mi>1j</span>
    <span class=n>z</span> <span class=o>=</span> <span class=n>c</span>
    <span class=n>divtime</span> <span class=o>=</span> <span class=n>maxit</span> <span class=o>+</span> <span class=n>np</span><span class=o>.</span><span class=n>zeros</span><span class=p>(</span><span class=n>z</span><span class=o>.</span><span class=n>shape</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=nb>int</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>maxit</span><span class=p>):</span>
        <span class=n>z</span> <span class=o>=</span> <span class=n>z</span><span class=o>**</span><span class=mi>2</span> <span class=o>+</span> <span class=n>c</span>
        <span class=n>diverge</span> <span class=o>=</span> <span class=n>z</span><span class=o>*</span><span class=n>np</span><span class=o>.</span><span class=n>conj</span><span class=p>(</span><span class=n>z</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>2</span><span class=o>**</span><span class=mi>2</span>            <span class=c1># who is diverging</span>
        <span class=n>div_now</span> <span class=o>=</span> <span class=n>diverge</span> <span class=o>&amp;</span> <span class=p>(</span><span class=n>divtime</span><span class=o>==</span><span class=n>maxit</span><span class=p>)</span>  <span class=c1># who is diverging now</span>
        <span class=n>divtime</span><span class=p>[</span><span class=n>div_now</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span>                  <span class=c1># note when</span>
        <span class=n>z</span><span class=p>[</span><span class=n>diverge</span><span class=p>]</span> <span class=o>=</span> <span class=mi>2</span>                        <span class=c1># avoid diverging too much</span>

    <span class=k>return</span> <span class=n>divtime</span>
<span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>mandelbrot</span><span class=p>(</span><span class=mi>400</span><span class=p>,</span><span class=mi>400</span><span class=p>))</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></td></tr></table></div></div><p>另一个布尔数组的场景跟数字数组索引类似，对每个维度，我们提供一个1维的数组来选择我们需要的切片</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>12</span><span class=p>)</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b1</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=bp>False</span><span class=p>,</span> <span class=bp>True</span><span class=p>,</span> <span class=bp>True</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>b2</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=bp>True</span><span class=p>,</span> <span class=bp>False</span><span class=p>,</span> <span class=bp>True</span><span class=p>,</span> <span class=bp>False</span><span class=p>])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span>  <span class=mi>2</span><span class=p>,</span>  <span class=mi>3</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>4</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span>  <span class=mi>7</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>8</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>]])</span>

<span class=c1># 选择行</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>b1</span><span class=p>,</span> <span class=p>:]</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>4</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span>  <span class=mi>7</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>8</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>]])</span>

<span class=c1># 同上</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>b1</span><span class=p>]</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>4</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span>  <span class=mi>7</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>8</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>]])</span>

<span class=c1># 选择列</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[:,</span> <span class=n>b2</span><span class=p>]</span>
<span class=n>array</span><span class=p>([[</span> <span class=mi>0</span><span class=p>,</span>  <span class=mi>2</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>4</span><span class=p>,</span>  <span class=mi>6</span><span class=p>],</span>
       <span class=p>[</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>10</span><span class=p>]])</span>

<span class=c1># a weird thing to do</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>b1</span><span class=p>,</span> <span class=n>b2</span><span class=p>]</span>
<span class=n>array</span><span class=p>([</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>10</span><span class=p>])</span>
</code></pre></td></tr></table></div></div><h3 id=ix_函数httpsdocsscipyorgdocnumpy-devreferencegeneratednumpyix_htmlnumpyix_-作用待定><a href=https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.ix_.html#numpy.ix_>ix_()函数</a> （作用待定）</h3><h3 id=字符串索引>字符串索引</h3><p>Numpy提供了创建结构化的数组的能力，可以通过列名来操作数据</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=c1># dtype分别指定每一个的名字和数据类型</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([(</span><span class=mi>1</span><span class=p>,</span> <span class=mf>2.</span><span class=p>,</span> <span class=s1>&#39;Hello&#39;</span><span class=p>),</span> <span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mf>3.</span><span class=p>,</span> <span class=s1>&#39;World&#39;</span><span class=p>)],</span> <span class=n>dtype</span><span class=o>=</span><span class=p>[(</span><span class=s1>&#39;foo&#39;</span><span class=p>,</span> <span class=s1>&#39;i4&#39;</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;bar&#39;</span><span class=p>,</span> <span class=s1>&#39;f4&#39;</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;baz&#39;</span><span class=p>,</span> <span class=s1>&#39;S10&#39;</span><span class=p>)])</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
<span class=p>(</span><span class=mi>2</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>,</span> <span class=sa>b</span><span class=s1>&#39;World&#39;</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>x</span><span class=p>[</span><span class=s1>&#39;foo&#39;</span><span class=p>]</span>
<span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=n>int32</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>x</span><span class=p>[</span><span class=s1>&#39;bar&#39;</span><span class=p>]</span>
<span class=n>array</span><span class=p>([</span> <span class=mf>2.</span><span class=p>,</span>  <span class=mf>3.</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=n>float32</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>x</span><span class=p>[</span><span class=s1>&#39;baz&#39;</span><span class=p>]</span>
<span class=n>array</span><span class=p>([</span><span class=sa>b</span><span class=s1>&#39;Hello&#39;</span><span class=p>,</span> <span class=sa>b</span><span class=s1>&#39;World&#39;</span><span class=p>],</span>
      <span class=n>dtype</span><span class=o>=</span><span class=s1>&#39;|S10&#39;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><h2 id=更多httpsdocsscipyorgdocnumpy-devuserbasicshtml><a href=https://docs.scipy.org/doc/numpy-dev/user/basics.html>更多</a></h2><ul><li>Data types</li><li>Array creation</li><li>I/O with NumPy</li><li>Indexing</li><li>Broadcasting</li><li>Byte-swapping</li><li>Structured arrays</li><li>Subclassing ndarray</li></ul><h2 id=扩展阅读>扩展阅读</h2><ul><li><a href=http://www.labri.fr/perso/nrougier/teaching/numpy.100/>100 numpy exercises</a></li><li><a href=http://reverland.org/python/2012/08/22/numpy>试验性的Numpy教程</a></li><li><a href=http://www.labri.fr/perso/nrougier/from-python-to-numpy/>From Python to Numpy</a></li></ul></div><div class=post-copyright><p class=copyright-item><span class=item-title>文章作者</span>
<span class=item-content>crazygit</span></p><p class=copyright-item><span class=item-title>上次更新</span>
<span class=item-content>2017-12-19</span></p><p class=copyright-item><span class=item-title>许可协议</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh target=_blank>CC BY-NC-ND 4.0</a></span></p></div><div class=post-reward><input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>赞赏支持</label><div class=qr-code><label class=qr-code-image for=reward><img class=image src=https://cdn.jsdelivr.net/gh/crazygit/static@main/img/wechatpay.jpg>
<span>微信打赏</span></label></div></div><footer class=post-footer><div class=post-tags><a href=https://crazygit.wiseturtles.com/tags/numpy/>numpy</a></div><nav class=post-nav><a class=prev href=/2017/12/20/10-minutes-to-pandas/><i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417l277.93508-310.326815c11.338233-12.190647 11.035334-32.285311-.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"/></svg></i><span class="prev-text nav-default">10分钟入门Pandas</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/2013/01/14/linux-commands-and-bash/><span class="next-text nav-default">Linux命令行与shell脚本编程大全第二版学习笔记</span>
<span class="prev-text nav-mobile">下一篇</span>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697c-11.777231-11.500939-30.216186-10.304694-41.178865 2.712784z"/></svg></i></a></nav></footer></article><div class="post bg-white"><script src=https://utteranc.es/client.js repo=crazygit/hugo-blog-comments issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div></div></main><footer id=footer class=footer><div class=icon-links><a href=mailto:crazygit@foxmail.com rel="me noopener" class=iconfont title=email><svg class="icon" viewBox="0 0 1451 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408h399.992405s71.046998 3.997201 71.046998 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zm53.281707 130.131124C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523S0 1024 83.726336 1024H682.532949 753.579947h595.368192C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955c-39.771477 34.470494-74.671786 43.295855-98.955861 43.868928z"/></svg></a><a href=https://twitter.com/lianglin999 rel="me noopener" class=iconfont title=twitter target=_blank><svg class="icon" viewBox="0 0 1264 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M1229.8616 18.043658s-117.852626 63.135335-164.151872 67.344358C960.484169-78.763856 560.627046-7.210476 627.971403 308.466201 278.622548 312.675223 89.216542 47.506814 89.216542 47.506814S-28.636084 236.91282 164.978944 392.646647C127.097743 396.85567 55.544363 371.601535 55.544363 371.601535S26.081207 535.753407 253.368414 615.724832c-21.045112 29.463156-113.643603 8.418045-113.643603 8.418045s25.254134 143.10676 231.496229 180.987961c-143.10676 130.479693-387.230056 92.598492-370.393967 105.225559 206.242095 189.406006 1119.599946 231.496229 1128.01799-643.98042 50.5082679999998-16.83609 134.688715-143.10676 134.688715-143.10676s-130.479693 37.881201-138.897738 33.672179C1225.652577 98.015083 1229.8616 18.043658 1229.8616 18.043658"/></svg></a><a href=https://github.com/crazygit rel="me noopener" class=iconfont title=github target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M512 12.672c-282.88.0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667.0-12.16-.426667-44.373333-.64-87.04C242.005334 929.664 211.968 830.08 211.968 830.08 188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333.0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333.0.0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667.0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72.0 68.522667-.64 123.562667-.64 140.202666.0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"/></svg></a><a href=https://www.weibo.com/crazygit/profile rel="me noopener" class=iconfont title=weibo target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M385.714286 733.714286q12-19.428571 6.285714-39.428571t-25.714286-28.571429q-19.428571-8-41.714286-.571429t-34.285714 26.285714q-12.571429 19.428571-7.428571 39.142857t24.571429 28.857143 42.571429 1.428571 35.714286-27.142857zm53.714286-69.142857q4.571429-7.428571 2-15.142857t-10-10.571429q-8-2.857143-16.285714 2.857143t-12.285714 10.571429q-9.714286 17.714286 7.428571 25.714286 8 2.857143 16.571429 2.857143t12.571429-10.571429zm99.428571 61.142857Q513.142857 784 448.571429 811.428572t-128 6.857143q-61.142857-19.428571-84.285714-72.285714t3.714286-107.142857q26.857143-53.142857 86.571429-79.428571t120.285714-10.857143q63.428571 16.571429 90.571429 68.285714t1.428571 108.857143zm178.285714-91.428571Q712 579.428572 666.285714 537.142858t-119.142857-62.285714-156.857143-12q-127.428571 13.142857-211.142857 80.857143t-75.714286 151.142857q5.142857 54.857143 50.857143 97.142857t119.142857 62.285714 156.857143 12q127.428571-13.142857 211.142857-80.857143t75.714286-151.142857zm176 2.285714q0 38.857143-21.142857 79.714286t-62.285714 78.285714-96.285714 67.142857-129.142857 47.428571-154.571429 17.714286-157.142857-19.142857-137.428571-53.142857-98-86.285714-37.142857-114q0-65.714286 39.714286-140T152.57143 366.857144q96.571429-96.571429 195.142857-134.857143t140.857143 4q37.142857 36.571429 11.428571 119.428571-2.285714 8-.571429 11.428571t5.714286 4 8.285714 2.857143 7.714286-2l3.428571-1.142857Q604 336.857143 665.142858 336.857143t87.428571 34.857143q25.714286 36 0 101.714286-1.142857 7.428571-2.571429 11.428571T752.571429 492t6.857143 4.285714 9.714286 3.428571q32.571429 10.285714 58.857143 26.857143t45.714286 46.571429 19.428571 66.571429zM850.857143 280q24 26.857143 31.142857 62t-3.714286 67.142857q-4.571429 13.142857-16.857143 19.428571T836 430.857142q-13.142857-4.571429-19.428571-16.857143t-2.285714-25.428571q11.428571-36-13.714286-63.428571t-61.142857-20Q725.714286 308 713.714286 300.571428t-14.285714-21.142857Q696.571429 265.714285 704.000001 254t21.142857-14.571429q34.285714-7.428571 68 3.142857t57.714286 37.428571zm103.428571-93.142857Q1004 241.714286 1018.571428 314t-7.714286 138q-5.142857 15.428571-19.428571 22.857143t-29.714286 2.285714-22.857143-19.428571T935.999999 428q16-46.857143 5.714286-98.285714t-45.714286-90.285714q-35.428571-39.428571-84.571429-54.571429T712.571427 180q-16 3.428571-29.714286-5.428571t-17.142857-24.857143 5.428571-29.428571 24.857143-16.857143q70.285714-14.857143 139.428571 6.571429t118.857143 76.857143z"/></svg></a><a href=https://crazygit.wiseturtles.com/index.xml rel="noopener alternate" type=application/rss+xml class=iconfont title=rss target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><path d="M819.157333 1024C819.157333 574.592 449.408 204.8.0 204.8V0c561.706667.0 1024 462.293333 1024 1024H819.157333zM140.416 743.04a140.8 140.8.0 01140.501333 140.586667A140.928 140.928.0 01140.074667 1024C62.72 1024 0 961.109333.0 883.626667S62.933333 743.082667 140.416 743.04zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667v-199.04c372.352.0 678.784 306.517333 678.784 678.826667z"/></svg></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme - <a class=theme-link href=https://github.com/xianmin/hugo-theme-jane>Jane</a></span>
<span class=copyright-year>&copy;
2017 -
2021
<span class=heart><i class=iconfont><svg class="icon" viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14"><path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7.0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1.0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2.0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3.1-42.5-8-83.6-24-122.2z" fill="#8a8a8a"/></svg></i></span><span class=author>crazygit</span></span>
<span id=busuanzi_container>访客数/访问量：<span id=busuanzi_value_site_uv></span>/<span id=busuanzi_value_site_pv></span></span></div></footer><div class=back-to-top id=back-to-top><i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="35"><path d="M510.866688 227.694839 95.449397 629.218702h235.761562L329.15309 958.01517h362.40389L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777h894.052392v131.813095H63.840492V63.962777zm0 0"/></svg></i></div></div><script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script><script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script><script type=text/javascript src=/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin=anonymous></script><script id=baidu_analytics>var _hmt=_hmt||[];(function(){var a,b;if(window.location.hostname==='localhost')return;a=document.createElement("script"),a.async=!0,a.src="https://hm.baidu.com/hm.js?2b47f91b8532d1a5e950c8e77142d95c",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script><script id=baidu_push>(function(){var a,c,b;if(window.location.hostname==='localhost')return;a=document.createElement('script'),a.async=!0,c=window.location.protocol.split(':')[0],c==='https'?a.src='https://zz.bdstatic.com/linksubmit/push.js':a.src='http://push.zhanzhang.baidu.com/push.js',b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script><script type=text/javascript src=/js/load-photoswipe.js></script><script type=text/javascript src=/lib/photoswipe/photoswipe.min.js></script><script type=text/javascript src=/lib/photoswipe/photoswipe-ui-default.min.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script src=https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js></script><script type=text/javascript>AV.initialize("bWUs89CHYswTxwt88Jf71tIF-gzGzoHsz","IcudhQhVD2eqKqkOTQQ6agUS")</script><script>function showHitCount(d){var b=new AV.Query(d),a=[],c=$(".leancloud_visitors");c.each(function(){a.push($(this).attr("id").trim())}),b.containedIn('url',a),b.find().done(function(d){var e='.leancloud-visitors-count',b,h,f,j,g,i;if(d.length===0){c.find(e).text(0);return}for(b=0;b<d.length;b++)h=d[b],f=h.get('url'),j=h.get('hits'),g=document.getElementById(f),$(g).find(e).text(j);for(b=0;b<a.length;b++)f=a[b],g=document.getElementById(f),i=$(g).find(e),i.text()==''&&i.text(0)}).fail(function(b,a){console.log("Error: "+a.code+" "+a.message)})}function addCount(b){var c=$(".leancloud_visitors"),a=c.attr('id').trim(),e=c.attr('data-flag-title').trim(),d=new AV.Query(b);d.equalTo("url",a),d.find({success:function(g){var d,c,f;g.length>0?(d=g[0],d.fetchWhenSave(!0),d.increment("hits"),d.save(null,{success:function(b){var c=$(document.getElementById(a));c.find('.leancloud-visitors-count').text(b.get('hits'))},error:function(b,a){console.log('Failed to save Visitor num, with error message: '+a.message)}})):(c=new b,f=new AV.ACL,f.setPublicReadAccess(!0),f.setPublicWriteAccess(!0),c.setACL(f),c.set("title",e),c.set("url",a),c.set("hits",1),c.save(null,{success:function(b){var c=$(document.getElementById(a));c.find('.leancloud-visitors-count').text(b.get('hits'))},error:function(a,b){console.log('Failed to create')}}))},error:function(a){console.log('Error:'+a.code+" "+a.message)}})}$(function(){var a=AV.Object.extend("Counter");$('.leancloud_visitors').length==1?addCount(a):$('.post-link').length>1&&showHitCount(a)})</script><script src=/js/douban.js></script></body></html>