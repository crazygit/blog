<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>10分钟入门Pandas - Soul Mate</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="crazygit" /><meta name="description" content="Pandas是python数据分析的瑞士军刀, 本文主要根据Pandas官网的10 Minutes to pandas整理而来
" />

  <meta name="keywords" content="Hugo, crazygit, blog" />


<meta name="baidu-site-verification" content="mEI3NT6pyx" />
<meta name="google-site-verification" content="AbF6G10N67H-FaerplTnvfAXJrTtXBGHdr4xsSot7z8" />


<meta name="generator" content="Hugo 0.48" />


<link rel="canonical" href="https://crazygit.wiseturtles.com/2017/12/20/10-minutes-to-pandas/" />



<link rel="icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">







<link href="/dist/jane.min.css?v=2.7.0" rel="stylesheet">



<link rel="stylesheet" href="/css/douban.css">

<link rel="stylesheet" href="/css/monokai-syntax.css">


<meta property="og:title" content="10分钟入门Pandas" />
<meta property="og:description" content="Pandas是python数据分析的瑞士军刀, 本文主要根据Pandas官网的10 Minutes to pandas整理而来
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://crazygit.wiseturtles.com/2017/12/20/10-minutes-to-pandas/" /><meta property="article:published_time" content="2017-12-20T22:21:46&#43;08:00"/>
<meta property="article:modified_time" content="2017-12-20T22:21:46&#43;08:00"/>
<meta itemprop="name" content="10分钟入门Pandas">
<meta itemprop="description" content="Pandas是python数据分析的瑞士军刀, 本文主要根据Pandas官网的10 Minutes to pandas整理而来
">


<meta itemprop="datePublished" content="2017-12-20T22:21:46&#43;08:00" />
<meta itemprop="dateModified" content="2017-12-20T22:21:46&#43;08:00" />
<meta itemprop="wordCount" content="5858">



<meta itemprop="keywords" content="pandas," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="10分钟入门Pandas"/>
<meta name="twitter:description" content="Pandas是python数据分析的瑞士军刀, 本文主要根据Pandas官网的10 Minutes to pandas整理而来
"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-112251188-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Soul Mate</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/categories/">分类</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/books/">读书</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/about/">关于</a>
          
        
      </li>
    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Soul Mate
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/">主页</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/categories/">分类</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/post/">归档</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/tags/">标签</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/books/">读书</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://crazygit.wiseturtles.com/about/">关于</a>
          

        

      </li>
    
    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">10分钟入门Pandas</h1>
      
      <div class="post-meta">
        <span class="post-time"> 2017-12-20 </span>
        <div class="post-category">
            <a href="https://crazygit.wiseturtles.com/categories/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"> python数据分析 </a>
            
          </div>
        <span class="more-meta"> 约 5858 字 </span>
          <span class="more-meta"> 预计阅读 12 分钟 </span>

        
        
          <span id="busuanzi_container_page_pv">
            | 阅读 <span id="busuanzi_value_page_pv"></span>
          </span>
        

        
        
          <span id="/2017/12/20/10-minutes-to-pandas/" class="leancloud_visitors" data-flag-title="10分钟入门Pandas">
            <span class="post-meta-item-text"> | 阅读 </span>
            <span class="leancloud-visitors-count"></span>
          </span>
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#安装">安装</a></li>
<li><a href="#概览">概览</a></li>
<li><a href="#创建series">创建Series</a>
<ul>
<li><a href="#使用-ndarray-创建-from-ndarray">使用<code>ndarray</code>创建(From ndarray)</a></li>
<li><a href="#使用-dict-创建-from-dict">使用<code>dict</code>创建(From dict)</a></li>
<li><a href="#使用标量创建-from-scalar-value">使用标量创建(From scalar value)</a></li>
</ul></li>
<li><a href="#创建dataframe">创建DataFrame</a>
<ul>
<li><a href="#从series字典或嵌套的字典创建-from-dict-of-series-or-dicts">从Series字典或嵌套的字典创建(From dict of Series or dicts)</a></li>
<li><a href="#从ndarray类型-列表类型的字典-from-dict-of-ndarrays-lists">从ndarray类型/列表类型的字典(From dict of ndarrays / lists)</a></li>
<li><a href="#从结构化ndarray创建-from-structured-or-record-array">从结构化ndarray创建(From structured or record array)</a></li>
<li><a href="#从字典列表里创建-a-list-of-dicts">从字典列表里创建(a list of dicts)</a></li>
<li><a href="#从元祖字典创建-from-a-dict-of-tuples">从元祖字典创建（From a dict of tuples）</a></li>
<li><a href="#通过series创建-from-a-series">通过Series创建(From a Series)</a></li>
</ul></li>
<li><a href="#查看数据">查看数据</a></li>
<li><a href="#选择数据">选择数据</a>
<ul>
<li><a href="#获取">获取</a></li>
<li><a href="#通过label选择">通过Label选择</a></li>
<li><a href="#通过position选择">通过Position选择</a></li>
<li><a href="#布尔索引">布尔索引</a></li>
<li><a href="#赋值">赋值</a></li>
</ul></li>
<li><a href="#数据缺失">数据缺失</a></li>
<li><a href="#运算操作">运算操作</a>
<ul>
<li><a href="#stats统计">Stats统计</a></li>
<li><a href="#apply">Apply</a></li>
<li><a href="#直方图-histogramming">直方图 Histogramming</a></li>
<li><a href="#字符串方法">字符串方法</a></li>
</ul></li>
<li><a href="#合并">合并</a>
<ul>
<li><a href="#concat-http-pandas-pydata-org-pandas-docs-stable-merging-html-merging"><a href="http://pandas.pydata.org/pandas-docs/stable/merging.html#merging">Concat</a></a></li>
<li><a href="#join-http-pandas-pydata-org-pandas-docs-stable-merging-html-merging-join"><a href="http://pandas.pydata.org/pandas-docs/stable/merging.html#merging-join">Join</a></a></li>
<li><a href="#append-http-pandas-pydata-org-pandas-docs-stable-merging-html-merging-concatenation"><a href="http://pandas.pydata.org/pandas-docs/stable/merging.html#merging-concatenation">Append</a></a></li>
</ul></li>
<li><a href="#grouping-http-pandas-pydata-org-pandas-docs-stable-groupby-html-groupby"><a href="http://pandas.pydata.org/pandas-docs/stable/groupby.html#groupby">Grouping</a></a></li>
<li><a href="#reshaping-http-pandas-pydata-org-pandas-docs-stable-reshaping-html-reshaping-stacking"><a href="http://pandas.pydata.org/pandas-docs/stable/reshaping.html#reshaping-stacking">Reshaping</a></a>
<ul>
<li><a href="#stack">Stack</a></li>
<li><a href="#数据透视表-pivot-tables-http-pandas-pydata-org-pandas-docs-stable-reshaping-html-reshaping-pivot"><a href="http://pandas.pydata.org/pandas-docs/stable/reshaping.html#reshaping-pivot">数据透视表(Pivot Tables)</a></a></li>
</ul></li>
<li><a href="#时间序列-http-pandas-pydata-org-pandas-docs-stable-timeseries-html-timeseries"><a href="http://pandas.pydata.org/pandas-docs/stable/timeseries.html#timeseries">时间序列</a></a></li>
<li><a href="#categoricals分类-http-pandas-pydata-org-pandas-docs-stable-categorical-html-categorical"><a href="http://pandas.pydata.org/pandas-docs/stable/categorical.html#categorical">Categoricals分类</a></a></li>
<li><a href="#plotting-http-pandas-pydata-org-pandas-docs-stable-visualization-html-visualization"><a href="http://pandas.pydata.org/pandas-docs/stable/visualization.html#visualization">Plotting</a></a></li>
<li><a href="#数据in-out">数据In/Out</a>
<ul>
<li><a href="#csv-http-pandas-pydata-org-pandas-docs-stable-io-html-csv-text-files"><a href="http://pandas.pydata.org/pandas-docs/stable/io.html#csv-text-files">CSV</a></a></li>
<li><a href="#hdf5-http-pandas-pydata-org-pandas-docs-stable-io-html-hdf5-pytables"><a href="http://pandas.pydata.org/pandas-docs/stable/io.html#hdf5-pytables">HDF5</a></a></li>
<li><a href="#excel-http-pandas-pydata-org-pandas-docs-stable-io-html-io-excel"><a href="http://pandas.pydata.org/pandas-docs/stable/io.html#io-excel">Excel</a></a></li>
</ul></li>
<li><a href="#扩展阅读">扩展阅读</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <p>参考:</p>

<p><a href="http://pandas.pydata.org/pandas-docs/stable/10min.html">10 Minutes to pandas</a></p>

<h2 id="安装">安装</h2>

<p>支持的python版本: 2.7, 3.5, 3.6</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ pip install pandas</code></pre></td></tr></table>
</div>
</div>
<p>检查本地的pandas运行环境是否完整，可以运行pandas的单元测试用例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ pip install pytest</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">test</span><span class="p">()</span></code></pre></td></tr></table>
</div>
</div>
<p>获取当前使用pandas的版本信息</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">__version__</span>
<span class="s1">&#39;0.21.1&#39;</span></code></pre></td></tr></table>
</div>
</div>
<p></p>

<h2 id="概览">概览</h2>

<p>pandas的基本数据结构:</p>

<ul>
<li><code>Series</code>: 一维数据</li>
<li><code>DataFrame</code>: 二维数据</li>
<li><code>Panel</code>: 三维数据(从0.20.0版本开始，已经<a href="http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dsintro-deprecate-panel">不再推荐使用</a>)</li>
<li><code>Panel4D</code>, <code>PanelND</code>(不再推荐使用)</li>
</ul>

<p><code>DataFrame</code>是由<code>Series</code>构成的</p>

<h2 id="创建series">创建Series</h2>

<p>创建<code>Series</code>最简单的方法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<p><code>data</code>可以是不同的类型:</p>

<ul>
<li>python字典</li>
<li>ndarray</li>
<li>标量(比如: 5)</li>
</ul>

<h3 id="使用-ndarray-创建-from-ndarray">使用<code>ndarray</code>创建(From ndarray)</h3>

<p>如果<code>data</code>是<code>ndarray</code>,那么<code>index</code>的长度必须和<code>data</code>的长度相同，当没有明确<code>index</code>参数时，默认使用<code>[0, ... len(data) - 1]</code>作为<code>index</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="n">a</span>    <span class="mf">0.654385</span>
<span class="n">b</span>    <span class="mf">0.055691</span>
<span class="n">c</span>    <span class="mf">0.856054</span>
<span class="n">d</span>    <span class="mf">0.621810</span>
<span class="n">e</span>    <span class="mf">1.802872</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">index</span>
<span class="n">Index</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="mi">0</span>   <span class="o">-</span><span class="mf">0.467183</span>
<span class="mi">1</span>   <span class="o">-</span><span class="mf">1.333323</span>
<span class="mi">2</span>   <span class="o">-</span><span class="mf">0.493813</span>
<span class="mi">3</span>   <span class="o">-</span><span class="mf">0.067705</span>
<span class="mi">4</span>   <span class="o">-</span><span class="mf">1.310332</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span></code></pre></td></tr></table>
</div>
</div>
<p>需要注意的是: <code>pandas</code>里的索引并不要求唯一性，如果一个操作不支持重复的索引，会自动抛出异常。这么做的原因是很多操作不会用到索引，比如<code>GroupBy</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="n">a</span>    <span class="mf">0.847331</span>
<span class="n">a</span>   <span class="o">-</span><span class="mf">2.138021</span>
<span class="n">a</span>   <span class="o">-</span><span class="mf">0.364763</span>
<span class="n">a</span>   <span class="o">-</span><span class="mf">0.603172</span>
<span class="n">a</span>    <span class="mf">0.363691</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="使用-dict-创建-from-dict">使用<code>dict</code>创建(From dict)</h3>

<p>当<code>data</code>是<code>dict</code>类型时，如果指定了<code>index</code>参数，那么就使用<code>index</code>参数作为索引。否者，就使用排序后的<code>data</code>的<code>key</code>作为<code>index</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">0.</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mf">1.</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mf">2.</span><span class="p">}</span>

<span class="c1"># 索引的值是排序后的</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">a</span>    <span class="mf">1.0</span>
<span class="n">b</span>    <span class="mf">0.0</span>
<span class="n">c</span>    <span class="mf">2.0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="c1"># 字典中不存在的key, 直接赋值为NaN(Not a number)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">])</span>
<span class="n">b</span>    <span class="mf">0.0</span>
<span class="n">c</span>    <span class="mf">2.0</span>
<span class="n">d</span>    <span class="n">NaN</span>
<span class="n">a</span>    <span class="mf">1.0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="使用标量创建-from-scalar-value">使用标量创建(From scalar value)</h3>

<p>当<code>data</code>是标量时，必须提供<code>index</code>, 值会被重复到<code>index</code>的长度</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="mf">5.</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">])</span>
<span class="n">a</span>    <span class="mf">5.0</span>
<span class="n">b</span>    <span class="mf">5.0</span>
<span class="n">c</span>    <span class="mf">5.0</span>
<span class="n">d</span>    <span class="mf">5.0</span>
<span class="n">e</span>    <span class="mf">5.0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="创建dataframe">创建DataFrame</h2>

<p>DataFrame是一个二维的数据结构，可以看做是一个excel表格或一张SQL表，或者值为Series的字典。 跟Series一样，DataFrame也可以通过多种类型的数据结构来创建</p>

<ul>
<li>字典(包含一维ndarray数组，列表，字典或Series)</li>
<li>二维的ndarray数组</li>
<li>结构化的ndarray</li>
<li>Series</li>
<li>另一个DataFrame</li>
</ul>

<p>除了<code>data</code>之外，还接受<code>index</code>和<code>columns</code>参数来分布指定行和列的标签</p>

<h3 id="从series字典或嵌套的字典创建-from-dict-of-series-or-dicts">从Series字典或嵌套的字典创建(From dict of Series or dicts)</h3>

<p>结果的索引是多个Series索引的合集，如果没有指定<code>columns</code>，就用排序后的字典的<code>key</code>作为列标签。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;one&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]),</span>
<span class="o">...</span>      <span class="s1">&#39;two&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])}</span>
<span class="o">...</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
   <span class="n">one</span>  <span class="n">two</span>
<span class="n">a</span>  <span class="mf">1.0</span>    <span class="mi">1</span>
<span class="n">b</span>  <span class="mf">2.0</span>    <span class="mi">2</span>
<span class="n">c</span>  <span class="mf">3.0</span>    <span class="mi">3</span>
<span class="n">d</span>  <span class="n">NaN</span>    <span class="mi">4</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">])</span>
   <span class="n">one</span>  <span class="n">two</span>
<span class="n">d</span>  <span class="n">NaN</span>    <span class="mi">4</span>
<span class="n">b</span>  <span class="mf">2.0</span>    <span class="mi">2</span>
<span class="n">a</span>  <span class="mf">1.0</span>    <span class="mi">1</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">])</span>
   <span class="n">two</span> <span class="n">three</span>
<span class="n">d</span>    <span class="mi">4</span>   <span class="n">NaN</span>
<span class="n">b</span>    <span class="mi">2</span>   <span class="n">NaN</span>
<span class="n">a</span>    <span class="mi">1</span>   <span class="n">NaN</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span>
<span class="n">Index</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
<span class="n">Index</span><span class="p">([</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="从ndarray类型-列表类型的字典-from-dict-of-ndarrays-lists">从ndarray类型/列表类型的字典(From dict of ndarrays / lists)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;one&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;two&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]}</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
   <span class="n">one</span>  <span class="n">two</span>
<span class="mi">0</span>    <span class="mi">1</span>    <span class="mi">4</span>
<span class="mi">1</span>    <span class="mi">2</span>    <span class="mi">3</span>
<span class="mi">2</span>    <span class="mi">3</span>    <span class="mi">2</span>
<span class="mi">3</span>    <span class="mi">4</span>    <span class="mi">1</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>
   <span class="n">one</span>  <span class="n">two</span>
<span class="n">a</span>    <span class="mi">1</span>    <span class="mi">4</span>
<span class="n">b</span>    <span class="mi">2</span>    <span class="mi">3</span>
<span class="n">c</span>    <span class="mi">3</span>    <span class="mi">2</span>
<span class="n">d</span>    <span class="mi">4</span>    <span class="mi">1</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="从结构化ndarray创建-from-structured-or-record-array">从结构化ndarray创建(From structured or record array)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;i4&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;f4&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;a10&#39;</span><span class="p">)])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span>
<span class="n">array</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)],</span>
      <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;i4&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;f4&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;S10&#39;</span><span class="p">)])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="s1">&#39;Hello&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="s1">&#39;World&#39;</span><span class="p">)]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
   <span class="n">A</span>    <span class="n">B</span>         <span class="n">C</span>
<span class="mi">0</span>  <span class="mi">1</span>  <span class="mf">2.0</span>  <span class="sa">b</span><span class="s1">&#39;Hello&#39;</span>
<span class="mi">1</span>  <span class="mi">2</span>  <span class="mf">3.0</span>  <span class="sa">b</span><span class="s1">&#39;World&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">])</span>
    <span class="n">A</span>    <span class="n">B</span>         <span class="n">C</span>
<span class="n">first</span>   <span class="mi">1</span>  <span class="mf">2.0</span>  <span class="sa">b</span><span class="s1">&#39;Hello&#39;</span>
<span class="n">second</span>  <span class="mi">2</span>  <span class="mf">3.0</span>  <span class="sa">b</span><span class="s1">&#39;World&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">])</span>
               <span class="n">C</span>  <span class="n">A</span>    <span class="n">B</span>
<span class="n">first</span>   <span class="sa">b</span><span class="s1">&#39;Hello&#39;</span>  <span class="mi">1</span>  <span class="mf">2.0</span>
<span class="n">second</span>  <span class="sa">b</span><span class="s1">&#39;World&#39;</span>  <span class="mi">2</span>  <span class="mf">3.0</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="从字典列表里创建-a-list-of-dicts">从字典列表里创建(a list of dicts)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">data2</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&#34;c&#34;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span>
   <span class="n">a</span>   <span class="n">b</span>     <span class="n">c</span>
<span class="mi">0</span>  <span class="mi">1</span>   <span class="mi">2</span>   <span class="n">NaN</span>
<span class="mi">1</span>  <span class="mi">5</span>  <span class="mi">10</span>  <span class="mf">20.0</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data2</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;first&#34;</span><span class="p">,</span> <span class="s2">&#34;second&#34;</span><span class="p">])</span>
        <span class="n">a</span>   <span class="n">b</span>     <span class="n">c</span>
<span class="n">first</span>   <span class="mi">1</span>   <span class="mi">2</span>   <span class="n">NaN</span>
<span class="n">second</span>  <span class="mi">5</span>  <span class="mi">10</span>  <span class="mf">20.0</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data2</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">])</span>
   <span class="n">a</span>   <span class="n">b</span>
<span class="mi">0</span>  <span class="mi">1</span>   <span class="mi">2</span>
<span class="mi">1</span>  <span class="mi">5</span>  <span class="mi">10</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="从元祖字典创建-from-a-dict-of-tuples">从元祖字典创建（From a dict of tuples）</h3>

<p>通过元祖字典，可以创建多索引的DataFrame</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">):</span> <span class="p">{(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">):</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">):</span> <span class="mi">2</span><span class="p">},</span>
<span class="o">...</span>               <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">):</span> <span class="p">{(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">):</span> <span class="mi">3</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">):</span> <span class="mi">4</span><span class="p">},</span>
<span class="o">...</span>               <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">):</span> <span class="p">{(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">):</span> <span class="mi">5</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">):</span> <span class="mi">6</span><span class="p">},</span>
<span class="o">...</span>               <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">):</span> <span class="p">{(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">):</span> <span class="mi">7</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">):</span> <span class="mi">8</span><span class="p">},</span>
<span class="o">...</span>               <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">):</span> <span class="p">{(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">):</span> <span class="mi">9</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">):</span> <span class="mi">10</span><span class="p">}})</span>
<span class="o">...</span>
       <span class="n">a</span>              <span class="n">b</span>
       <span class="n">a</span>    <span class="n">b</span>    <span class="n">c</span>    <span class="n">a</span>     <span class="n">b</span>
<span class="n">A</span> <span class="n">B</span>  <span class="mf">4.0</span>  <span class="mf">1.0</span>  <span class="mf">5.0</span>  <span class="mf">8.0</span>  <span class="mf">10.0</span>
  <span class="n">C</span>  <span class="mf">3.0</span>  <span class="mf">2.0</span>  <span class="mf">6.0</span>  <span class="mf">7.0</span>   <span class="n">NaN</span>
  <span class="n">D</span>  <span class="n">NaN</span>  <span class="n">NaN</span>  <span class="n">NaN</span>  <span class="n">NaN</span>   <span class="mf">9.0</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="通过series创建-from-a-series">通过Series创建(From a Series)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span>
   <span class="mi">0</span>
<span class="mi">0</span>  <span class="mi">1</span>
<span class="mi">1</span>  <span class="mi">2</span>
<span class="mi">2</span>  <span class="mi">3</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="查看数据">查看数据</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">dates</span>
<span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2013-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2013-01-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2013-01-03&#39;</span><span class="p">,</span> <span class="s1">&#39;2013-01-04&#39;</span><span class="p">,</span>
               <span class="s1">&#39;2013-01-05&#39;</span><span class="p">,</span> <span class="s1">&#39;2013-01-06&#39;</span><span class="p">],</span>
              <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;datetime64[ns]&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABCD&#39;</span><span class="p">))</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mf">1.231897</span> <span class="o">-</span><span class="mf">0.169839</span>  <span class="mf">1.333295</span>  <span class="mf">0.367142</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>  <span class="mf">0.910350</span>  <span class="mf">0.151186</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>  <span class="mf">0.788656</span> <span class="o">-</span><span class="mf">0.203639</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span> <span class="o">-</span><span class="mf">1.213848</span>  <span class="mf">1.076715</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">0.418213</span>  <span class="mf">0.107400</span>  <span class="mf">0.619448</span>  <span class="mf">1.494087</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span> <span class="o">-</span><span class="mf">1.831020</span>  <span class="mf">0.813526</span>  <span class="mf">0.403101</span> <span class="o">-</span><span class="mf">1.251946</span>

<span class="c1"># 获取前几行(默认前5行)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mf">1.231897</span> <span class="o">-</span><span class="mf">0.169839</span>  <span class="mf">1.333295</span>  <span class="mf">0.367142</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>  <span class="mf">0.910350</span>  <span class="mf">0.151186</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>  <span class="mf">0.788656</span> <span class="o">-</span><span class="mf">0.203639</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span> <span class="o">-</span><span class="mf">1.213848</span>  <span class="mf">1.076715</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">0.418213</span>  <span class="mf">0.107400</span>  <span class="mf">0.619448</span>  <span class="mf">1.494087</span>

<span class="c1"># 获取后3行</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span> <span class="o">-</span><span class="mf">1.213848</span>  <span class="mf">1.076715</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">0.418213</span>  <span class="mf">0.107400</span>  <span class="mf">0.619448</span>  <span class="mf">1.494087</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span> <span class="o">-</span><span class="mf">1.831020</span>  <span class="mf">0.813526</span>  <span class="mf">0.403101</span> <span class="o">-</span><span class="mf">1.251946</span>

<span class="c1"># 获取索引</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span>
<span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2013-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2013-01-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2013-01-03&#39;</span><span class="p">,</span> <span class="s1">&#39;2013-01-04&#39;</span><span class="p">,</span>
               <span class="s1">&#39;2013-01-05&#39;</span><span class="p">,</span> <span class="s1">&#39;2013-01-06&#39;</span><span class="p">],</span>
              <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;datetime64[ns]&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>

<span class="c1"># 获取列信息</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
<span class="n">Index</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>

<span class="c1"># 获取数据信息</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">values</span>
<span class="n">array</span><span class="p">([[</span> <span class="mf">1.23189704</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.16983942</span><span class="p">,</span>  <span class="mf">1.3332949</span> <span class="p">,</span>  <span class="mf">0.36714191</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">0.12744988</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.71667129</span><span class="p">,</span>  <span class="mf">0.91034961</span><span class="p">,</span>  <span class="mf">0.15118638</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">0.24165226</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.98464711</span><span class="p">,</span>  <span class="mf">0.78865554</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.20363944</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.04498958</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.25515787</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.21384804</span><span class="p">,</span>  <span class="mf">1.07671506</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.41821265</span><span class="p">,</span>  <span class="mf">0.10740007</span><span class="p">,</span>  <span class="mf">0.61944799</span><span class="p">,</span>  <span class="mf">1.49408712</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">1.8310196</span> <span class="p">,</span>  <span class="mf">0.81352564</span><span class="p">,</span>  <span class="mf">0.40310115</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.25194611</span><span class="p">]])</span>

<span class="c1"># 获取简单的统计信息</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
              <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="n">count</span>  <span class="mf">6.000000</span>  <span class="mf">6.000000</span>  <span class="mf">6.000000</span>  <span class="mf">6.000000</span>
<span class="n">mean</span>  <span class="o">-</span><span class="mf">0.084170</span> <span class="o">-</span><span class="mf">0.367565</span>  <span class="mf">0.473500</span>  <span class="mf">0.272257</span>
<span class="n">std</span>    <span class="mf">1.007895</span>  <span class="mf">0.880134</span>  <span class="mf">0.883494</span>  <span class="mf">0.970912</span>
<span class="nb">min</span>   <span class="o">-</span><span class="mf">1.831020</span> <span class="o">-</span><span class="mf">1.716671</span> <span class="o">-</span><span class="mf">1.213848</span> <span class="o">-</span><span class="mf">1.251946</span>
<span class="mi">25</span><span class="o">%</span>   <span class="o">-</span><span class="mf">0.213102</span> <span class="o">-</span><span class="mf">0.802275</span>  <span class="mf">0.457188</span> <span class="o">-</span><span class="mf">0.114933</span>
<span class="mi">50</span><span class="o">%</span>   <span class="o">-</span><span class="mf">0.041230</span> <span class="o">-</span><span class="mf">0.212499</span>  <span class="mf">0.704052</span>  <span class="mf">0.259164</span>
<span class="mi">75</span><span class="o">%</span>    <span class="mf">0.324907</span>  <span class="mf">0.038090</span>  <span class="mf">0.879926</span>  <span class="mf">0.899322</span>
<span class="nb">max</span>    <span class="mf">1.231897</span>  <span class="mf">0.813526</span>  <span class="mf">1.333295</span>  <span class="mf">1.494087</span>

<span class="c1"># 转置矩阵</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">T</span>
   <span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span>  <span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>  <span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span>
<span class="n">A</span>    <span class="mf">1.231897</span>   <span class="o">-</span><span class="mf">0.127450</span>   <span class="o">-</span><span class="mf">0.241652</span>    <span class="mf">0.044990</span>    <span class="mf">0.418213</span>   <span class="o">-</span><span class="mf">1.831020</span>
<span class="n">B</span>   <span class="o">-</span><span class="mf">0.169839</span>   <span class="o">-</span><span class="mf">1.716671</span>   <span class="o">-</span><span class="mf">0.984647</span>   <span class="o">-</span><span class="mf">0.255158</span>    <span class="mf">0.107400</span>    <span class="mf">0.813526</span>
<span class="n">C</span>    <span class="mf">1.333295</span>    <span class="mf">0.910350</span>    <span class="mf">0.788656</span>   <span class="o">-</span><span class="mf">1.213848</span>    <span class="mf">0.619448</span>    <span class="mf">0.403101</span>
<span class="n">D</span>    <span class="mf">0.367142</span>    <span class="mf">0.151186</span>   <span class="o">-</span><span class="mf">0.203639</span>    <span class="mf">1.076715</span>    <span class="mf">1.494087</span>   <span class="o">-</span><span class="mf">1.251946</span>

<span class="c1"># 按照列排序</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
                  <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>  <span class="mf">0.910350</span>  <span class="mf">0.151186</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>  <span class="mf">0.788656</span> <span class="o">-</span><span class="mf">0.203639</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span> <span class="o">-</span><span class="mf">1.213848</span>  <span class="mf">1.076715</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mf">1.231897</span> <span class="o">-</span><span class="mf">0.169839</span>  <span class="mf">1.333295</span>  <span class="mf">0.367142</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">0.418213</span>  <span class="mf">0.107400</span>  <span class="mf">0.619448</span>  <span class="mf">1.494087</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span> <span class="o">-</span><span class="mf">1.831020</span>  <span class="mf">0.813526</span>  <span class="mf">0.403101</span> <span class="o">-</span><span class="mf">1.251946</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="选择数据">选择数据</h2>

<h3 id="获取">获取</h3>

<p>选择列， 返回的是Series</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>    <span class="mf">1.231897</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span>   <span class="o">-</span><span class="mf">0.127450</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>   <span class="o">-</span><span class="mf">0.241652</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>    <span class="mf">0.044990</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>    <span class="mf">0.418213</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span>   <span class="o">-</span><span class="mf">1.831020</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">D</span><span class="p">,</span> <span class="n">Name</span><span class="p">:</span> <span class="n">A</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">A</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>    <span class="mf">1.231897</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span>   <span class="o">-</span><span class="mf">0.127450</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>   <span class="o">-</span><span class="mf">0.241652</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>    <span class="mf">0.044990</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>    <span class="mf">0.418213</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span>   <span class="o">-</span><span class="mf">1.831020</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">D</span><span class="p">,</span> <span class="n">Name</span><span class="p">:</span> <span class="n">A</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span></code></pre></td></tr></table>
</div>
</div>
<p>选择行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mf">1.231897</span> <span class="o">-</span><span class="mf">0.169839</span>  <span class="mf">1.333295</span>  <span class="mf">0.367142</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>  <span class="mf">0.910350</span>  <span class="mf">0.151186</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>  <span class="mf">0.788656</span> <span class="o">-</span><span class="mf">0.203639</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s2">&#34;20130102&#34;</span><span class="p">:</span><span class="s2">&#34;20130104&#34;</span><span class="p">]</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>  <span class="mf">0.910350</span>  <span class="mf">0.151186</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>  <span class="mf">0.788656</span> <span class="o">-</span><span class="mf">0.203639</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span> <span class="o">-</span><span class="mf">1.213848</span>  <span class="mf">1.076715</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="通过label选择">通过Label选择</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># 返回的Series</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">dates</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
<span class="n">A</span>    <span class="mf">1.231897</span>
<span class="n">B</span>   <span class="o">-</span><span class="mf">0.169839</span>
<span class="n">C</span>    <span class="mf">1.333295</span>
<span class="n">D</span>    <span class="mf">0.367142</span>
<span class="n">Name</span><span class="p">:</span> <span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="c1"># 返回的DateFrame</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]]</span>
                  <span class="n">A</span>         <span class="n">B</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mf">1.231897</span> <span class="o">-</span><span class="mf">0.169839</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">0.418213</span>  <span class="mf">0.107400</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span> <span class="o">-</span><span class="mf">1.831020</span>  <span class="mf">0.813526</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;20130102&#39;</span><span class="p">:</span><span class="s1">&#39;20130104&#39;</span><span class="p">,[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">]]</span>
                   <span class="n">A</span>         <span class="n">B</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span>

<span class="c1"># 降维返回</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;20130102&#39;</span><span class="p">,[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">]]</span>
<span class="n">A</span>   <span class="o">-</span><span class="mf">0.127450</span>
<span class="n">B</span>   <span class="o">-</span><span class="mf">1.716671</span>
<span class="n">Name</span><span class="p">:</span> <span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="通过position选择">通过Position选择</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># 返回第4行</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">A</span>    <span class="mf">0.044990</span>
<span class="n">B</span>   <span class="o">-</span><span class="mf">0.255158</span>
<span class="n">C</span>   <span class="o">-</span><span class="mf">1.213848</span>
<span class="n">D</span>    <span class="mf">1.076715</span>
<span class="n">Name</span><span class="p">:</span> <span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>


<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
                   <span class="n">A</span>         <span class="n">B</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">0.418213</span>  <span class="mf">0.107400</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:]</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>  <span class="mf">0.910350</span>  <span class="mf">0.151186</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>  <span class="mf">0.788656</span> <span class="o">-</span><span class="mf">0.203639</span>

<span class="c1"># 获得指定位置的元素</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="o">-</span><span class="mf">1.7166712884342545</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="o">-</span><span class="mf">1.7166712884342545</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="布尔索引">布尔索引</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">A</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mf">1.231897</span> <span class="o">-</span><span class="mf">0.169839</span>  <span class="mf">1.333295</span>  <span class="mf">0.367142</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span> <span class="o">-</span><span class="mf">1.213848</span>  <span class="mf">1.076715</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">0.418213</span>  <span class="mf">0.107400</span>  <span class="mf">0.619448</span>  <span class="mf">1.494087</span>


<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mf">1.231897</span>       <span class="n">NaN</span>  <span class="mf">1.333295</span>  <span class="mf">0.367142</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span>       <span class="n">NaN</span>       <span class="n">NaN</span>  <span class="mf">0.910350</span>  <span class="mf">0.151186</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>       <span class="n">NaN</span>       <span class="n">NaN</span>  <span class="mf">0.788656</span>       <span class="n">NaN</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span>       <span class="n">NaN</span>       <span class="n">NaN</span>  <span class="mf">1.076715</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">0.418213</span>  <span class="mf">0.107400</span>  <span class="mf">0.619448</span>  <span class="mf">1.494087</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span>       <span class="n">NaN</span>  <span class="mf">0.813526</span>  <span class="mf">0.403101</span>       <span class="n">NaN</span>


<span class="o">&gt;&gt;&gt;</span> <span class="n">df2</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="s1">&#39;two&#39;</span><span class="p">,</span><span class="s1">&#39;three&#39;</span><span class="p">,</span><span class="s1">&#39;four&#39;</span><span class="p">,</span><span class="s1">&#39;three&#39;</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df2</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>      <span class="n">E</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mf">1.231897</span> <span class="o">-</span><span class="mf">0.169839</span>  <span class="mf">1.333295</span>  <span class="mf">0.367142</span>    <span class="n">one</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>  <span class="mf">0.910350</span>  <span class="mf">0.151186</span>    <span class="n">one</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>  <span class="mf">0.788656</span> <span class="o">-</span><span class="mf">0.203639</span>    <span class="n">two</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span> <span class="o">-</span><span class="mf">1.213848</span>  <span class="mf">1.076715</span>  <span class="n">three</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">0.418213</span>  <span class="mf">0.107400</span>  <span class="mf">0.619448</span>  <span class="mf">1.494087</span>   <span class="n">four</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span> <span class="o">-</span><span class="mf">1.831020</span>  <span class="mf">0.813526</span>  <span class="mf">0.403101</span> <span class="o">-</span><span class="mf">1.251946</span>  <span class="n">three</span>

<span class="c1"># 使用isin()来过滤</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df2</span><span class="p">[</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;four&#39;</span><span class="p">])]</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>     <span class="n">E</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>  <span class="mf">0.788656</span> <span class="o">-</span><span class="mf">0.203639</span>   <span class="n">two</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">0.418213</span>  <span class="mf">0.107400</span>  <span class="mf">0.619448</span>  <span class="mf">1.494087</span>  <span class="n">four</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="赋值">赋值</h3>

<p>根据日期新增加一列</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">s1</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span>    <span class="mi">1</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>    <span class="mi">2</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>    <span class="mi">3</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>    <span class="mi">4</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span>    <span class="mi">5</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">07</span>    <span class="mi">6</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">D</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;F&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">s1</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>    <span class="n">F</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mf">1.231897</span> <span class="o">-</span><span class="mf">0.169839</span>  <span class="mf">1.333295</span>  <span class="mf">0.367142</span>  <span class="n">NaN</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>  <span class="mf">0.910350</span>  <span class="mf">0.151186</span>  <span class="mf">1.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>  <span class="mf">0.788656</span> <span class="o">-</span><span class="mf">0.203639</span>  <span class="mf">2.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span> <span class="o">-</span><span class="mf">1.213848</span>  <span class="mf">1.076715</span>  <span class="mf">3.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">0.418213</span>  <span class="mf">0.107400</span>  <span class="mf">0.619448</span>  <span class="mf">1.494087</span>  <span class="mf">4.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span> <span class="o">-</span><span class="mf">1.831020</span>  <span class="mf">0.813526</span>  <span class="mf">0.403101</span> <span class="o">-</span><span class="mf">1.251946</span>  <span class="mf">5.0</span>

<span class="c1"># 通过label赋值</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">dates</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;A&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># 通过position赋值</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># 通过ndarray赋值</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;D&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>  <span class="n">D</span>    <span class="n">F</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mf">0.000000</span>  <span class="mf">0.000000</span>  <span class="mf">1.333295</span>  <span class="mi">5</span>  <span class="n">NaN</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>  <span class="mf">0.910350</span>  <span class="mi">5</span>  <span class="mf">1.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>  <span class="mf">0.788656</span>  <span class="mi">5</span>  <span class="mf">2.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span> <span class="o">-</span><span class="mf">1.213848</span>  <span class="mi">5</span>  <span class="mf">3.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">0.418213</span>  <span class="mf">0.107400</span>  <span class="mf">0.619448</span>  <span class="mi">5</span>  <span class="mf">4.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span> <span class="o">-</span><span class="mf">1.831020</span>  <span class="mf">0.813526</span>  <span class="mf">0.403101</span>  <span class="mi">5</span>  <span class="mf">5.0</span>

<span class="c1"># 通过where操作</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABCD&#39;</span><span class="p">))</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span> <span class="o">-</span><span class="mf">1.231777</span> <span class="o">-</span><span class="mf">0.068987</span> <span class="o">-</span><span class="mf">0.105402</span>  <span class="mf">1.512076</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">1.120426</span> <span class="o">-</span><span class="mf">0.240417</span>  <span class="mf">0.223964</span> <span class="o">-</span><span class="mf">0.559793</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>  <span class="mf">0.697097</span>  <span class="mf">0.758780</span> <span class="o">-</span><span class="mf">1.191408</span> <span class="o">-</span><span class="mf">0.793882</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.332519</span>  <span class="mf">0.784564</span>  <span class="mf">0.805932</span> <span class="o">-</span><span class="mf">1.169186</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">0.010235</span>  <span class="mf">0.156115</span>  <span class="mf">0.419567</span> <span class="o">-</span><span class="mf">2.279214</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span>  <span class="mf">0.294819</span> <span class="o">-</span><span class="mf">0.691370</span>  <span class="mf">0.294119</span> <span class="o">-</span><span class="mf">0.208475</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df2</span><span class="p">[</span><span class="n">df</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">df2</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df2</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span> <span class="o">-</span><span class="mf">1.231777</span> <span class="o">-</span><span class="mf">0.068987</span> <span class="o">-</span><span class="mf">0.105402</span> <span class="o">-</span><span class="mf">1.512076</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">1.120426</span> <span class="o">-</span><span class="mf">0.240417</span> <span class="o">-</span><span class="mf">0.223964</span> <span class="o">-</span><span class="mf">0.559793</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.697097</span> <span class="o">-</span><span class="mf">0.758780</span> <span class="o">-</span><span class="mf">1.191408</span> <span class="o">-</span><span class="mf">0.793882</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span> <span class="o">-</span><span class="mf">0.332519</span> <span class="o">-</span><span class="mf">0.784564</span> <span class="o">-</span><span class="mf">0.805932</span> <span class="o">-</span><span class="mf">1.169186</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span> <span class="o">-</span><span class="mf">0.010235</span> <span class="o">-</span><span class="mf">0.156115</span> <span class="o">-</span><span class="mf">0.419567</span> <span class="o">-</span><span class="mf">2.279214</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span> <span class="o">-</span><span class="mf">0.294819</span> <span class="o">-</span><span class="mf">0.691370</span> <span class="o">-</span><span class="mf">0.294119</span> <span class="o">-</span><span class="mf">0.208475</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="数据缺失">数据缺失</h2>

<p>pandas使用<code>np.nan</code>来表示缺失的数据，它默认不参与任何运算</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df1</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>  <span class="n">D</span>    <span class="n">F</span>   <span class="n">E</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mf">0.000000</span>  <span class="mf">0.000000</span>  <span class="mf">1.333295</span>  <span class="mi">5</span>  <span class="n">NaN</span> <span class="n">NaN</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>  <span class="mf">0.910350</span>  <span class="mi">5</span>  <span class="mf">1.0</span> <span class="n">NaN</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>  <span class="mf">0.788656</span>  <span class="mi">5</span>  <span class="mf">2.0</span> <span class="n">NaN</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span> <span class="o">-</span><span class="mf">1.213848</span>  <span class="mi">5</span>  <span class="mf">3.0</span> <span class="n">NaN</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">dates</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span><span class="n">dates</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;E&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df1</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>  <span class="n">D</span>    <span class="n">F</span>    <span class="n">E</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mf">0.000000</span>  <span class="mf">0.000000</span>  <span class="mf">1.333295</span>  <span class="mi">5</span>  <span class="n">NaN</span>  <span class="mf">1.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>  <span class="mf">0.910350</span>  <span class="mi">5</span>  <span class="mf">1.0</span>  <span class="mf">1.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>  <span class="mf">0.788656</span>  <span class="mi">5</span>  <span class="mf">2.0</span>  <span class="n">NaN</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span> <span class="o">-</span><span class="mf">1.213848</span>  <span class="mi">5</span>  <span class="mf">3.0</span>  <span class="n">NaN</span>

<span class="c1"># 丢弃所有包含NaN的行</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df1</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;any&#39;</span><span class="p">)</span>
                  <span class="n">A</span>         <span class="n">B</span>        <span class="n">C</span>  <span class="n">D</span>    <span class="n">F</span>    <span class="n">E</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.12745</span> <span class="o">-</span><span class="mf">1.716671</span>  <span class="mf">0.91035</span>  <span class="mi">5</span>  <span class="mf">1.0</span>  <span class="mf">1.0</span>

<span class="c1"># 填充所有包含NaN的元素</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df1</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
                   <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>  <span class="n">D</span>    <span class="n">F</span>    <span class="n">E</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="mf">0.000000</span>  <span class="mf">0.000000</span>  <span class="mf">1.333295</span>  <span class="mi">5</span>  <span class="mf">5.0</span>  <span class="mf">1.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="o">-</span><span class="mf">0.127450</span> <span class="o">-</span><span class="mf">1.716671</span>  <span class="mf">0.910350</span>  <span class="mi">5</span>  <span class="mf">1.0</span>  <span class="mf">1.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span> <span class="o">-</span><span class="mf">0.241652</span> <span class="o">-</span><span class="mf">0.984647</span>  <span class="mf">0.788656</span>  <span class="mi">5</span>  <span class="mf">2.0</span>  <span class="mf">5.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mf">0.044990</span> <span class="o">-</span><span class="mf">0.255158</span> <span class="o">-</span><span class="mf">1.213848</span>  <span class="mi">5</span>  <span class="mf">3.0</span>  <span class="mf">5.0</span>

<span class="c1"># 获取元素值为nan的布尔掩码</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">df1</span><span class="p">)</span>
                <span class="n">A</span>      <span class="n">B</span>      <span class="n">C</span>      <span class="n">D</span>      <span class="n">F</span>      <span class="n">E</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>   <span class="bp">True</span>  <span class="bp">False</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>   <span class="bp">True</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>  <span class="bp">False</span>   <span class="bp">True</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="运算操作">运算操作</h2>

<h3 id="stats统计">Stats统计</h3>

<p>运算操作都会排除<code>NaN</code>元素</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABCD&#39;</span><span class="p">))</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
             <span class="n">A</span>   <span class="n">B</span>   <span class="n">C</span>   <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>   <span class="mi">0</span>   <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span>   <span class="mi">4</span>   <span class="mi">5</span>   <span class="mi">6</span>   <span class="mi">7</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>   <span class="mi">8</span>   <span class="mi">9</span>  <span class="mi">10</span>  <span class="mi">11</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mi">12</span>  <span class="mi">13</span>  <span class="mi">14</span>  <span class="mi">15</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mi">16</span>  <span class="mi">17</span>  <span class="mi">18</span>  <span class="mi">19</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span>  <span class="mi">20</span>  <span class="mi">21</span>  <span class="mi">22</span>  <span class="mi">23</span>

<span class="c1"># 计算列的平均值</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">A</span>    <span class="mf">10.0</span>
<span class="n">B</span>    <span class="mf">11.0</span>
<span class="n">C</span>    <span class="mf">12.0</span>
<span class="n">D</span>    <span class="mf">13.0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="err">计算行的平均值</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>     <span class="mf">1.5</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span>     <span class="mf">5.5</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>     <span class="mf">9.5</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>    <span class="mf">13.5</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>    <span class="mf">17.5</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span>    <span class="mf">21.5</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">D</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="c1"># shift(n),按照列的方向，从上往下移动n个位置</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">)</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>    <span class="n">NaN</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span>    <span class="n">NaN</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>    <span class="mf">1.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>    <span class="mf">3.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>    <span class="mf">5.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span>    <span class="n">NaN</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">D</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="c1"># sub函数,DataFrame相减操作, 等于 df-s</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
               <span class="n">A</span>     <span class="n">B</span>     <span class="n">C</span>     <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>   <span class="n">NaN</span>   <span class="n">NaN</span>   <span class="n">NaN</span>   <span class="n">NaN</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span>   <span class="n">NaN</span>   <span class="n">NaN</span>   <span class="n">NaN</span>   <span class="n">NaN</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>   <span class="mf">7.0</span>   <span class="mf">8.0</span>   <span class="mf">9.0</span>  <span class="mf">10.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>   <span class="mf">9.0</span>  <span class="mf">10.0</span>  <span class="mf">11.0</span>  <span class="mf">12.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mf">11.0</span>  <span class="mf">12.0</span>  <span class="mf">13.0</span>  <span class="mf">14.0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span>   <span class="n">NaN</span>   <span class="n">NaN</span>   <span class="n">NaN</span>   <span class="n">NaN</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="apply">Apply</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
             <span class="n">A</span>   <span class="n">B</span>   <span class="n">C</span>   <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>   <span class="mi">0</span>   <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span>   <span class="mi">4</span>   <span class="mi">5</span>   <span class="mi">6</span>   <span class="mi">7</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>   <span class="mi">8</span>   <span class="mi">9</span>  <span class="mi">10</span>  <span class="mi">11</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mi">12</span>  <span class="mi">13</span>  <span class="mi">14</span>  <span class="mi">15</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mi">16</span>  <span class="mi">17</span>  <span class="mi">18</span>  <span class="mi">19</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span>  <span class="mi">20</span>  <span class="mi">21</span>  <span class="mi">22</span>  <span class="mi">23</span>

<span class="c1"># 在列方向累加</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">)</span>
             <span class="n">A</span>   <span class="n">B</span>   <span class="n">C</span>   <span class="n">D</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>   <span class="mi">0</span>   <span class="mi">1</span>   <span class="mi">2</span>   <span class="mi">3</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span>   <span class="mi">4</span>   <span class="mi">6</span>   <span class="mi">8</span>  <span class="mi">10</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">03</span>  <span class="mi">12</span>  <span class="mi">15</span>  <span class="mi">18</span>  <span class="mi">21</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">04</span>  <span class="mi">24</span>  <span class="mi">28</span>  <span class="mi">32</span>  <span class="mi">36</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">05</span>  <span class="mi">40</span>  <span class="mi">45</span>  <span class="mi">50</span>  <span class="mi">55</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">06</span>  <span class="mi">60</span>  <span class="mi">66</span>  <span class="mi">72</span>  <span class="mi">78</span>

<span class="c1"># 列方向的最大值-最小值， 得到的是一个Series</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="nb">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="nb">min</span><span class="p">())</span>
<span class="n">A</span>    <span class="mi">20</span>
<span class="n">B</span>    <span class="mi">20</span>
<span class="n">C</span>    <span class="mi">20</span>
<span class="n">D</span>    <span class="mi">20</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="直方图-histogramming">直方图 Histogramming</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="mi">0</span>    <span class="mi">6</span>
<span class="mi">1</span>    <span class="mi">5</span>
<span class="mi">2</span>    <span class="mi">0</span>
<span class="mi">3</span>    <span class="mi">2</span>
<span class="mi">4</span>    <span class="mi">5</span>
<span class="mi">5</span>    <span class="mi">1</span>
<span class="mi">6</span>    <span class="mi">3</span>
<span class="mi">7</span>    <span class="mi">3</span>
<span class="mi">8</span>    <span class="mi">3</span>
<span class="mi">9</span>    <span class="mi">1</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>

<span class="c1"># 索引是出现的数字，值是次数</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="mi">3</span>    <span class="mi">3</span>
<span class="mi">5</span>    <span class="mi">2</span>
<span class="mi">1</span>    <span class="mi">2</span>
<span class="mi">6</span>    <span class="mi">1</span>
<span class="mi">2</span>    <span class="mi">1</span>
<span class="mi">0</span>    <span class="mi">1</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="字符串方法">字符串方法</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;Aaba&#39;</span><span class="p">,</span> <span class="s1">&#39;Baca&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;CABA&#39;</span><span class="p">,</span> <span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<span class="mi">0</span>       <span class="n">a</span>
<span class="mi">1</span>       <span class="n">b</span>
<span class="mi">2</span>       <span class="n">c</span>
<span class="mi">3</span>    <span class="n">aaba</span>
<span class="mi">4</span>    <span class="n">baca</span>
<span class="mi">5</span>     <span class="n">NaN</span>
<span class="mi">6</span>    <span class="n">caba</span>
<span class="mi">7</span>     <span class="n">dog</span>
<span class="mi">8</span>     <span class="n">cat</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="合并">合并</h2>

<h3 id="concat-http-pandas-pydata-org-pandas-docs-stable-merging-html-merging"><a href="http://pandas.pydata.org/pandas-docs/stable/merging.html#merging">Concat</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
          <span class="mi">0</span>         <span class="mi">1</span>         <span class="mi">2</span>         <span class="mi">3</span>
<span class="mi">0</span> <span class="o">-</span><span class="mf">1.710767</span> <span class="o">-</span><span class="mf">2.107488</span>  <span class="mf">1.441790</span>  <span class="mf">0.959924</span>
<span class="mi">1</span>  <span class="mf">0.509422</span>  <span class="mf">0.099733</span>  <span class="mf">0.845039</span>  <span class="mf">0.232462</span>
<span class="mi">2</span> <span class="o">-</span><span class="mf">0.609247</span>  <span class="mf">0.533162</span> <span class="o">-</span><span class="mf">0.387640</span>  <span class="mf">0.668803</span>
<span class="mi">3</span>  <span class="mf">0.946219</span> <span class="o">-</span><span class="mf">0.326805</span>  <span class="mf">1.245303</span>  <span class="mf">1.336090</span>
<span class="mi">4</span> <span class="o">-</span><span class="mf">1.069114</span>  <span class="mf">0.755313</span> <span class="o">-</span><span class="mf">1.003991</span> <span class="o">-</span><span class="mf">0.327009</span>
<span class="mi">5</span>  <span class="mf">1.169418</span> <span class="o">-</span><span class="mf">1.225637</span> <span class="o">-</span><span class="mf">2.137500</span>  <span class="mf">1.766341</span>
<span class="mi">6</span> <span class="o">-</span><span class="mf">1.751095</span>  <span class="mf">0.279439</span>  <span class="mf">0.018053</span>  <span class="mf">1.800435</span>
<span class="mi">7</span> <span class="o">-</span><span class="mf">0.328828</span> <span class="o">-</span><span class="mf">1.513893</span>  <span class="mf">1.879333</span>  <span class="mf">0.945217</span>
<span class="mi">8</span>  <span class="mf">2.440123</span> <span class="o">-</span><span class="mf">0.260918</span> <span class="o">-</span><span class="mf">0.232951</span> <span class="o">-</span><span class="mf">1.337775</span>
<span class="mi">9</span> <span class="o">-</span><span class="mf">0.876878</span> <span class="o">-</span><span class="mf">1.153583</span> <span class="o">-</span><span class="mf">1.487573</span> <span class="o">-</span><span class="mf">1.509871</span>

<span class="c1"># 分成小块</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pieces</span> <span class="o">=</span> <span class="p">[</span><span class="n">df</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">7</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="mi">7</span><span class="p">:]]</span>

<span class="c1"># 合并</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span>
          <span class="mi">0</span>         <span class="mi">1</span>         <span class="mi">2</span>         <span class="mi">3</span>
<span class="mi">0</span> <span class="o">-</span><span class="mf">1.710767</span> <span class="o">-</span><span class="mf">2.107488</span>  <span class="mf">1.441790</span>  <span class="mf">0.959924</span>
<span class="mi">1</span>  <span class="mf">0.509422</span>  <span class="mf">0.099733</span>  <span class="mf">0.845039</span>  <span class="mf">0.232462</span>
<span class="mi">2</span> <span class="o">-</span><span class="mf">0.609247</span>  <span class="mf">0.533162</span> <span class="o">-</span><span class="mf">0.387640</span>  <span class="mf">0.668803</span>
<span class="mi">3</span>  <span class="mf">0.946219</span> <span class="o">-</span><span class="mf">0.326805</span>  <span class="mf">1.245303</span>  <span class="mf">1.336090</span>
<span class="mi">4</span> <span class="o">-</span><span class="mf">1.069114</span>  <span class="mf">0.755313</span> <span class="o">-</span><span class="mf">1.003991</span> <span class="o">-</span><span class="mf">0.327009</span>
<span class="mi">5</span>  <span class="mf">1.169418</span> <span class="o">-</span><span class="mf">1.225637</span> <span class="o">-</span><span class="mf">2.137500</span>  <span class="mf">1.766341</span>
<span class="mi">6</span> <span class="o">-</span><span class="mf">1.751095</span>  <span class="mf">0.279439</span>  <span class="mf">0.018053</span>  <span class="mf">1.800435</span>
<span class="mi">7</span> <span class="o">-</span><span class="mf">0.328828</span> <span class="o">-</span><span class="mf">1.513893</span>  <span class="mf">1.879333</span>  <span class="mf">0.945217</span>
<span class="mi">8</span>  <span class="mf">2.440123</span> <span class="o">-</span><span class="mf">0.260918</span> <span class="o">-</span><span class="mf">0.232951</span> <span class="o">-</span><span class="mf">1.337775</span>
<span class="mi">9</span> <span class="o">-</span><span class="mf">0.876878</span> <span class="o">-</span><span class="mf">1.153583</span> <span class="o">-</span><span class="mf">1.487573</span> <span class="o">-</span><span class="mf">1.509871</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="join-http-pandas-pydata-org-pandas-docs-stable-merging-html-merging-join"><a href="http://pandas.pydata.org/pandas-docs/stable/merging.html#merging-join">Join</a></h3>

<p>跟数据库的Join操作一样</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="s1">&#39;lval&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">left</span>
   <span class="n">key</span>  <span class="n">lval</span>
<span class="mi">0</span>  <span class="n">foo</span>     <span class="mi">1</span>
<span class="mi">1</span>  <span class="n">foo</span>     <span class="mi">2</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="s1">&#39;rval&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">right</span>
   <span class="n">key</span>  <span class="n">rval</span>
<span class="mi">0</span>  <span class="n">foo</span>     <span class="mi">4</span>
<span class="mi">1</span>  <span class="n">foo</span>     <span class="mi">5</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;key&#39;</span><span class="p">)</span>
   <span class="n">key</span>  <span class="n">lval</span>  <span class="n">rval</span>
<span class="mi">0</span>  <span class="n">foo</span>     <span class="mi">1</span>     <span class="mi">4</span>
<span class="mi">1</span>  <span class="n">foo</span>     <span class="mi">1</span>     <span class="mi">5</span>
<span class="mi">2</span>  <span class="n">foo</span>     <span class="mi">2</span>     <span class="mi">4</span>
<span class="mi">3</span>  <span class="n">foo</span>     <span class="mi">2</span>     <span class="mi">5</span></code></pre></td></tr></table>
</div>
</div>
<p>另一个例子</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="s1">&#39;lval&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">left</span>
   <span class="n">key</span>  <span class="n">lval</span>
<span class="mi">0</span>  <span class="n">foo</span>     <span class="mi">1</span>
<span class="mi">1</span>  <span class="n">bar</span>     <span class="mi">2</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="s1">&#39;rval&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">right</span>
   <span class="n">key</span>  <span class="n">rval</span>
<span class="mi">0</span>  <span class="n">foo</span>     <span class="mi">4</span>
<span class="mi">1</span>  <span class="n">bar</span>     <span class="mi">5</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;key&#39;</span><span class="p">)</span>
   <span class="n">key</span>  <span class="n">lval</span>  <span class="n">rval</span>
<span class="mi">0</span>  <span class="n">foo</span>     <span class="mi">1</span>     <span class="mi">4</span>
<span class="mi">1</span>  <span class="n">bar</span>     <span class="mi">2</span>     <span class="mi">5</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="append-http-pandas-pydata-org-pandas-docs-stable-merging-html-merging-concatenation"><a href="http://pandas.pydata.org/pandas-docs/stable/merging.html#merging-concatenation">Append</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="s1">&#39;D&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
          <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="mi">0</span> <span class="o">-</span><span class="mf">1.521762</span> <span class="o">-</span><span class="mf">0.850721</span>  <span class="mf">1.322354</span> <span class="o">-</span><span class="mf">0.226562</span>
<span class="mi">1</span> <span class="o">-</span><span class="mf">2.773304</span> <span class="o">-</span><span class="mf">0.663303</span>  <span class="mf">0.895075</span> <span class="o">-</span><span class="mf">0.171524</span>
<span class="mi">2</span>  <span class="mf">0.322975</span> <span class="o">-</span><span class="mf">0.796484</span>  <span class="mf">0.379920</span>  <span class="mf">0.028333</span>
<span class="mi">3</span> <span class="o">-</span><span class="mf">0.350795</span>  <span class="mf">1.839747</span> <span class="o">-</span><span class="mf">0.359241</span> <span class="o">-</span><span class="mf">0.027921</span>
<span class="mi">4</span> <span class="o">-</span><span class="mf">0.945340</span>  <span class="mf">1.062598</span> <span class="o">-</span><span class="mf">2.208670</span>  <span class="mf">0.769027</span>
<span class="mi">5</span> <span class="o">-</span><span class="mf">0.329458</span> <span class="o">-</span><span class="mf">0.145658</span>  <span class="mf">1.580258</span> <span class="o">-</span><span class="mf">1.414820</span>
<span class="mi">6</span> <span class="o">-</span><span class="mf">0.261757</span> <span class="o">-</span><span class="mf">1.435025</span> <span class="o">-</span><span class="mf">0.512306</span> <span class="o">-</span><span class="mf">0.222287</span>
<span class="mi">7</span> <span class="o">-</span><span class="mf">0.994207</span> <span class="o">-</span><span class="mf">1.219057</span>  <span class="mf">0.781283</span> <span class="o">-</span><span class="mf">1.795741</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
          <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>         <span class="n">D</span>
<span class="mi">0</span> <span class="o">-</span><span class="mf">1.521762</span> <span class="o">-</span><span class="mf">0.850721</span>  <span class="mf">1.322354</span> <span class="o">-</span><span class="mf">0.226562</span>
<span class="mi">1</span> <span class="o">-</span><span class="mf">2.773304</span> <span class="o">-</span><span class="mf">0.663303</span>  <span class="mf">0.895075</span> <span class="o">-</span><span class="mf">0.171524</span>
<span class="mi">2</span>  <span class="mf">0.322975</span> <span class="o">-</span><span class="mf">0.796484</span>  <span class="mf">0.379920</span>  <span class="mf">0.028333</span>
<span class="mi">3</span> <span class="o">-</span><span class="mf">0.350795</span>  <span class="mf">1.839747</span> <span class="o">-</span><span class="mf">0.359241</span> <span class="o">-</span><span class="mf">0.027921</span>
<span class="mi">4</span> <span class="o">-</span><span class="mf">0.945340</span>  <span class="mf">1.062598</span> <span class="o">-</span><span class="mf">2.208670</span>  <span class="mf">0.769027</span>
<span class="mi">5</span> <span class="o">-</span><span class="mf">0.329458</span> <span class="o">-</span><span class="mf">0.145658</span>  <span class="mf">1.580258</span> <span class="o">-</span><span class="mf">1.414820</span>
<span class="mi">6</span> <span class="o">-</span><span class="mf">0.261757</span> <span class="o">-</span><span class="mf">1.435025</span> <span class="o">-</span><span class="mf">0.512306</span> <span class="o">-</span><span class="mf">0.222287</span>
<span class="mi">7</span> <span class="o">-</span><span class="mf">0.994207</span> <span class="o">-</span><span class="mf">1.219057</span>  <span class="mf">0.781283</span> <span class="o">-</span><span class="mf">1.795741</span>
<span class="mi">8</span> <span class="o">-</span><span class="mf">0.350795</span>  <span class="mf">1.839747</span> <span class="o">-</span><span class="mf">0.359241</span> <span class="o">-</span><span class="mf">0.027921</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="grouping-http-pandas-pydata-org-pandas-docs-stable-groupby-html-groupby"><a href="http://pandas.pydata.org/pandas-docs/stable/groupby.html#groupby">Grouping</a></h2>

<p><code>group by</code>的操作需要经过以下1个或多个步骤</p>

<ul>
<li>根据条件分组数据(<strong>Spliting</strong>)</li>
<li>在各个分组上执行函数(<strong>Applying</strong>)</li>
<li>合并结果(<strong>Combining</strong>)</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span>
<span class="o">...</span>                           <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">],</span>
<span class="o">...</span>                    <span class="s1">&#39;B&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">,</span>
<span class="o">...</span>                           <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">],</span>
<span class="o">...</span>                    <span class="s1">&#39;C&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
 <span class="o">...</span>                    <span class="s1">&#39;D&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)})</span>
<span class="o">...</span>
<span class="o">...</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
     <span class="n">A</span>      <span class="n">B</span>  <span class="n">C</span>  <span class="n">D</span>
<span class="mi">0</span>  <span class="n">foo</span>    <span class="n">one</span>  <span class="mi">1</span>  <span class="mi">2</span>
<span class="mi">1</span>  <span class="n">bar</span>    <span class="n">one</span>  <span class="mi">2</span>  <span class="mi">3</span>
<span class="mi">2</span>  <span class="n">foo</span>    <span class="n">two</span>  <span class="mi">3</span>  <span class="mi">4</span>
<span class="mi">3</span>  <span class="n">bar</span>  <span class="n">three</span>  <span class="mi">4</span>  <span class="mi">5</span>
<span class="mi">4</span>  <span class="n">foo</span>    <span class="n">two</span>  <span class="mi">5</span>  <span class="mi">6</span>
<span class="mi">5</span>  <span class="n">bar</span>    <span class="n">two</span>  <span class="mi">6</span>  <span class="mi">7</span>
<span class="mi">6</span>  <span class="n">foo</span>    <span class="n">one</span>  <span class="mi">7</span>  <span class="mi">8</span>
<span class="mi">7</span>  <span class="n">foo</span>  <span class="n">three</span>  <span class="mi">8</span>  <span class="mi">9</span>

<span class="c1"># 分组求和</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span>
      <span class="n">C</span>   <span class="n">D</span>
<span class="n">A</span>
<span class="n">bar</span>  <span class="mi">12</span>  <span class="mi">15</span>
<span class="n">foo</span>  <span class="mi">24</span>  <span class="mi">29</span>

<span class="c1"># 多列分组</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">])</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span>
           <span class="n">C</span>   <span class="n">D</span>
<span class="n">A</span>   <span class="n">B</span>
<span class="n">bar</span> <span class="n">one</span>    <span class="mi">2</span>   <span class="mi">3</span>
    <span class="n">three</span>  <span class="mi">4</span>   <span class="mi">5</span>
    <span class="n">two</span>    <span class="mi">6</span>   <span class="mi">7</span>
<span class="n">foo</span> <span class="n">one</span>    <span class="mi">8</span>  <span class="mi">10</span>
    <span class="n">three</span>  <span class="mi">8</span>   <span class="mi">9</span>
    <span class="n">two</span>    <span class="mi">8</span>  <span class="mi">10</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">])</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span>

<span class="c1"># 多索引</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">index</span>
<span class="n">MultiIndex</span><span class="p">(</span><span class="n">levels</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">]],</span>
           <span class="n">labels</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
           <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">columns</span>
<span class="n">Index</span><span class="p">([</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="reshaping-http-pandas-pydata-org-pandas-docs-stable-reshaping-html-reshaping-stacking"><a href="http://pandas.pydata.org/pandas-docs/stable/reshaping.html#reshaping-stacking">Reshaping</a></h2>

<h3 id="stack">Stack</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">tuples</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="p">[[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span>
<span class="o">...</span>                      <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">],</span>
<span class="o">...</span>                     <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span>
<span class="o">...</span>                      <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">]]))</span>
<span class="o">...</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">tuples</span>
<span class="p">[(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;qux&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;qux&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">)]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">tuples</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
                     <span class="n">A</span>         <span class="n">B</span>
<span class="n">first</span> <span class="n">second</span>
<span class="n">bar</span>   <span class="n">one</span>     <span class="mf">0.096893</span>  <span class="mf">0.479194</span>
      <span class="n">two</span>    <span class="o">-</span><span class="mf">0.771606</span>  <span class="mf">0.331693</span>
<span class="n">baz</span>   <span class="n">one</span>    <span class="o">-</span><span class="mf">0.022540</span>  <span class="mf">0.531284</span>
      <span class="n">two</span>    <span class="o">-</span><span class="mf">0.039843</span>  <span class="mf">1.876942</span>
<span class="n">foo</span>   <span class="n">one</span>     <span class="mf">0.250473</span>  <span class="mf">1.163931</span>
      <span class="n">two</span>    <span class="o">-</span><span class="mf">1.127163</span>  <span class="mf">1.447566</span>
<span class="n">qux</span>   <span class="n">one</span>    <span class="o">-</span><span class="mf">0.410361</span> <span class="o">-</span><span class="mf">0.734333</span>
      <span class="n">two</span>    <span class="o">-</span><span class="mf">0.461247</span>  <span class="mf">0.018531</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df2</span>
                     <span class="n">A</span>         <span class="n">B</span>
<span class="n">first</span> <span class="n">second</span>
<span class="n">bar</span>   <span class="n">one</span>     <span class="mf">0.096893</span>  <span class="mf">0.479194</span>
      <span class="n">two</span>    <span class="o">-</span><span class="mf">0.771606</span>  <span class="mf">0.331693</span>
<span class="n">baz</span>   <span class="n">one</span>    <span class="o">-</span><span class="mf">0.022540</span>  <span class="mf">0.531284</span>
      <span class="n">two</span>    <span class="o">-</span><span class="mf">0.039843</span>  <span class="mf">1.876942</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">stacked</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">stack</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">stacked</span>
<span class="n">first</span>  <span class="n">second</span>
<span class="n">bar</span>    <span class="n">one</span>     <span class="n">A</span>    <span class="mf">0.096893</span>
               <span class="n">B</span>    <span class="mf">0.479194</span>
       <span class="n">two</span>     <span class="n">A</span>   <span class="o">-</span><span class="mf">0.771606</span>
               <span class="n">B</span>    <span class="mf">0.331693</span>
<span class="n">baz</span>    <span class="n">one</span>     <span class="n">A</span>   <span class="o">-</span><span class="mf">0.022540</span>
               <span class="n">B</span>    <span class="mf">0.531284</span>
       <span class="n">two</span>     <span class="n">A</span>   <span class="o">-</span><span class="mf">0.039843</span>
               <span class="n">B</span>    <span class="mf">1.876942</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">stacked</span><span class="p">)</span>
<span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">stacked</span><span class="o">.</span><span class="n">index</span>
<span class="n">MultiIndex</span><span class="p">(</span><span class="n">levels</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]],</span>
           <span class="n">labels</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
           <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">stacked</span><span class="o">.</span><span class="n">values</span>
<span class="n">array</span><span class="p">([</span> <span class="mf">0.09689327</span><span class="p">,</span>  <span class="mf">0.47919417</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.77160574</span><span class="p">,</span>  <span class="mf">0.3316934</span> <span class="p">,</span> <span class="o">-</span><span class="mf">0.02253955</span><span class="p">,</span>
        <span class="mf">0.53128436</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.03984337</span><span class="p">,</span>  <span class="mf">1.8769416</span> <span class="p">])</span>


<span class="o">&gt;&gt;&gt;</span> <span class="n">stacked</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
                     <span class="n">A</span>         <span class="n">B</span>
<span class="n">first</span> <span class="n">second</span>
<span class="n">bar</span>   <span class="n">one</span>     <span class="mf">0.096893</span>  <span class="mf">0.479194</span>
      <span class="n">two</span>    <span class="o">-</span><span class="mf">0.771606</span>  <span class="mf">0.331693</span>
<span class="n">baz</span>   <span class="n">one</span>    <span class="o">-</span><span class="mf">0.022540</span>  <span class="mf">0.531284</span>
      <span class="n">two</span>    <span class="o">-</span><span class="mf">0.039843</span>  <span class="mf">1.876942</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">stacked</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">second</span>        <span class="n">one</span>       <span class="n">two</span>
<span class="n">first</span>
<span class="n">bar</span>   <span class="n">A</span>  <span class="mf">0.096893</span> <span class="o">-</span><span class="mf">0.771606</span>
      <span class="n">B</span>  <span class="mf">0.479194</span>  <span class="mf">0.331693</span>
<span class="n">baz</span>   <span class="n">A</span> <span class="o">-</span><span class="mf">0.022540</span> <span class="o">-</span><span class="mf">0.039843</span>
      <span class="n">B</span>  <span class="mf">0.531284</span>  <span class="mf">1.876942</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">stacked</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">first</span>          <span class="n">bar</span>       <span class="n">baz</span>
<span class="n">second</span>
<span class="n">one</span>    <span class="n">A</span>  <span class="mf">0.096893</span> <span class="o">-</span><span class="mf">0.022540</span>
       <span class="n">B</span>  <span class="mf">0.479194</span>  <span class="mf">0.531284</span>
<span class="n">two</span>    <span class="n">A</span> <span class="o">-</span><span class="mf">0.771606</span> <span class="o">-</span><span class="mf">0.039843</span>
       <span class="n">B</span>  <span class="mf">0.331693</span>  <span class="mf">1.876942</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="数据透视表-pivot-tables-http-pandas-pydata-org-pandas-docs-stable-reshaping-html-reshaping-pivot"><a href="http://pandas.pydata.org/pandas-docs/stable/reshaping.html#reshaping-pivot">数据透视表(Pivot Tables)</a></h3>

<h2 id="时间序列-http-pandas-pydata-org-pandas-docs-stable-timeseries-html-timeseries"><a href="http://pandas.pydata.org/pandas-docs/stable/timeseries.html#timeseries">时间序列</a></h2>

<p>pandas在时间序列上，提供了很方便的按照频率重新采样的功能，在财务分析上非常有用</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># 把每秒的数据按5分钟聚合</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2012&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;S&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5Min&#39;</span><span class="p">)</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>    <span class="mi">22073</span>
<span class="n">Freq</span><span class="p">:</span> <span class="mi">5</span><span class="n">T</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span></code></pre></td></tr></table>
</div>
</div>
<p>加上时区信息</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">rng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;3/6/2012 00:00&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">rng</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mo">06</span>   <span class="o">-</span><span class="mf">0.386974</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mo">07</span>    <span class="mf">0.657785</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">08</span>    <span class="mf">1.390234</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">09</span>    <span class="mf">0.412904</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">10</span>   <span class="o">-</span><span class="mf">1.189340</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">D</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ts_utc</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;UTC&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ts_utc</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mo">06</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="o">+</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>   <span class="o">-</span><span class="mf">0.386974</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mo">07</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="o">+</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>    <span class="mf">0.657785</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">08</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="o">+</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>    <span class="mf">1.390234</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">09</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="o">+</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>    <span class="mf">0.412904</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">10</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="o">+</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>   <span class="o">-</span><span class="mf">1.189340</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">D</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span></code></pre></td></tr></table>
</div>
</div>
<p>转换成另一个时区</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">ts_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;Asia/Shanghai&#39;</span><span class="p">)</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mo">06</span> <span class="mi">08</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mo">00</span>   <span class="o">-</span><span class="mf">0.386974</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mo">07</span> <span class="mi">08</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mo">00</span>    <span class="mf">0.657785</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">08</span> <span class="mi">08</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mo">00</span>    <span class="mf">1.390234</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">09</span> <span class="mi">08</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mo">00</span>    <span class="mf">0.412904</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">10</span> <span class="mi">08</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="o">+</span><span class="mi">08</span><span class="p">:</span><span class="mo">00</span>   <span class="o">-</span><span class="mf">1.189340</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">D</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span></code></pre></td></tr></table>
</div>
</div>
<p>时间跨度转换</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">rng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2012&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mi">31</span>    <span class="mf">0.825174</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">29</span>   <span class="o">-</span><span class="mf">2.190258</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">31</span>   <span class="o">-</span><span class="mf">0.073171</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">30</span>   <span class="o">-</span><span class="mf">0.404208</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">31</span>    <span class="mf">0.245025</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">M</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">to_period</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ps</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">01</span>    <span class="mf">0.825174</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">02</span>   <span class="o">-</span><span class="mf">2.190258</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span>   <span class="o">-</span><span class="mf">0.073171</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">04</span>   <span class="o">-</span><span class="mf">0.404208</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">05</span>    <span class="mf">0.245025</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">M</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ps</span><span class="o">.</span><span class="n">to_timestamp</span><span class="p">()</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>    <span class="mf">0.825174</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">01</span>   <span class="o">-</span><span class="mf">2.190258</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mo">01</span>   <span class="o">-</span><span class="mf">0.073171</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">01</span>   <span class="o">-</span><span class="mf">0.404208</span>
<span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mo">01</span>    <span class="mf">0.245025</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">MS</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span></code></pre></td></tr></table>
</div>
</div>
<p>转换季度时间</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">prng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">&#39;1990Q1&#39;</span><span class="p">,</span> <span class="s1">&#39;2000Q4&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;Q-NOV&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prng</span><span class="p">)),</span> <span class="n">prng</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="mi">1990</span><span class="n">Q1</span>   <span class="o">-</span><span class="mf">0.590040</span>
<span class="mi">1990</span><span class="n">Q2</span>   <span class="o">-</span><span class="mf">0.750392</span>
<span class="mi">1990</span><span class="n">Q3</span>   <span class="o">-</span><span class="mf">0.385517</span>
<span class="mi">1990</span><span class="n">Q4</span>   <span class="o">-</span><span class="mf">0.380806</span>
<span class="mi">1991</span><span class="n">Q1</span>   <span class="o">-</span><span class="mf">1.252727</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">Q</span><span class="o">-</span><span class="n">NOV</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="n">prng</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">9</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="mi">1990</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mo">01</span> <span class="mi">09</span><span class="p">:</span><span class="mo">00</span>   <span class="o">-</span><span class="mf">0.590040</span>
<span class="mi">1990</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">01</span> <span class="mi">09</span><span class="p">:</span><span class="mo">00</span>   <span class="o">-</span><span class="mf">0.750392</span>
<span class="mi">1990</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mo">01</span> <span class="mi">09</span><span class="p">:</span><span class="mo">00</span>   <span class="o">-</span><span class="mf">0.385517</span>
<span class="mi">1990</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mo">01</span> <span class="mi">09</span><span class="p">:</span><span class="mo">00</span>   <span class="o">-</span><span class="mf">0.380806</span>
<span class="mi">1991</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mo">01</span> <span class="mi">09</span><span class="p">:</span><span class="mo">00</span>   <span class="o">-</span><span class="mf">1.252727</span>
<span class="n">Freq</span><span class="p">:</span> <span class="n">H</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="categoricals分类-http-pandas-pydata-org-pandas-docs-stable-categorical-html-categorical"><a href="http://pandas.pydata.org/pandas-docs/stable/categorical.html#categorical">Categoricals分类</a></h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&#34;id&#34;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="s2">&#34;raw_grade&#34;</span><span class="p">:[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">]})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
   <span class="nb">id</span> <span class="n">raw_grade</span>
<span class="mi">0</span>   <span class="mi">1</span>         <span class="n">a</span>
<span class="mi">1</span>   <span class="mi">2</span>         <span class="n">b</span>
<span class="mi">2</span>   <span class="mi">3</span>         <span class="n">b</span>
<span class="mi">3</span>   <span class="mi">4</span>         <span class="n">a</span>
<span class="mi">4</span>   <span class="mi">5</span>         <span class="n">a</span>
<span class="mi">5</span>   <span class="mi">6</span>         <span class="n">e</span></code></pre></td></tr></table>
</div>
</div>
<p>转换原始类别为分类数据类型</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s2">&#34;grade&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&#34;raw_grade&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&#34;category&#34;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
   <span class="nb">id</span> <span class="n">raw_grade</span> <span class="n">grade</span>
<span class="mi">0</span>   <span class="mi">1</span>         <span class="n">a</span>     <span class="n">a</span>
<span class="mi">1</span>   <span class="mi">2</span>         <span class="n">b</span>     <span class="n">b</span>
<span class="mi">2</span>   <span class="mi">3</span>         <span class="n">b</span>     <span class="n">b</span>
<span class="mi">3</span>   <span class="mi">4</span>         <span class="n">a</span>     <span class="n">a</span>
<span class="mi">4</span>   <span class="mi">5</span>         <span class="n">a</span>     <span class="n">a</span>
<span class="mi">5</span>   <span class="mi">6</span>         <span class="n">e</span>     <span class="n">e</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s2">&#34;grade&#34;</span><span class="p">]</span>
<span class="mi">0</span>    <span class="n">a</span>
<span class="mi">1</span>    <span class="n">b</span>
<span class="mi">2</span>    <span class="n">b</span>
<span class="mi">3</span>    <span class="n">a</span>
<span class="mi">4</span>    <span class="n">a</span>
<span class="mi">5</span>    <span class="n">e</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">grade</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">category</span>
<span class="n">Categories</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">e</span><span class="p">]</span></code></pre></td></tr></table>
</div>
</div>
<p>重命名分类为更有意义的名称</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s2">&#34;grade&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;very good&#34;</span><span class="p">,</span> <span class="s2">&#34;good&#34;</span><span class="p">,</span> <span class="s2">&#34;very bad&#34;</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
   <span class="nb">id</span> <span class="n">raw_grade</span>      <span class="n">grade</span>
<span class="mi">0</span>   <span class="mi">1</span>         <span class="n">a</span>  <span class="n">very</span> <span class="n">good</span>
<span class="mi">1</span>   <span class="mi">2</span>         <span class="n">b</span>       <span class="n">good</span>
<span class="mi">2</span>   <span class="mi">3</span>         <span class="n">b</span>       <span class="n">good</span>
<span class="mi">3</span>   <span class="mi">4</span>         <span class="n">a</span>  <span class="n">very</span> <span class="n">good</span>
<span class="mi">4</span>   <span class="mi">5</span>         <span class="n">a</span>  <span class="n">very</span> <span class="n">good</span>
<span class="mi">5</span>   <span class="mi">6</span>         <span class="n">e</span>   <span class="n">very</span> <span class="n">bad</span></code></pre></td></tr></table>
</div>
</div>
<p>重新安排顺分类,同时添加缺少的分类(序列 .cat方法下返回新默认序列)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s2">&#34;grade&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&#34;grade&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">set_categories</span><span class="p">([</span><span class="s2">&#34;very bad&#34;</span><span class="p">,</span> <span class="s2">&#34;bad&#34;</span><span class="p">,</span> <span class="s2">&#34;medium&#34;</span><span class="p">,</span> <span class="s2">&#34;good&#34;</span><span class="p">,</span> <span class="s2">&#34;very good&#34;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span>
   <span class="nb">id</span> <span class="n">raw_grade</span>      <span class="n">grade</span>
<span class="mi">0</span>   <span class="mi">1</span>         <span class="n">a</span>  <span class="n">very</span> <span class="n">good</span>
<span class="mi">1</span>   <span class="mi">2</span>         <span class="n">b</span>       <span class="n">good</span>
<span class="mi">2</span>   <span class="mi">3</span>         <span class="n">b</span>       <span class="n">good</span>
<span class="mi">3</span>   <span class="mi">4</span>         <span class="n">a</span>  <span class="n">very</span> <span class="n">good</span>
<span class="mi">4</span>   <span class="mi">5</span>         <span class="n">a</span>  <span class="n">very</span> <span class="n">good</span>
<span class="mi">5</span>   <span class="mi">6</span>         <span class="n">e</span>   <span class="n">very</span> <span class="n">bad</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s2">&#34;grade&#34;</span><span class="p">]</span>
<span class="mi">0</span>    <span class="n">very</span> <span class="n">good</span>
<span class="mi">1</span>         <span class="n">good</span>
<span class="mi">2</span>         <span class="n">good</span>
<span class="mi">3</span>    <span class="n">very</span> <span class="n">good</span>
<span class="mi">4</span>    <span class="n">very</span> <span class="n">good</span>
<span class="mi">5</span>     <span class="n">very</span> <span class="n">bad</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">grade</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">category</span>
<span class="n">Categories</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span> <span class="p">[</span><span class="n">very</span> <span class="n">bad</span><span class="p">,</span> <span class="n">bad</span><span class="p">,</span> <span class="n">medium</span><span class="p">,</span> <span class="n">good</span><span class="p">,</span> <span class="n">very</span> <span class="n">good</span><span class="p">]</span></code></pre></td></tr></table>
</div>
</div>
<p>按照分类排序</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&#34;grade&#34;</span><span class="p">)</span>
   <span class="nb">id</span> <span class="n">raw_grade</span>      <span class="n">grade</span>
<span class="mi">5</span>   <span class="mi">6</span>         <span class="n">e</span>   <span class="n">very</span> <span class="n">bad</span>
<span class="mi">1</span>   <span class="mi">2</span>         <span class="n">b</span>       <span class="n">good</span>
<span class="mi">2</span>   <span class="mi">3</span>         <span class="n">b</span>       <span class="n">good</span>
<span class="mi">0</span>   <span class="mi">1</span>         <span class="n">a</span>  <span class="n">very</span> <span class="n">good</span>
<span class="mi">3</span>   <span class="mi">4</span>         <span class="n">a</span>  <span class="n">very</span> <span class="n">good</span>
<span class="mi">4</span>   <span class="mi">5</span>         <span class="n">a</span>  <span class="n">very</span> <span class="n">good</span></code></pre></td></tr></table>
</div>
</div>
<p>按照分类分组，同时也会显示空的分类</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&#34;grade&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
<span class="n">grade</span>
<span class="n">very</span> <span class="n">bad</span>     <span class="mi">1</span>
<span class="n">bad</span>          <span class="mi">0</span>
<span class="n">medium</span>       <span class="mi">0</span>
<span class="n">good</span>         <span class="mi">2</span>
<span class="n">very</span> <span class="n">good</span>    <span class="mi">3</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="plotting-http-pandas-pydata-org-pandas-docs-stable-visualization-html-visualization"><a href="http://pandas.pydata.org/pandas-docs/stable/visualization.html#visualization">Plotting</a></h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">_subplots</span><span class="o">.</span><span class="n">AxesSubplot</span> <span class="n">at</span> <span class="mh">0x108594668</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></code></pre></td></tr></table>
</div>
</div>
<p><img src="http://images.wiseturtles.com/2017-12-21-plot.png" alt="曲线图" /></p>

<p>画图带图例的图</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span>
<span class="o">...</span> <span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">();</span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">();</span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">Legend</span> <span class="n">at</span> <span class="mh">0x111793f98</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></code></pre></td></tr></table>
</div>
</div>
<p><img src="http://images.wiseturtles.com/2017-12-21-plot-lines.png" alt="带图例的曲线图" /></p>

<h2 id="数据in-out">数据In/Out</h2>

<h3 id="csv-http-pandas-pydata-org-pandas-docs-stable-io-html-csv-text-files"><a href="http://pandas.pydata.org/pandas-docs/stable/io.html#csv-text-files">CSV</a></h3>

<p>保存到csv文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;foo.csv&#39;</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<p>从csv文件读取数据</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;foo.csv&#39;</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="hdf5-http-pandas-pydata-org-pandas-docs-stable-io-html-hdf5-pytables"><a href="http://pandas.pydata.org/pandas-docs/stable/io.html#hdf5-pytables">HDF5</a></h3>

<p>保存到HDF5仓库</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">&#39;foo.h5&#39;</span><span class="p">,</span><span class="s1">&#39;df&#39;</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<p>从仓库读取</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;foo.h5&#39;</span><span class="p">,</span><span class="s1">&#39;df&#39;</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="excel-http-pandas-pydata-org-pandas-docs-stable-io-html-io-excel"><a href="http://pandas.pydata.org/pandas-docs/stable/io.html#io-excel">Excel</a></h3>

<p>保存到excel</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;foo.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Sheet1&#39;</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<p>从excel文件读取</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"> <span class="o">&gt;&gt;&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;foo.xlsx&#39;</span><span class="p">,</span> <span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NA&#39;</span><span class="p">])</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="扩展阅读">扩展阅读</h2>

<ul>
<li><a href="http://pandas.pydata.org/pandas-docs/stable/tutorials.html">pandas指南</a></li>
</ul>
    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">crazygit</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">2017-12-20</span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>

    
    
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="http://images.wiseturtles.com/wechatpay.jpg">
        <span>微信打赏</span>
      </label>
    
  </div>
</div>

    <footer class="post-footer">
      <div class="post-tags">
          <a href="https://crazygit.wiseturtles.com/tags/pandas/">pandas</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/2017/12/25/matplotlib-quickstart/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">matplotlib教程</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/2017/12/19/numpy-qucikstart/">
            <span class="next-text nav-default">NumPy快速入门指南</span>
            <span class="prev-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "crazygit/utterances"
            issue-term="pathname"
            crossorigin="anonymous"
            async>
      </script>
    </div>
  

  

  

  <div class="disqus-comment">
  <div class="disqus-button" id="load_disqus" onclick="load_disqus()">
    显示 Disqus 评论
  </div>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    function load_disqus() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'lianglin999';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

      $('#load_disqus').remove();
    };
  </script>
  <noscript>Please enable JavaScript to view the
    <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>
  
  </div>

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:crazygit@foxmail.com" rel="me noopener" class="iconfont icon-email"
        title="email" target="_blank">
      </a>
      <a href="https://twitter.com/lianglin999" rel="me noopener" class="iconfont icon-twitter"
        title="twitter" target="_blank">
      </a>
      <a href="https://github.com/crazygit" rel="me noopener" class="iconfont icon-github"
        title="github" target="_blank">
      </a>
      <a href="https://www.weibo.com/crazygit/profile" rel="me noopener" class="iconfont icon-weibo"
        title="weibo" target="_blank">
      </a>
  <a href="https://crazygit.wiseturtles.com/index.xml" rel="noopener alternate" type="application/rss&#43;xml" class="iconfont icon-rss"
    title="rss" target="_blank">
  </a>
  </div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2017 -
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span><span class="author">
        crazygit
        
      </span></span>

  
  
    <span id="busuanzi_container">
      访客数/访问量：<span id="busuanzi_value_site_uv"></span>/<span id="busuanzi_value_site_pv"></span>
    </span>
  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
<script type="text/javascript" src="/dist/jane.min.js?v=2.7.0"></script><script id="baidu_analytics">
  var _hmt = _hmt || [];
  (function() {
    if (window.location.hostname === 'localhost') return;
    var hm = document.createElement("script"); hm.async = true;
    hm.src = "https://hm.baidu.com/hm.js?2b47f91b8532d1a5e950c8e77142d95c";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>

<script id="baidu_push">
  (function(){
    if (window.location.hostname === 'localhost') return;
    var bp = document.createElement('script'); bp.async = true;
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
      bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
  })();
</script>



  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  




  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script type="text/javascript">
    AV.initialize("bWUs89CHYswTxwt88Jf71tIF-gzGzoHsz", "IcudhQhVD2eqKqkOTQQ6agUS");
  </script>

  <script>
    function showHitCount(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push($(this).attr("id").trim());
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var hits = item.get('hits');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(hits);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function (results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("hits");
            counter.save(null, {
              success: function (counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('hits'));
              },
              error: function (counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
             
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
             
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("hits", 1);
            newcounter.save(null, {
              success: function (newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('hits'));
              },
              error: function (newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function (error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function () {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        
        addCount(Counter);
      } else if ($('.post-link').length > 1) {
        
        showHitCount(Counter);
      }
    });
  </script>




  <script src="/js/douban.js"></script>


</body>
</html>
